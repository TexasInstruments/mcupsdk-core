(()=>{var t={783:(t,e,s)=>{const i=s(614).EventEmitter,n=s(129),o=s(622),r=s(747);class a{constructor(){this.helpWidth=void 0,this.sortSubcommands=!1,this.sortOptions=!1}visibleCommands(t){const e=t.commands.filter((t=>!t._hidden));if(t._hasImplicitHelpCommand()){const s=t._helpCommandnameAndArgs.split(/ +/),i=t.createCommand(s.shift()).helpOption(!1);i.description(t._helpCommandDescription),i._parseExpectedArgs(s),e.push(i)}return this.sortSubcommands&&e.sort(((t,e)=>t.name().localeCompare(e.name()))),e}visibleOptions(t){const e=t.options.filter((t=>!t.hidden)),s=t._hasHelpOption&&t._helpShortFlag&&!t._findOption(t._helpShortFlag),i=t._hasHelpOption&&!t._findOption(t._helpLongFlag);if(s||i){let n;n=s?i?t.createOption(t._helpFlags,t._helpDescription):t.createOption(t._helpShortFlag,t._helpDescription):t.createOption(t._helpLongFlag,t._helpDescription),e.push(n)}if(this.sortOptions){const t=t=>t.short?t.short.replace(/^-/,""):t.long.replace(/^--/,"");e.sort(((e,s)=>t(e).localeCompare(t(s))))}return e}visibleArguments(t){return t._argsDescription&&t._args.length?t._args.map((e=>({term:e.name,description:t._argsDescription[e.name]||""})),0):[]}subcommandTerm(t){const e=t._args.map((t=>u(t))).join(" ");return t._name+(t._aliases[0]?"|"+t._aliases[0]:"")+(t.options.length?" [options]":"")+(e?" "+e:"")}optionTerm(t){return t.flags}longestSubcommandTermLength(t,e){return e.visibleCommands(t).reduce(((t,s)=>Math.max(t,e.subcommandTerm(s).length)),0)}longestOptionTermLength(t,e){return e.visibleOptions(t).reduce(((t,s)=>Math.max(t,e.optionTerm(s).length)),0)}longestArgumentTermLength(t,e){return e.visibleArguments(t).reduce(((t,e)=>Math.max(t,e.term.length)),0)}commandUsage(t){let e=t._name;t._aliases[0]&&(e=e+"|"+t._aliases[0]);let s="";for(let e=t.parent;e;e=e.parent)s=e.name()+" "+s;return s+e+" "+t.usage()}commandDescription(t){return t.description()}subcommandDescription(t){return t.description()}optionDescription(t){if(t.negate)return t.description;const e=[];return t.argChoices&&e.push(`choices: ${t.argChoices.map((t=>JSON.stringify(t))).join(", ")}`),void 0!==t.defaultValue&&e.push(`default: ${t.defaultValueDescription||JSON.stringify(t.defaultValue)}`),e.length>0?`${t.description} (${e.join(", ")})`:t.description}formatHelp(t,e){const s=e.padWidth(t,e),i=e.helpWidth||80;function n(t,n){if(n){const o=`${t.padEnd(s+2)}${n}`;return e.wrap(o,i-2,s+2)}return t}function o(t){return t.join("\n").replace(/^/gm," ".repeat(2))}let r=[`Usage: ${e.commandUsage(t)}`,""];const a=e.commandDescription(t);a.length>0&&(r=r.concat([a,""]));const h=e.visibleArguments(t).map((t=>n(t.term,t.description)));h.length>0&&(r=r.concat(["Arguments:",o(h),""]));const l=e.visibleOptions(t).map((t=>n(e.optionTerm(t),e.optionDescription(t))));l.length>0&&(r=r.concat(["Options:",o(l),""]));const p=e.visibleCommands(t).map((t=>n(e.subcommandTerm(t),e.subcommandDescription(t))));return p.length>0&&(r=r.concat(["Commands:",o(p),""])),r.join("\n")}padWidth(t,e){return Math.max(e.longestOptionTermLength(t,e),e.longestSubcommandTermLength(t,e),e.longestArgumentTermLength(t,e))}wrap(t,e,s,i=40){if(t.match(/[\n]\s+/))return t;const n=e-s;if(n<i)return t;const o=t.substr(0,s),r=t.substr(s),a=" ".repeat(s),h=new RegExp(".{1,"+(n-1)+"}([\\s​]|$)|[^\\s​]+?([\\s​]|$)","g");return o+(r.match(h)||[]).map(((t,e)=>("\n"===t.slice(-1)&&(t=t.slice(0,t.length-1)),(e>0?a:"")+t.trimRight()))).join("\n")}}class h{constructor(t,e){this.flags=t,this.description=e||"",this.required=t.includes("<"),this.optional=t.includes("["),this.variadic=/\w\.\.\.[>\]]$/.test(t),this.mandatory=!1;const s=d(t);this.short=s.shortFlag,this.long=s.longFlag,this.negate=!1,this.long&&(this.negate=this.long.startsWith("--no-")),this.defaultValue=void 0,this.defaultValueDescription=void 0,this.parseArg=void 0,this.hidden=!1,this.argChoices=void 0}default(t,e){return this.defaultValue=t,this.defaultValueDescription=e,this}argParser(t){return this.parseArg=t,this}makeOptionMandatory(t=!0){return this.mandatory=!!t,this}hideHelp(t=!0){return this.hidden=!!t,this}_concatValue(t,e){return e!==this.defaultValue&&Array.isArray(e)?e.concat(t):[t]}choices(t){return this.argChoices=t,this.parseArg=(e,s)=>{if(!t.includes(e))throw new p(`Allowed choices are ${t.join(", ")}.`);return this.variadic?this._concatValue(e,s):e},this}name(){return this.long?this.long.replace(/^--/,""):this.short.replace(/^-/,"")}attributeName(){return this.name().replace(/^no-/,"").split("-").reduce(((t,e)=>t+e[0].toUpperCase()+e.slice(1)))}is(t){return this.short===t||this.long===t}}class l extends Error{constructor(t,e,s){super(s),Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.code=e,this.exitCode=t,this.nestedError=void 0}}class p extends l{constructor(t){super(1,"commander.invalidOptionArgument",t),Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name}}class c extends i{constructor(t){super(),this.commands=[],this.options=[],this.parent=null,this._allowUnknownOption=!1,this._allowExcessArguments=!0,this._args=[],this.rawArgs=null,this._scriptPath=null,this._name=t||"",this._optionValues={},this._storeOptionsAsProperties=!1,this._actionResults=[],this._actionHandler=null,this._executableHandler=!1,this._executableFile=null,this._defaultCommandName=null,this._exitCallback=null,this._aliases=[],this._combineFlagAndOptionalValue=!0,this._description="",this._argsDescription=void 0,this._enablePositionalOptions=!1,this._passThroughOptions=!1,this._outputConfiguration={writeOut:t=>process.stdout.write(t),writeErr:t=>process.stderr.write(t),getOutHelpWidth:()=>process.stdout.isTTY?process.stdout.columns:void 0,getErrHelpWidth:()=>process.stderr.isTTY?process.stderr.columns:void 0,outputError:(t,e)=>e(t)},this._hidden=!1,this._hasHelpOption=!0,this._helpFlags="-h, --help",this._helpDescription="display help for command",this._helpShortFlag="-h",this._helpLongFlag="--help",this._addImplicitHelpCommand=void 0,this._helpCommandName="help",this._helpCommandnameAndArgs="help [command]",this._helpCommandDescription="display help for command",this._helpConfiguration={}}command(t,e,s){let i=e,n=s;"object"==typeof i&&null!==i&&(n=i,i=null),n=n||{};const o=t.split(/ +/),r=this.createCommand(o.shift());return i&&(r.description(i),r._executableHandler=!0),n.isDefault&&(this._defaultCommandName=r._name),r._outputConfiguration=this._outputConfiguration,r._hidden=!(!n.noHelp&&!n.hidden),r._hasHelpOption=this._hasHelpOption,r._helpFlags=this._helpFlags,r._helpDescription=this._helpDescription,r._helpShortFlag=this._helpShortFlag,r._helpLongFlag=this._helpLongFlag,r._helpCommandName=this._helpCommandName,r._helpCommandnameAndArgs=this._helpCommandnameAndArgs,r._helpCommandDescription=this._helpCommandDescription,r._helpConfiguration=this._helpConfiguration,r._exitCallback=this._exitCallback,r._storeOptionsAsProperties=this._storeOptionsAsProperties,r._combineFlagAndOptionalValue=this._combineFlagAndOptionalValue,r._allowExcessArguments=this._allowExcessArguments,r._enablePositionalOptions=this._enablePositionalOptions,r._executableFile=n.executableFile||null,this.commands.push(r),r._parseExpectedArgs(o),r.parent=this,i?this:r}createCommand(t){return new c(t)}createHelp(){return Object.assign(new a,this.configureHelp())}configureHelp(t){return void 0===t?this._helpConfiguration:(this._helpConfiguration=t,this)}configureOutput(t){return void 0===t?this._outputConfiguration:(Object.assign(this._outputConfiguration,t),this)}addCommand(t,e){if(!t._name)throw new Error("Command passed to .addCommand() must have a name");return function t(e){e.forEach((e=>{if(e._executableHandler&&!e._executableFile)throw new Error(`Must specify executableFile for deeply nested executable: ${e.name()}`);t(e.commands)}))}(t.commands),(e=e||{}).isDefault&&(this._defaultCommandName=t._name),(e.noHelp||e.hidden)&&(t._hidden=!0),this.commands.push(t),t.parent=this,this}arguments(t){return this._parseExpectedArgs(t.split(/ +/))}addHelpCommand(t,e){return!1===t?this._addImplicitHelpCommand=!1:(this._addImplicitHelpCommand=!0,"string"==typeof t&&(this._helpCommandName=t.split(" ")[0],this._helpCommandnameAndArgs=t),this._helpCommandDescription=e||this._helpCommandDescription),this}_hasImplicitHelpCommand(){return void 0===this._addImplicitHelpCommand?this.commands.length&&!this._actionHandler&&!this._findCommand("help"):this._addImplicitHelpCommand}_parseExpectedArgs(t){if(t.length)return t.forEach((t=>{const e={required:!1,name:"",variadic:!1};switch(t[0]){case"<":e.required=!0,e.name=t.slice(1,-1);break;case"[":e.name=t.slice(1,-1)}e.name.length>3&&"..."===e.name.slice(-3)&&(e.variadic=!0,e.name=e.name.slice(0,-3)),e.name&&this._args.push(e)})),this._args.forEach(((t,e)=>{if(t.variadic&&e<this._args.length-1)throw new Error(`only the last argument can be variadic '${t.name}'`)})),this}exitOverride(t){return this._exitCallback=t||(t=>{if("commander.executeSubCommandAsync"!==t.code)throw t}),this}_exit(t,e,s){this._exitCallback&&this._exitCallback(new l(t,e,s)),process.exit(t)}action(t){return this._actionHandler=e=>{const s=this._args.length,i=e.slice(0,s);this._storeOptionsAsProperties?i[s]=this:i[s]=this.opts(),i.push(this);const n=t.apply(this,i);let o=this;for(;o.parent;)o=o.parent;o._actionResults.push(n)},this}createOption(t,e){return new h(t,e)}addOption(t){const e=t.name(),s=t.attributeName();let i=t.defaultValue;if(t.negate||t.optional||t.required||"boolean"==typeof i){if(t.negate){const e=t.long.replace(/^--no-/,"--");i=!this._findOption(e)||this._getOptionValue(s)}void 0!==i&&this._setOptionValue(s,i)}return this.options.push(t),this.on("option:"+e,(e=>{const n=this._getOptionValue(s);if(null!==e&&t.parseArg)try{e=t.parseArg(e,void 0===n?i:n)}catch(s){if("commander.invalidOptionArgument"===s.code){const i=`error: option '${t.flags}' argument '${e}' is invalid. ${s.message}`;this._displayError(s.exitCode,s.code,i)}throw s}else null!==e&&t.variadic&&(e=t._concatValue(e,n));"boolean"==typeof n||void 0===n?null==e?this._setOptionValue(s,!t.negate&&(i||!0)):this._setOptionValue(s,e):null!==e&&this._setOptionValue(s,!t.negate&&e)})),this}_optionEx(t,e,s,i,n){const o=this.createOption(e,s);if(o.makeOptionMandatory(!!t.mandatory),"function"==typeof i)o.default(n).argParser(i);else if(i instanceof RegExp){const t=i;i=(e,s)=>{const i=t.exec(e);return i?i[0]:s},o.default(n).argParser(i)}else o.default(i);return this.addOption(o)}option(t,e,s,i){return this._optionEx({},t,e,s,i)}requiredOption(t,e,s,i){return this._optionEx({mandatory:!0},t,e,s,i)}combineFlagAndOptionalValue(t=!0){return this._combineFlagAndOptionalValue=!!t,this}allowUnknownOption(t=!0){return this._allowUnknownOption=!!t,this}allowExcessArguments(t=!0){return this._allowExcessArguments=!!t,this}enablePositionalOptions(t=!0){return this._enablePositionalOptions=!!t,this}passThroughOptions(t=!0){if(this._passThroughOptions=!!t,this.parent&&t&&!this.parent._enablePositionalOptions)throw new Error("passThroughOptions can not be used without turning on enablePositionalOptions for parent command(s)");return this}storeOptionsAsProperties(t=!0){if(this._storeOptionsAsProperties=!!t,this.options.length)throw new Error("call .storeOptionsAsProperties() before adding options");return this}_setOptionValue(t,e){this._storeOptionsAsProperties?this[t]=e:this._optionValues[t]=e}_getOptionValue(t){return this._storeOptionsAsProperties?this[t]:this._optionValues[t]}parse(t,e){if(void 0!==t&&!Array.isArray(t))throw new Error("first parameter to parse must be array or undefined");let i;switch(e=e||{},void 0===t&&(t=process.argv,process.versions&&process.versions.electron&&(e.from="electron")),this.rawArgs=t.slice(),e.from){case void 0:case"node":this._scriptPath=t[1],i=t.slice(2);break;case"electron":process.defaultApp?(this._scriptPath=t[1],i=t.slice(2)):i=t.slice(1);break;case"user":i=t.slice(0);break;default:throw new Error(`unexpected parse option { from: '${e.from}' }`)}return!this._scriptPath&&s.c[s.s]&&(this._scriptPath=s.c[s.s].filename),this._name=this._name||this._scriptPath&&o.basename(this._scriptPath,o.extname(this._scriptPath)),this._parseCommand([],i),this}parseAsync(t,e){return this.parse(t,e),Promise.all(this._actionResults).then((()=>this))}_executeSubCommand(t,e){e=e.slice();let i=!1;const a=[".js",".ts",".tsx",".mjs",".cjs"];this._checkForMissingMandatoryOptions();let h,p=this._scriptPath;!p&&s.c[s.s]&&(p=s.c[s.s].filename);try{const t=r.realpathSync(p);h=o.dirname(t)}catch(t){h="."}let c=o.basename(p,o.extname(p))+"-"+t._name;t._executableFile&&(c=t._executableFile);const m=o.join(h,c);let u;r.existsSync(m)?c=m:a.forEach((t=>{r.existsSync(`${m}${t}`)&&(c=`${m}${t}`)})),i=a.includes(o.extname(c)),"win32"!==process.platform?i?(e.unshift(c),e=_(process.execArgv).concat(e),u=n.spawn(process.argv[0],e,{stdio:"inherit"})):u=n.spawn(c,e,{stdio:"inherit"}):(e.unshift(c),e=_(process.execArgv).concat(e),u=n.spawn(process.execPath,e,{stdio:"inherit"})),["SIGUSR1","SIGUSR2","SIGTERM","SIGINT","SIGHUP"].forEach((t=>{process.on(t,(()=>{!1===u.killed&&null===u.exitCode&&u.kill(t)}))}));const d=this._exitCallback;d?u.on("close",(()=>{d(new l(process.exitCode||0,"commander.executeSubCommandAsync","(close)"))})):u.on("close",process.exit.bind(process)),u.on("error",(e=>{if("ENOENT"===e.code){const e=`'${c}' does not exist\n - if '${t._name}' is not meant to be an executable command, remove description parameter from '.command()' and use '.description()' instead\n - if the default executable name is not suitable, use the executableFile option to supply a custom name`;throw new Error(e)}if("EACCES"===e.code)throw new Error(`'${c}' not executable`);if(d){const t=new l(1,"commander.executeSubCommandAsync","(error)");t.nestedError=e,d(t)}else process.exit(1)})),this.runningCommand=u}_dispatchSubcommand(t,e,s){const i=this._findCommand(t);i||this.help({error:!0}),i._executableHandler?this._executeSubCommand(i,e.concat(s)):i._parseCommand(e,s)}_parseCommand(t,e){const s=this.parseOptions(e);if(t=t.concat(s.operands),e=s.unknown,this.args=t.concat(e),t&&this._findCommand(t[0]))this._dispatchSubcommand(t[0],t.slice(1),e);else if(this._hasImplicitHelpCommand()&&t[0]===this._helpCommandName)1===t.length?this.help():this._dispatchSubcommand(t[1],[],[this._helpLongFlag]);else if(this._defaultCommandName)m(this,e),this._dispatchSubcommand(this._defaultCommandName,t,e);else{!this.commands.length||0!==this.args.length||this._actionHandler||this._defaultCommandName||this.help({error:!0}),m(this,s.unknown),this._checkForMissingMandatoryOptions();const i=()=>{s.unknown.length>0&&this.unknownOption(s.unknown[0])},n=`command:${this.name()}`;if(this._actionHandler){i();const s=this.args.slice();this._args.forEach(((t,e)=>{t.required&&null==s[e]?this.missingArgument(t.name):t.variadic&&(s[e]=s.splice(e),s.length=Math.min(e+1,s.length))})),s.length>this._args.length&&this._excessArguments(s),this._actionHandler(s),this.parent&&this.parent.emit(n,t,e)}else this.parent&&this.parent.listenerCount(n)?(i(),this.parent.emit(n,t,e)):t.length?this._findCommand("*")?this._dispatchSubcommand("*",t,e):this.listenerCount("command:*")?this.emit("command:*",t,e):this.commands.length?this.unknownCommand():i():this.commands.length?this.help({error:!0}):i()}}_findCommand(t){if(t)return this.commands.find((e=>e._name===t||e._aliases.includes(t)))}_findOption(t){return this.options.find((e=>e.is(t)))}_checkForMissingMandatoryOptions(){for(let t=this;t;t=t.parent)t.options.forEach((e=>{e.mandatory&&void 0===t._getOptionValue(e.attributeName())&&t.missingMandatoryOptionValue(e)}))}parseOptions(t){const e=[],s=[];let i=e;const n=t.slice();function o(t){return t.length>1&&"-"===t[0]}let r=null;for(;n.length;){const t=n.shift();if("--"===t){i===s&&i.push(t),i.push(...n);break}if(!r||o(t)){if(r=null,o(t)){const e=this._findOption(t);if(e){if(e.required){const t=n.shift();void 0===t&&this.optionMissingArgument(e),this.emit(`option:${e.name()}`,t)}else if(e.optional){let t=null;n.length>0&&!o(n[0])&&(t=n.shift()),this.emit(`option:${e.name()}`,t)}else this.emit(`option:${e.name()}`);r=e.variadic?e:null;continue}}if(t.length>2&&"-"===t[0]&&"-"!==t[1]){const e=this._findOption(`-${t[1]}`);if(e){e.required||e.optional&&this._combineFlagAndOptionalValue?this.emit(`option:${e.name()}`,t.slice(2)):(this.emit(`option:${e.name()}`),n.unshift(`-${t.slice(2)}`));continue}}if(/^--[^=]+=/.test(t)){const e=t.indexOf("="),s=this._findOption(t.slice(0,e));if(s&&(s.required||s.optional)){this.emit(`option:${s.name()}`,t.slice(e+1));continue}}if(o(t)&&(i=s),(this._enablePositionalOptions||this._passThroughOptions)&&0===e.length&&0===s.length){if(this._findCommand(t)){e.push(t),n.length>0&&s.push(...n);break}if(t===this._helpCommandName&&this._hasImplicitHelpCommand()){e.push(t),n.length>0&&e.push(...n);break}if(this._defaultCommandName){s.push(t),n.length>0&&s.push(...n);break}}if(this._passThroughOptions){i.push(t),n.length>0&&i.push(...n);break}i.push(t)}else this.emit(`option:${r.name()}`,t)}return{operands:e,unknown:s}}opts(){if(this._storeOptionsAsProperties){const t={},e=this.options.length;for(let s=0;s<e;s++){const e=this.options[s].attributeName();t[e]=e===this._versionOptionName?this._version:this[e]}return t}return this._optionValues}_displayError(t,e,s){this._outputConfiguration.outputError(`${s}\n`,this._outputConfiguration.writeErr),this._exit(t,e,s)}missingArgument(t){const e=`error: missing required argument '${t}'`;this._displayError(1,"commander.missingArgument",e)}optionMissingArgument(t){const e=`error: option '${t.flags}' argument missing`;this._displayError(1,"commander.optionMissingArgument",e)}missingMandatoryOptionValue(t){const e=`error: required option '${t.flags}' not specified`;this._displayError(1,"commander.missingMandatoryOptionValue",e)}unknownOption(t){if(this._allowUnknownOption)return;const e=`error: unknown option '${t}'`;this._displayError(1,"commander.unknownOption",e)}_excessArguments(t){if(this._allowExcessArguments)return;const e=this._args.length,s=1===e?"":"s",i=`error: too many arguments${this.parent?` for '${this.name()}'`:""}. Expected ${e} argument${s} but got ${t.length}.`;this._displayError(1,"commander.excessArguments",i)}unknownCommand(){const t=[this.name()];for(let e=this.parent;e;e=e.parent)t.unshift(e.name());const e=t.join(" "),s=`error: unknown command '${this.args[0]}'.`+(this._hasHelpOption?` See '${e} ${this._helpLongFlag}'.`:"");this._displayError(1,"commander.unknownCommand",s)}version(t,e,s){if(void 0===t)return this._version;this._version=t,e=e||"-V, --version",s=s||"output the version number";const i=this.createOption(e,s);return this._versionOptionName=i.attributeName(),this.options.push(i),this.on("option:"+i.name(),(()=>{this._outputConfiguration.writeOut(`${t}\n`),this._exit(0,"commander.version",t)})),this}description(t,e){return void 0===t&&void 0===e?this._description:(this._description=t,this._argsDescription=e,this)}alias(t){if(void 0===t)return this._aliases[0];let e=this;if(0!==this.commands.length&&this.commands[this.commands.length-1]._executableHandler&&(e=this.commands[this.commands.length-1]),t===e._name)throw new Error("Command alias can't be the same as its name");return e._aliases.push(t),this}aliases(t){return void 0===t?this._aliases:(t.forEach((t=>this.alias(t))),this)}usage(t){if(void 0===t){if(this._usage)return this._usage;const t=this._args.map((t=>u(t)));return[].concat(this.options.length||this._hasHelpOption?"[options]":[],this.commands.length?"[command]":[],this._args.length?t:[]).join(" ")}return this._usage=t,this}name(t){return void 0===t?this._name:(this._name=t,this)}helpInformation(t){const e=this.createHelp();return void 0===e.helpWidth&&(e.helpWidth=t&&t.error?this._outputConfiguration.getErrHelpWidth():this._outputConfiguration.getOutHelpWidth()),e.formatHelp(this,e)}_getHelpContext(t){const e={error:!!(t=t||{}).error};let s;return s=e.error?t=>this._outputConfiguration.writeErr(t):t=>this._outputConfiguration.writeOut(t),e.write=t.write||s,e.command=this,e}outputHelp(t){let e;"function"==typeof t&&(e=t,t=void 0);const s=this._getHelpContext(t),i=[];let n=this;for(;n;)i.push(n),n=n.parent;i.slice().reverse().forEach((t=>t.emit("beforeAllHelp",s))),this.emit("beforeHelp",s);let o=this.helpInformation(s);if(e&&(o=e(o),"string"!=typeof o&&!Buffer.isBuffer(o)))throw new Error("outputHelp callback must return a string or a Buffer");s.write(o),this.emit(this._helpLongFlag),this.emit("afterHelp",s),i.forEach((t=>t.emit("afterAllHelp",s)))}helpOption(t,e){if("boolean"==typeof t)return this._hasHelpOption=t,this;this._helpFlags=t||this._helpFlags,this._helpDescription=e||this._helpDescription;const s=d(this._helpFlags);return this._helpShortFlag=s.shortFlag,this._helpLongFlag=s.longFlag,this}help(t){this.outputHelp(t);let e=process.exitCode||0;0===e&&t&&"function"!=typeof t&&t.error&&(e=1),this._exit(e,"commander.help","(outputHelp)")}addHelpText(t,e){const s=["beforeAll","before","after","afterAll"];if(!s.includes(t))throw new Error(`Unexpected value for position to addHelpText.\nExpecting one of '${s.join("', '")}'`);const i=`${t}Help`;return this.on(i,(t=>{let s;s="function"==typeof e?e({error:t.error,command:t.command}):e,s&&t.write(`${s}\n`)})),this}}function m(t,e){t._hasHelpOption&&e.find((e=>e===t._helpLongFlag||e===t._helpShortFlag))&&(t.outputHelp(),t._exit(0,"commander.helpDisplayed","(outputHelp)"))}function u(t){const e=t.name+(!0===t.variadic?"...":"");return t.required?"<"+e+">":"["+e+"]"}function d(t){let e,s;const i=t.split(/[ |,]+/);return i.length>1&&!/^[[<]/.test(i[1])&&(e=i.shift()),s=i.shift(),!e&&/^-[^-]$/.test(s)&&(e=s,s=void 0),{shortFlag:e,longFlag:s}}function _(t){return t.map((t=>{if(!t.startsWith("--inspect"))return t;let e,s,i="127.0.0.1",n="9229";return null!==(s=t.match(/^(--inspect(-brk)?)$/))?e=s[1]:null!==(s=t.match(/^(--inspect(-brk|-port)?)=([^:]+)$/))?(e=s[1],/^\d+$/.test(s[3])?n=s[3]:i=s[3]):null!==(s=t.match(/^(--inspect(-brk|-port)?)=([^:]+):(\d+)$/))&&(e=s[1],i=s[3],n=s[4]),e&&"0"!==n?`${e}=${i}:${parseInt(n)+1}`:t}))}(e=t.exports=new c).program=e,e.Command=c,e.Option=h,e.CommanderError=l,e.InvalidOptionArgumentError=p,e.Help=a},832:(t,e,s)=>{"use strict";const i=s(747),n=s(783),o=s(179),r=s(622);n.program.version("00.01.00").description("Convert an Elf file to an RPRC file.").option("-e, --bigEndian","Generate Big Endian File",!1).option("-o, --out <value>","The path for the output file").arguments("<elfFile>").action((t=>{i.existsSync(t)||(console.error(`Elf File ${t} does not exist`),process.exit(1));const e=n.program.opts();e.out||(e.out=r.parse(t).name+".rprc"),o.elf2rprc_sections(t,e.out,e.bigEndian)})),n.program.parse()},179:(t,e,s)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.elf2rprc_sections=void 0;const i=s(747),n=s(297);function o(t,e,s,i=!1){i?t.writeUInt32BE(e,s):t.writeUInt32LE(e,s)}e.elf2rprc_sections=function(t,e,s=!1){const r=i.openSync(t,"r"),a=n.readElfFileHeader(r);if("ELF"!==a.e_ident_magic)return 1;let h=n.readElfSectionHeader(r,a);h=h.filter((t=>!(8&t.sh_type))),h=h.filter((t=>2&t.sh_flags)),h=h.sort(((t,e)=>t.sh_addr<e.sh_addr?-1:t.sh_addr==e.sh_addr?0:1));let l=0;const p=i.openSync(e,"w"),c=Buffer.alloc(20);c.write("RPRC"),o(c,a.e_entry,4,s),o(c,0,8,s),o(c,h.length,12,s),o(c,1,16,s),i.writeSync(p,c,0,20,l),l+=20;for(const t of h){const e=Buffer.alloc(20);o(e,t.sh_addr,0,s),o(e,0,4,s),o(e,t.sh_size,8,s),o(e,0,12,s),o(e,0,16,s),i.writeSync(p,e,0,20,l),l+=20;const n=Buffer.alloc(t.sh_size);i.readSync(r,n,0,t.sh_size,t.sh_offset),i.writeSync(p,n,0,t.sh_size,l),l+=t.sh_size}return i.closeSync(r),i.closeSync(p),0}},297:(t,e,s)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isElfFile=e.readElfSectionHeader=e.readElfProgramHeader=e.readElfFileHeader=void 0;const i=s(747);function n(t,e,s,i){if(i<8)return 1==t?e.readUIntLE(s,i):e.readUIntBE(s,i);{const i=1==t?e.readBigUInt64LE(s):e.readBigUInt64BE(s);if(i>BigInt(Number.MAX_SAFE_INTEGER))throw"elf reader cannot handle 8 byte fields with > 53 bits";return Number(i)}}function o(t,e,s,n){const o=s[n.e_shstrndx].sh_offset+e,r=Buffer.alloc(32);i.readSync(t,r,0,32,o);const a=r.indexOf(0);return r.toString("utf8",0,a)}e.readElfFileHeader=function(t){const e=Buffer.alloc(64);i.readSync(t,e,0,64,0);const s=e.readUInt8(5),o=4*e.readUInt8(4);return{e_ident_magic:e.toString("utf8",0,4),e_ident_class:e.readUInt8(4),e_ident_data:e.readUInt8(5),e_ident_version:e.readUInt8(6),e_ident_osabi:e.readUInt8(7),e_ident_abiversion:e.readUInt8(8),e_type:n(s,e,16,2),e_machine:n(s,e,18,2),e_version:n(s,e,20,4),e_entry:n(s,e,24,o),e_phoff:n(s,e,24+o,o),e_shoff:n(s,e,24+2*o,o),e_flags:n(s,e,24+3*o,4),e_ehsize:n(s,e,28+3*o,2),e_phentsize:n(s,e,30+3*o,2),e_phnum:n(s,e,32+3*o,2),e_shentsize:n(s,e,34+3*o,2),e_shnum:n(s,e,36+3*o,2),e_shstrndx:n(s,e,38+3*o,2)}},e.readElfProgramHeader=function(t,e){const s=Number(e.e_ident_data),o=Number(e.e_phnum*e.e_phentsize),r=Buffer.alloc(o);let a;const h=[];i.readSync(t,r,0,o,e.e_phoff);for(let t=0;t<e.e_phnum;t+=1){const i=t*Number(e.e_phentsize);a=32==e.e_phentsize?{p_type:n(s,r,i+0,4),p_offset:n(s,r,i+4,4),p_vaddr:n(s,r,i+8,4),p_paddr:n(s,r,i+12,4),p_filesz:n(s,r,i+16,4),p_memsz:n(s,r,i+20,4),p_flags:n(s,r,i+24,4),p_align:n(s,r,i+28,4)}:{p_type:n(s,r,i+0,4),p_flags:n(s,r,i+4,4),p_offset:n(s,r,i+8,8),p_vaddr:n(s,r,i+16,8),p_paddr:n(s,r,i+24,8),p_filesz:n(s,r,i+32,8),p_memsz:n(s,r,i+40,8),p_align:n(s,r,i+48,8)},h.push(a)}return h},e.readElfSectionHeader=function(t,e){const s=Number(e.e_ident_data),r=Number(e.e_shnum*e.e_shentsize),a=Buffer.alloc(r);let h;const l=[];i.readSync(t,a,0,r,e.e_shoff);for(let t=0;t<e.e_shnum;t+=1){const i=t*e.e_shentsize;h=40==e.e_shentsize?{name:"",sh_name:n(s,a,i+0,4),sh_type:n(s,a,i+4,4),sh_flags:n(s,a,i+8,4),sh_addr:n(s,a,i+12,4),sh_offset:n(s,a,i+16,4),sh_size:n(s,a,i+20,4),sh_link:n(s,a,i+24,4),sh_info:n(s,a,i+28,4),sh_addralign:n(s,a,i+32,4),sh_entsize:n(s,a,i+36,4)}:{name:"",sh_name:n(s,a,i+0,4),sh_type:n(s,a,i+4,4),sh_flags:n(s,a,i+8,8),sh_addr:n(s,a,i+16,8),sh_offset:n(s,a,i+24,8),sh_size:n(s,a,i+32,8),sh_link:n(s,a,i+40,4),sh_info:n(s,a,i+44,4),sh_addralign:n(s,a,i+48,8),sh_entsize:n(s,a,i+56,8)},l.push(h)}for(let s=0;s<e.e_shnum;s+=1)l[s].name=o(t,l[s].sh_name,l,e);return l},e.isElfFile=function(t){const e=Buffer.alloc(4),s=i.openSync(t,"r");return i.readSync(s,e,0,4,0),i.closeSync(s),"ELF"==e.toString()}},129:t=>{"use strict";t.exports=require("child_process")},614:t=>{"use strict";t.exports=require("events")},747:t=>{"use strict";t.exports=require("fs")},622:t=>{"use strict";t.exports=require("path")}},e={};function s(i){var n=e[i];if(void 0!==n)return n.exports;var o=e[i]={exports:{}};return t[i](o,o.exports,s),o.exports}s.c=e,s(s.s=832)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9JbWFnZUdlbmVyYXRpb25Ub29scy8uL25vZGVfbW9kdWxlcy9jb21tYW5kZXIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vSW1hZ2VHZW5lcmF0aW9uVG9vbHMvLi9lbGYycnByYy50cyIsIndlYnBhY2s6Ly9JbWFnZUdlbmVyYXRpb25Ub29scy8uL2VsZjJycHJjX3NlY3Rpb25zLnRzIiwid2VicGFjazovL0ltYWdlR2VuZXJhdGlvblRvb2xzLy4vZWxmX3JlYWRlci50cyIsIndlYnBhY2s6Ly9JbWFnZUdlbmVyYXRpb25Ub29scy9leHRlcm5hbCBcImNoaWxkX3Byb2Nlc3NcIiIsIndlYnBhY2s6Ly9JbWFnZUdlbmVyYXRpb25Ub29scy9leHRlcm5hbCBcImV2ZW50c1wiIiwid2VicGFjazovL0ltYWdlR2VuZXJhdGlvblRvb2xzL2V4dGVybmFsIFwiZnNcIiIsIndlYnBhY2s6Ly9JbWFnZUdlbmVyYXRpb25Ub29scy9leHRlcm5hbCBcInBhdGhcIiIsIndlYnBhY2s6Ly9JbWFnZUdlbmVyYXRpb25Ub29scy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9JbWFnZUdlbmVyYXRpb25Ub29scy93ZWJwYWNrL3N0YXJ0dXAiXSwibmFtZXMiOlsiRXZlbnRFbWl0dGVyIiwiY2hpbGRQcm9jZXNzIiwicGF0aCIsImZzIiwiSGVscCIsInRoaXMiLCJoZWxwV2lkdGgiLCJ1bmRlZmluZWQiLCJzb3J0U3ViY29tbWFuZHMiLCJzb3J0T3B0aW9ucyIsImNtZCIsInZpc2libGVDb21tYW5kcyIsImNvbW1hbmRzIiwiZmlsdGVyIiwiX2hpZGRlbiIsIl9oYXNJbXBsaWNpdEhlbHBDb21tYW5kIiwiYXJncyIsIl9oZWxwQ29tbWFuZG5hbWVBbmRBcmdzIiwic3BsaXQiLCJoZWxwQ29tbWFuZCIsImNyZWF0ZUNvbW1hbmQiLCJzaGlmdCIsImhlbHBPcHRpb24iLCJkZXNjcmlwdGlvbiIsIl9oZWxwQ29tbWFuZERlc2NyaXB0aW9uIiwiX3BhcnNlRXhwZWN0ZWRBcmdzIiwicHVzaCIsInNvcnQiLCJhIiwiYiIsIm5hbWUiLCJsb2NhbGVDb21wYXJlIiwidmlzaWJsZU9wdGlvbnMiLCJvcHRpb25zIiwib3B0aW9uIiwiaGlkZGVuIiwic2hvd1Nob3J0SGVscEZsYWciLCJfaGFzSGVscE9wdGlvbiIsIl9oZWxwU2hvcnRGbGFnIiwiX2ZpbmRPcHRpb24iLCJzaG93TG9uZ0hlbHBGbGFnIiwiX2hlbHBMb25nRmxhZyIsImNyZWF0ZU9wdGlvbiIsIl9oZWxwRmxhZ3MiLCJfaGVscERlc2NyaXB0aW9uIiwiZ2V0U29ydEtleSIsInNob3J0IiwicmVwbGFjZSIsImxvbmciLCJfYXJnc0Rlc2NyaXB0aW9uIiwiX2FyZ3MiLCJsZW5ndGgiLCJtYXAiLCJhcmd1bWVudCIsInRlcm0iLCJhcmciLCJodW1hblJlYWRhYmxlQXJnTmFtZSIsImpvaW4iLCJfbmFtZSIsIl9hbGlhc2VzIiwiZmxhZ3MiLCJoZWxwZXIiLCJyZWR1Y2UiLCJtYXgiLCJjb21tYW5kIiwiTWF0aCIsInN1YmNvbW1hbmRUZXJtIiwib3B0aW9uVGVybSIsInZpc2libGVBcmd1bWVudHMiLCJjbWROYW1lIiwicGFyZW50Q21kTmFtZXMiLCJwYXJlbnRDbWQiLCJwYXJlbnQiLCJ1c2FnZSIsIm5lZ2F0ZSIsImV4dHJhSW5mbyIsImFyZ0Nob2ljZXMiLCJjaG9pY2UiLCJKU09OIiwic3RyaW5naWZ5IiwiZGVmYXVsdFZhbHVlIiwiZGVmYXVsdFZhbHVlRGVzY3JpcHRpb24iLCJ0ZXJtV2lkdGgiLCJwYWRXaWR0aCIsImZvcm1hdEl0ZW0iLCJmdWxsVGV4dCIsInBhZEVuZCIsIndyYXAiLCJmb3JtYXRMaXN0IiwidGV4dEFycmF5IiwicmVwZWF0Iiwib3V0cHV0IiwiY29tbWFuZFVzYWdlIiwiY29tbWFuZERlc2NyaXB0aW9uIiwiY29uY2F0IiwiYXJndW1lbnRMaXN0Iiwib3B0aW9uTGlzdCIsIm9wdGlvbkRlc2NyaXB0aW9uIiwiY29tbWFuZExpc3QiLCJzdWJjb21tYW5kRGVzY3JpcHRpb24iLCJsb25nZXN0T3B0aW9uVGVybUxlbmd0aCIsImxvbmdlc3RTdWJjb21tYW5kVGVybUxlbmd0aCIsImxvbmdlc3RBcmd1bWVudFRlcm1MZW5ndGgiLCJzdHIiLCJ3aWR0aCIsImluZGVudCIsIm1pbkNvbHVtbldpZHRoIiwibWF0Y2giLCJjb2x1bW5XaWR0aCIsImxlYWRpbmdTdHIiLCJzdWJzdHIiLCJjb2x1bW5UZXh0IiwiaW5kZW50U3RyaW5nIiwicmVnZXgiLCJSZWdFeHAiLCJsaW5lIiwiaSIsInNsaWNlIiwidHJpbVJpZ2h0IiwiT3B0aW9uIiwicmVxdWlyZWQiLCJpbmNsdWRlcyIsIm9wdGlvbmFsIiwidmFyaWFkaWMiLCJ0ZXN0IiwibWFuZGF0b3J5Iiwib3B0aW9uRmxhZ3MiLCJfcGFyc2VPcHRpb25GbGFncyIsInNob3J0RmxhZyIsImxvbmdGbGFnIiwic3RhcnRzV2l0aCIsInBhcnNlQXJnIiwidmFsdWUiLCJmbiIsImhpZGUiLCJwcmV2aW91cyIsIkFycmF5IiwiaXNBcnJheSIsInZhbHVlcyIsIkludmFsaWRPcHRpb25Bcmd1bWVudEVycm9yIiwiX2NvbmNhdFZhbHVlIiwid29yZCIsInRvVXBwZXJDYXNlIiwiQ29tbWFuZGVyRXJyb3IiLCJFcnJvciIsImV4aXRDb2RlIiwiY29kZSIsIm1lc3NhZ2UiLCJzdXBlciIsImNhcHR1cmVTdGFja1RyYWNlIiwiY29uc3RydWN0b3IiLCJuZXN0ZWRFcnJvciIsIkNvbW1hbmQiLCJfYWxsb3dVbmtub3duT3B0aW9uIiwiX2FsbG93RXhjZXNzQXJndW1lbnRzIiwicmF3QXJncyIsIl9zY3JpcHRQYXRoIiwiX29wdGlvblZhbHVlcyIsIl9zdG9yZU9wdGlvbnNBc1Byb3BlcnRpZXMiLCJfYWN0aW9uUmVzdWx0cyIsIl9hY3Rpb25IYW5kbGVyIiwiX2V4ZWN1dGFibGVIYW5kbGVyIiwiX2V4ZWN1dGFibGVGaWxlIiwiX2RlZmF1bHRDb21tYW5kTmFtZSIsIl9leGl0Q2FsbGJhY2siLCJfY29tYmluZUZsYWdBbmRPcHRpb25hbFZhbHVlIiwiX2Rlc2NyaXB0aW9uIiwiX2VuYWJsZVBvc2l0aW9uYWxPcHRpb25zIiwiX3Bhc3NUaHJvdWdoT3B0aW9ucyIsIl9vdXRwdXRDb25maWd1cmF0aW9uIiwid3JpdGVPdXQiLCJwcm9jZXNzIiwic3Rkb3V0Iiwid3JpdGUiLCJ3cml0ZUVyciIsInN0ZGVyciIsImdldE91dEhlbHBXaWR0aCIsImlzVFRZIiwiY29sdW1ucyIsImdldEVyckhlbHBXaWR0aCIsIm91dHB1dEVycm9yIiwiX2FkZEltcGxpY2l0SGVscENvbW1hbmQiLCJfaGVscENvbW1hbmROYW1lIiwiX2hlbHBDb25maWd1cmF0aW9uIiwibmFtZUFuZEFyZ3MiLCJhY3Rpb25PcHRzT3JFeGVjRGVzYyIsImV4ZWNPcHRzIiwiZGVzYyIsIm9wdHMiLCJpc0RlZmF1bHQiLCJub0hlbHAiLCJleGVjdXRhYmxlRmlsZSIsIk9iamVjdCIsImFzc2lnbiIsImNvbmZpZ3VyZUhlbHAiLCJjb25maWd1cmF0aW9uIiwiY2hlY2tFeHBsaWNpdE5hbWVzIiwiY29tbWFuZEFycmF5IiwiZm9yRWFjaCIsImVuYWJsZU9yTmFtZUFuZEFyZ3MiLCJfZmluZENvbW1hbmQiLCJhcmdEZXRhaWxzIiwiZXJyIiwiZXhpdCIsImV4cGVjdGVkQXJnc0NvdW50IiwiYWN0aW9uQXJncyIsImFjdGlvblJlc3VsdCIsImFwcGx5Iiwicm9vdENvbW1hbmQiLCJvbmFtZSIsImF0dHJpYnV0ZU5hbWUiLCJwb3NpdGl2ZUxvbmdGbGFnIiwiX2dldE9wdGlvblZhbHVlIiwiX3NldE9wdGlvblZhbHVlIiwib24iLCJ2YWwiLCJvbGRWYWx1ZSIsIl9kaXNwbGF5RXJyb3IiLCJjb25maWciLCJtYWtlT3B0aW9uTWFuZGF0b3J5IiwiZGVmYXVsdCIsImFyZ1BhcnNlciIsImRlZiIsIm0iLCJleGVjIiwiYWRkT3B0aW9uIiwiX29wdGlvbkV4IiwiY29tYmluZSIsImFsbG93VW5rbm93biIsImFsbG93RXhjZXNzIiwicG9zaXRpb25hbCIsInBhc3NUaHJvdWdoIiwic3RvcmVBc1Byb3BlcnRpZXMiLCJrZXkiLCJhcmd2IiwicGFyc2VPcHRpb25zIiwidXNlckFyZ3MiLCJ2ZXJzaW9ucyIsImVsZWN0cm9uIiwiZnJvbSIsImRlZmF1bHRBcHAiLCJmaWxlbmFtZSIsImJhc2VuYW1lIiwiZXh0bmFtZSIsIl9wYXJzZUNvbW1hbmQiLCJwYXJzZSIsIlByb21pc2UiLCJhbGwiLCJ0aGVuIiwic3ViY29tbWFuZCIsImxhdW5jaFdpdGhOb2RlIiwic291cmNlRXh0IiwiX2NoZWNrRm9yTWlzc2luZ01hbmRhdG9yeU9wdGlvbnMiLCJiYXNlRGlyIiwic2NyaXB0UGF0aCIsInJlc29sdmVkTGluayIsInJlYWxwYXRoU3luYyIsImRpcm5hbWUiLCJlIiwiYmluIiwibG9jYWxCaW4iLCJwcm9jIiwiZXhpc3RzU3luYyIsImV4dCIsInBsYXRmb3JtIiwidW5zaGlmdCIsImluY3JlbWVudE5vZGVJbnNwZWN0b3JQb3J0IiwiZXhlY0FyZ3YiLCJzcGF3biIsInN0ZGlvIiwiZXhlY1BhdGgiLCJzaWduYWwiLCJraWxsZWQiLCJraWxsIiwiZXhpdENhbGxiYWNrIiwiYmluZCIsImV4ZWN1dGFibGVNaXNzaW5nIiwid3JhcHBlZEVycm9yIiwicnVubmluZ0NvbW1hbmQiLCJjb21tYW5kTmFtZSIsIm9wZXJhbmRzIiwidW5rbm93biIsInN1YkNvbW1hbmQiLCJoZWxwIiwiZXJyb3IiLCJfZXhlY3V0ZVN1YkNvbW1hbmQiLCJwYXJzZWQiLCJfZGlzcGF0Y2hTdWJjb21tYW5kIiwib3V0cHV0SGVscElmUmVxdWVzdGVkIiwiY2hlY2tGb3JVbmtub3duT3B0aW9ucyIsInVua25vd25PcHRpb24iLCJjb21tYW5kRXZlbnQiLCJtaXNzaW5nQXJndW1lbnQiLCJzcGxpY2UiLCJtaW4iLCJfZXhjZXNzQXJndW1lbnRzIiwiZW1pdCIsImxpc3RlbmVyQ291bnQiLCJ1bmtub3duQ29tbWFuZCIsImZpbmQiLCJpcyIsImFuT3B0aW9uIiwibWlzc2luZ01hbmRhdG9yeU9wdGlvblZhbHVlIiwiZGVzdCIsIm1heWJlT3B0aW9uIiwiYWN0aXZlVmFyaWFkaWNPcHRpb24iLCJvcHRpb25NaXNzaW5nQXJndW1lbnQiLCJpbmRleCIsImluZGV4T2YiLCJyZXN1bHQiLCJsZW4iLCJfdmVyc2lvbk9wdGlvbk5hbWUiLCJfdmVyc2lvbiIsIl9leGl0IiwiZmxhZyIsInJlY2VpdmVkQXJncyIsImV4cGVjdGVkIiwicyIsInBhcnRDb21tYW5kcyIsImZ1bGxDb21tYW5kIiwidmVyc2lvbk9wdGlvbiIsImFyZ3NEZXNjcmlwdGlvbiIsImFsaWFzIiwiYWxpYXNlcyIsIl91c2FnZSIsImNvbnRleHRPcHRpb25zIiwiY3JlYXRlSGVscCIsImZvcm1hdEhlbHAiLCJjb250ZXh0IiwiZGVwcmVjYXRlZENhbGxiYWNrIiwiX2dldEhlbHBDb250ZXh0IiwiZ3JvdXBMaXN0ZW5lcnMiLCJyZXZlcnNlIiwiaGVscEluZm9ybWF0aW9uIiwiQnVmZmVyIiwiaXNCdWZmZXIiLCJoZWxwRmxhZ3MiLCJvdXRwdXRIZWxwIiwicG9zaXRpb24iLCJ0ZXh0IiwiYWxsb3dlZFZhbHVlcyIsImhlbHBFdmVudCIsImhlbHBTdHIiLCJuYW1lT3V0cHV0IiwiZmxhZ1BhcnRzIiwiZGVidWdPcHRpb24iLCJkZWJ1Z0hvc3QiLCJkZWJ1Z1BvcnQiLCJwYXJzZUludCIsImV4cG9ydHMiLCJtb2R1bGUiLCJwcm9ncmFtIiwidmVyc2lvbiIsImFyZ3VtZW50cyIsImFjdGlvbiIsImVsZkZpbGUiLCJjb25zb2xlIiwib3V0IiwiZWxmMnJwcmNfc2VjdGlvbnMiLCJiaWdFbmRpYW4iLCJ3cml0ZTRieXRlIiwiYnVmIiwib2Zmc2V0IiwiYmlnX2VuZGlhbiIsIndyaXRlVUludDMyQkUiLCJ3cml0ZVVJbnQzMkxFIiwicnByY0ZpbGUiLCJmRUxGIiwib3BlblN5bmMiLCJmaEVMRiIsInJlYWRFbGZGaWxlSGVhZGVyIiwiZV9pZGVudF9tYWdpYyIsInNoRUxGIiwicmVhZEVsZlNlY3Rpb25IZWFkZXIiLCJzaF90eXBlIiwic2hfZmxhZ3MiLCJzMSIsInMyIiwic2hfYWRkciIsImZpbGVQb3NSUFJDIiwiZlJQUkMiLCJmaWxlSGRyIiwiYWxsb2MiLCJlX2VudHJ5Iiwid3JpdGVTeW5jIiwic2VjdCIsInNlY3RIZHIiLCJzaF9zaXplIiwiYnVmZmVyIiwicmVhZFN5bmMiLCJzaF9vZmZzZXQiLCJjbG9zZVN5bmMiLCJleHRyYWN0IiwiZW5kaWFuIiwic2l6ZSIsInJlYWRVSW50TEUiLCJyZWFkVUludEJFIiwicmVhZEJpZ1VJbnQ2NExFIiwicmVhZEJpZ1VJbnQ2NEJFIiwiQmlnSW50IiwiTnVtYmVyIiwiTUFYX1NBRkVfSU5URUdFUiIsInNlY3Rpb25OYW1lIiwiZmQiLCJuYW1lT2Zmc2V0Iiwic2VjdGlvbnMiLCJmaCIsIm5hbWVMb2MiLCJlX3Noc3RybmR4IiwibnVsbFBvcyIsInRvU3RyaW5nIiwicmVhZFVJbnQ4IiwiYWRkclNpemUiLCJlX2lkZW50X2NsYXNzIiwiZV9pZGVudF9kYXRhIiwiZV9pZGVudF92ZXJzaW9uIiwiZV9pZGVudF9vc2FiaSIsImVfaWRlbnRfYWJpdmVyc2lvbiIsImVfdHlwZSIsImVfbWFjaGluZSIsImVfdmVyc2lvbiIsImVfcGhvZmYiLCJlX3Nob2ZmIiwiZV9mbGFncyIsImVfZWhzaXplIiwiZV9waGVudHNpemUiLCJlX3BobnVtIiwiZV9zaGVudHNpemUiLCJlX3NobnVtIiwicGhTaXplIiwicGhFbnQiLCJwaCIsImlkeCIsInBfdHlwZSIsInBfb2Zmc2V0IiwicF92YWRkciIsInBfcGFkZHIiLCJwX2ZpbGVzeiIsInBfbWVtc3oiLCJwX2ZsYWdzIiwicF9hbGlnbiIsInNoU2l6ZSIsInNoRW50Iiwic2giLCJzaF9uYW1lIiwic2hfbGluayIsInNoX2luZm8iLCJzaF9hZGRyYWxpZ24iLCJzaF9lbnRzaXplIiwicmVxdWlyZSIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJjIl0sIm1hcHBpbmdzIjoiMkJBSUEsTUFBTUEsRUFBZSxv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LEVBQTJCLEdBRy9CLFNBQVNDLEVBQW9CQyxHQUU1QixJQUFJQyxFQUFlSCxFQUF5QkUsR0FDNUMsUUFBcUI3YixJQUFqQjhiLEVBQ0gsT0FBT0EsRUFBYXhHLFFBR3JCLElBQUlDLEVBQVNvRyxFQUF5QkUsR0FBWSxDQUdqRHZHLFFBQVMsSUFPVixPQUhBeUcsRUFBb0JGLEdBQVV0RyxFQUFRQSxFQUFPRCxRQUFTc0csR0FHL0NyRyxFQUFPRCxRQUlmc0csRUFBb0JJLEVBQUlMLEVDdEJFQyxFQUFvQkEsRUFBb0J0SSxFQUFJLE0iLCJmaWxlIjoiZWxmMnJwcmMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxuY29uc3QgRXZlbnRFbWl0dGVyID0gcmVxdWlyZSgnZXZlbnRzJykuRXZlbnRFbWl0dGVyO1xuY29uc3QgY2hpbGRQcm9jZXNzID0gcmVxdWlyZSgnY2hpbGRfcHJvY2VzcycpO1xuY29uc3QgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKTtcbmNvbnN0IGZzID0gcmVxdWlyZSgnZnMnKTtcblxuLy8gQHRzLWNoZWNrXG5cbi8vIEFsdGhvdWdoIHRoaXMgaXMgYSBjbGFzcywgbWV0aG9kcyBhcmUgc3RhdGljIGluIHN0eWxlIHRvIGFsbG93IG92ZXJyaWRlIHVzaW5nIHN1YmNsYXNzIG9yIGp1c3QgZnVuY3Rpb25zLlxuY2xhc3MgSGVscCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuaGVscFdpZHRoID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuc29ydFN1YmNvbW1hbmRzID0gZmFsc2U7XG4gICAgdGhpcy5zb3J0T3B0aW9ucyA9IGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhbiBhcnJheSBvZiB0aGUgdmlzaWJsZSBzdWJjb21tYW5kcy4gSW5jbHVkZXMgYSBwbGFjZWhvbGRlciBmb3IgdGhlIGltcGxpY2l0IGhlbHAgY29tbWFuZCwgaWYgdGhlcmUgaXMgb25lLlxuICAgKlxuICAgKiBAcGFyYW0ge0NvbW1hbmR9IGNtZFxuICAgKiBAcmV0dXJucyB7Q29tbWFuZFtdfVxuICAgKi9cblxuICB2aXNpYmxlQ29tbWFuZHMoY21kKSB7XG4gICAgY29uc3QgdmlzaWJsZUNvbW1hbmRzID0gY21kLmNvbW1hbmRzLmZpbHRlcihjbWQgPT4gIWNtZC5faGlkZGVuKTtcbiAgICBpZiAoY21kLl9oYXNJbXBsaWNpdEhlbHBDb21tYW5kKCkpIHtcbiAgICAgIC8vIENyZWF0ZSBhIGNvbW1hbmQgbWF0Y2hpbmcgdGhlIGltcGxpY2l0IGhlbHAgY29tbWFuZC5cbiAgICAgIGNvbnN0IGFyZ3MgPSBjbWQuX2hlbHBDb21tYW5kbmFtZUFuZEFyZ3Muc3BsaXQoLyArLyk7XG4gICAgICBjb25zdCBoZWxwQ29tbWFuZCA9IGNtZC5jcmVhdGVDb21tYW5kKGFyZ3Muc2hpZnQoKSlcbiAgICAgICAgLmhlbHBPcHRpb24oZmFsc2UpO1xuICAgICAgaGVscENvbW1hbmQuZGVzY3JpcHRpb24oY21kLl9oZWxwQ29tbWFuZERlc2NyaXB0aW9uKTtcbiAgICAgIGhlbHBDb21tYW5kLl9wYXJzZUV4cGVjdGVkQXJncyhhcmdzKTtcbiAgICAgIHZpc2libGVDb21tYW5kcy5wdXNoKGhlbHBDb21tYW5kKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuc29ydFN1YmNvbW1hbmRzKSB7XG4gICAgICB2aXNpYmxlQ29tbWFuZHMuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICByZXR1cm4gYS5uYW1lKCkubG9jYWxlQ29tcGFyZShiLm5hbWUoKSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHZpc2libGVDb21tYW5kcztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYW4gYXJyYXkgb2YgdGhlIHZpc2libGUgb3B0aW9ucy4gSW5jbHVkZXMgYSBwbGFjZWhvbGRlciBmb3IgdGhlIGltcGxpY2l0IGhlbHAgb3B0aW9uLCBpZiB0aGVyZSBpcyBvbmUuXG4gICAqXG4gICAqIEBwYXJhbSB7Q29tbWFuZH0gY21kXG4gICAqIEByZXR1cm5zIHtPcHRpb25bXX1cbiAgICovXG5cbiAgdmlzaWJsZU9wdGlvbnMoY21kKSB7XG4gICAgY29uc3QgdmlzaWJsZU9wdGlvbnMgPSBjbWQub3B0aW9ucy5maWx0ZXIoKG9wdGlvbikgPT4gIW9wdGlvbi5oaWRkZW4pO1xuICAgIC8vIEltcGxpY2l0IGhlbHBcbiAgICBjb25zdCBzaG93U2hvcnRIZWxwRmxhZyA9IGNtZC5faGFzSGVscE9wdGlvbiAmJiBjbWQuX2hlbHBTaG9ydEZsYWcgJiYgIWNtZC5fZmluZE9wdGlvbihjbWQuX2hlbHBTaG9ydEZsYWcpO1xuICAgIGNvbnN0IHNob3dMb25nSGVscEZsYWcgPSBjbWQuX2hhc0hlbHBPcHRpb24gJiYgIWNtZC5fZmluZE9wdGlvbihjbWQuX2hlbHBMb25nRmxhZyk7XG4gICAgaWYgKHNob3dTaG9ydEhlbHBGbGFnIHx8IHNob3dMb25nSGVscEZsYWcpIHtcbiAgICAgIGxldCBoZWxwT3B0aW9uO1xuICAgICAgaWYgKCFzaG93U2hvcnRIZWxwRmxhZykge1xuICAgICAgICBoZWxwT3B0aW9uID0gY21kLmNyZWF0ZU9wdGlvbihjbWQuX2hlbHBMb25nRmxhZywgY21kLl9oZWxwRGVzY3JpcHRpb24pO1xuICAgICAgfSBlbHNlIGlmICghc2hvd0xvbmdIZWxwRmxhZykge1xuICAgICAgICBoZWxwT3B0aW9uID0gY21kLmNyZWF0ZU9wdGlvbihjbWQuX2hlbHBTaG9ydEZsYWcsIGNtZC5faGVscERlc2NyaXB0aW9uKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGhlbHBPcHRpb24gPSBjbWQuY3JlYXRlT3B0aW9uKGNtZC5faGVscEZsYWdzLCBjbWQuX2hlbHBEZXNjcmlwdGlvbik7XG4gICAgICB9XG4gICAgICB2aXNpYmxlT3B0aW9ucy5wdXNoKGhlbHBPcHRpb24pO1xuICAgIH1cbiAgICBpZiAodGhpcy5zb3J0T3B0aW9ucykge1xuICAgICAgY29uc3QgZ2V0U29ydEtleSA9IChvcHRpb24pID0+IHtcbiAgICAgICAgLy8gV1lTSVdZRyBmb3Igb3JkZXIgZGlzcGxheWVkIGluIGhlbHAgd2l0aCBzaG9ydCBiZWZvcmUgbG9uZywgbm8gc3BlY2lhbCBoYW5kbGluZyBmb3IgbmVnYXRlZC5cbiAgICAgICAgcmV0dXJuIG9wdGlvbi5zaG9ydCA/IG9wdGlvbi5zaG9ydC5yZXBsYWNlKC9eLS8sICcnKSA6IG9wdGlvbi5sb25nLnJlcGxhY2UoL14tLS8sICcnKTtcbiAgICAgIH07XG4gICAgICB2aXNpYmxlT3B0aW9ucy5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgIHJldHVybiBnZXRTb3J0S2V5KGEpLmxvY2FsZUNvbXBhcmUoZ2V0U29ydEtleShiKSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHZpc2libGVPcHRpb25zO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhbiBhcnJheSBvZiB0aGUgYXJndW1lbnRzIHdoaWNoIGhhdmUgZGVzY3JpcHRpb25zLlxuICAgKlxuICAgKiBAcGFyYW0ge0NvbW1hbmR9IGNtZFxuICAgKiBAcmV0dXJucyB7eyB0ZXJtOiBzdHJpbmcsIGRlc2NyaXB0aW9uOnN0cmluZyB9W119XG4gICAqL1xuXG4gIHZpc2libGVBcmd1bWVudHMoY21kKSB7XG4gICAgaWYgKGNtZC5fYXJnc0Rlc2NyaXB0aW9uICYmIGNtZC5fYXJncy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBjbWQuX2FyZ3MubWFwKChhcmd1bWVudCkgPT4ge1xuICAgICAgICByZXR1cm4geyB0ZXJtOiBhcmd1bWVudC5uYW1lLCBkZXNjcmlwdGlvbjogY21kLl9hcmdzRGVzY3JpcHRpb25bYXJndW1lbnQubmFtZV0gfHwgJycgfTtcbiAgICAgIH0sIDApO1xuICAgIH1cbiAgICByZXR1cm4gW107XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBjb21tYW5kIHRlcm0gdG8gc2hvdyBpbiB0aGUgbGlzdCBvZiBzdWJjb21tYW5kcy5cbiAgICpcbiAgICogQHBhcmFtIHtDb21tYW5kfSBjbWRcbiAgICogQHJldHVybnMge3N0cmluZ31cbiAgICovXG5cbiAgc3ViY29tbWFuZFRlcm0oY21kKSB7XG4gICAgLy8gTGVnYWN5LiBJZ25vcmVzIGN1c3RvbSB1c2FnZSBzdHJpbmcsIGFuZCBuZXN0ZWQgY29tbWFuZHMuXG4gICAgY29uc3QgYXJncyA9IGNtZC5fYXJncy5tYXAoYXJnID0+IGh1bWFuUmVhZGFibGVBcmdOYW1lKGFyZykpLmpvaW4oJyAnKTtcbiAgICByZXR1cm4gY21kLl9uYW1lICtcbiAgICAgIChjbWQuX2FsaWFzZXNbMF0gPyAnfCcgKyBjbWQuX2FsaWFzZXNbMF0gOiAnJykgK1xuICAgICAgKGNtZC5vcHRpb25zLmxlbmd0aCA/ICcgW29wdGlvbnNdJyA6ICcnKSArIC8vIHNpbXBsaXN0aWMgY2hlY2sgZm9yIG5vbi1oZWxwIG9wdGlvblxuICAgICAgKGFyZ3MgPyAnICcgKyBhcmdzIDogJycpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgb3B0aW9uIHRlcm0gdG8gc2hvdyBpbiB0aGUgbGlzdCBvZiBvcHRpb25zLlxuICAgKlxuICAgKiBAcGFyYW0ge09wdGlvbn0gb3B0aW9uXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAqL1xuXG4gIG9wdGlvblRlcm0ob3B0aW9uKSB7XG4gICAgcmV0dXJuIG9wdGlvbi5mbGFncztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGxvbmdlc3QgY29tbWFuZCB0ZXJtIGxlbmd0aC5cbiAgICpcbiAgICogQHBhcmFtIHtDb21tYW5kfSBjbWRcbiAgICogQHBhcmFtIHtIZWxwfSBoZWxwZXJcbiAgICogQHJldHVybnMge251bWJlcn1cbiAgICovXG5cbiAgbG9uZ2VzdFN1YmNvbW1hbmRUZXJtTGVuZ3RoKGNtZCwgaGVscGVyKSB7XG4gICAgcmV0dXJuIGhlbHBlci52aXNpYmxlQ29tbWFuZHMoY21kKS5yZWR1Y2UoKG1heCwgY29tbWFuZCkgPT4ge1xuICAgICAgcmV0dXJuIE1hdGgubWF4KG1heCwgaGVscGVyLnN1YmNvbW1hbmRUZXJtKGNvbW1hbmQpLmxlbmd0aCk7XG4gICAgfSwgMCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbG9uZ2VzdCBvcHRpb24gdGVybSBsZW5ndGguXG4gICAqXG4gICAqIEBwYXJhbSB7Q29tbWFuZH0gY21kXG4gICAqIEBwYXJhbSB7SGVscH0gaGVscGVyXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAqL1xuXG4gIGxvbmdlc3RPcHRpb25UZXJtTGVuZ3RoKGNtZCwgaGVscGVyKSB7XG4gICAgcmV0dXJuIGhlbHBlci52aXNpYmxlT3B0aW9ucyhjbWQpLnJlZHVjZSgobWF4LCBvcHRpb24pID0+IHtcbiAgICAgIHJldHVybiBNYXRoLm1heChtYXgsIGhlbHBlci5vcHRpb25UZXJtKG9wdGlvbikubGVuZ3RoKTtcbiAgICB9LCAwKTtcbiAgfTtcblxuICAvKipcbiAgICogR2V0IHRoZSBsb25nZXN0IGFyZ3VtZW50IHRlcm0gbGVuZ3RoLlxuICAgKlxuICAgKiBAcGFyYW0ge0NvbW1hbmR9IGNtZFxuICAgKiBAcGFyYW0ge0hlbHB9IGhlbHBlclxuICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgKi9cblxuICBsb25nZXN0QXJndW1lbnRUZXJtTGVuZ3RoKGNtZCwgaGVscGVyKSB7XG4gICAgcmV0dXJuIGhlbHBlci52aXNpYmxlQXJndW1lbnRzKGNtZCkucmVkdWNlKChtYXgsIGFyZ3VtZW50KSA9PiB7XG4gICAgICByZXR1cm4gTWF0aC5tYXgobWF4LCBhcmd1bWVudC50ZXJtLmxlbmd0aCk7XG4gICAgfSwgMCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgY29tbWFuZCB1c2FnZSB0byBiZSBkaXNwbGF5ZWQgYXQgdGhlIHRvcCBvZiB0aGUgYnVpbHQtaW4gaGVscC5cbiAgICpcbiAgICogQHBhcmFtIHtDb21tYW5kfSBjbWRcbiAgICogQHJldHVybnMge3N0cmluZ31cbiAgICovXG5cbiAgY29tbWFuZFVzYWdlKGNtZCkge1xuICAgIC8vIFVzYWdlXG4gICAgbGV0IGNtZE5hbWUgPSBjbWQuX25hbWU7XG4gICAgaWYgKGNtZC5fYWxpYXNlc1swXSkge1xuICAgICAgY21kTmFtZSA9IGNtZE5hbWUgKyAnfCcgKyBjbWQuX2FsaWFzZXNbMF07XG4gICAgfVxuICAgIGxldCBwYXJlbnRDbWROYW1lcyA9ICcnO1xuICAgIGZvciAobGV0IHBhcmVudENtZCA9IGNtZC5wYXJlbnQ7IHBhcmVudENtZDsgcGFyZW50Q21kID0gcGFyZW50Q21kLnBhcmVudCkge1xuICAgICAgcGFyZW50Q21kTmFtZXMgPSBwYXJlbnRDbWQubmFtZSgpICsgJyAnICsgcGFyZW50Q21kTmFtZXM7XG4gICAgfVxuICAgIHJldHVybiBwYXJlbnRDbWROYW1lcyArIGNtZE5hbWUgKyAnICcgKyBjbWQudXNhZ2UoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGRlc2NyaXB0aW9uIGZvciB0aGUgY29tbWFuZC5cbiAgICpcbiAgICogQHBhcmFtIHtDb21tYW5kfSBjbWRcbiAgICogQHJldHVybnMge3N0cmluZ31cbiAgICovXG5cbiAgY29tbWFuZERlc2NyaXB0aW9uKGNtZCkge1xuICAgIC8vIEB0cy1pZ25vcmU6IG92ZXJsb2FkZWQgcmV0dXJuIHR5cGVcbiAgICByZXR1cm4gY21kLmRlc2NyaXB0aW9uKCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBjb21tYW5kIGRlc2NyaXB0aW9uIHRvIHNob3cgaW4gdGhlIGxpc3Qgb2Ygc3ViY29tbWFuZHMuXG4gICAqXG4gICAqIEBwYXJhbSB7Q29tbWFuZH0gY21kXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAqL1xuXG4gIHN1YmNvbW1hbmREZXNjcmlwdGlvbihjbWQpIHtcbiAgICAvLyBAdHMtaWdub3JlOiBvdmVybG9hZGVkIHJldHVybiB0eXBlXG4gICAgcmV0dXJuIGNtZC5kZXNjcmlwdGlvbigpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgb3B0aW9uIGRlc2NyaXB0aW9uIHRvIHNob3cgaW4gdGhlIGxpc3Qgb2Ygb3B0aW9ucy5cbiAgICpcbiAgICogQHBhcmFtIHtPcHRpb259IG9wdGlvblxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuXG4gIG9wdGlvbkRlc2NyaXB0aW9uKG9wdGlvbikge1xuICAgIGlmIChvcHRpb24ubmVnYXRlKSB7XG4gICAgICByZXR1cm4gb3B0aW9uLmRlc2NyaXB0aW9uO1xuICAgIH1cbiAgICBjb25zdCBleHRyYUluZm8gPSBbXTtcbiAgICBpZiAob3B0aW9uLmFyZ0Nob2ljZXMpIHtcbiAgICAgIGV4dHJhSW5mby5wdXNoKFxuICAgICAgICAvLyB1c2Ugc3RyaW5naWZ5IHRvIG1hdGNoIHRoZSBkaXNwbGF5IG9mIHRoZSBkZWZhdWx0IHZhbHVlXG4gICAgICAgIGBjaG9pY2VzOiAke29wdGlvbi5hcmdDaG9pY2VzLm1hcCgoY2hvaWNlKSA9PiBKU09OLnN0cmluZ2lmeShjaG9pY2UpKS5qb2luKCcsICcpfWApO1xuICAgIH1cbiAgICBpZiAob3B0aW9uLmRlZmF1bHRWYWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBleHRyYUluZm8ucHVzaChgZGVmYXVsdDogJHtvcHRpb24uZGVmYXVsdFZhbHVlRGVzY3JpcHRpb24gfHwgSlNPTi5zdHJpbmdpZnkob3B0aW9uLmRlZmF1bHRWYWx1ZSl9YCk7XG4gICAgfVxuICAgIGlmIChleHRyYUluZm8ubGVuZ3RoID4gMCkge1xuICAgICAgcmV0dXJuIGAke29wdGlvbi5kZXNjcmlwdGlvbn0gKCR7ZXh0cmFJbmZvLmpvaW4oJywgJyl9KWA7XG4gICAgfVxuICAgIHJldHVybiBvcHRpb24uZGVzY3JpcHRpb247XG4gIH07XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIHRoZSBidWlsdC1pbiBoZWxwIHRleHQuXG4gICAqXG4gICAqIEBwYXJhbSB7Q29tbWFuZH0gY21kXG4gICAqIEBwYXJhbSB7SGVscH0gaGVscGVyXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAqL1xuXG4gIGZvcm1hdEhlbHAoY21kLCBoZWxwZXIpIHtcbiAgICBjb25zdCB0ZXJtV2lkdGggPSBoZWxwZXIucGFkV2lkdGgoY21kLCBoZWxwZXIpO1xuICAgIGNvbnN0IGhlbHBXaWR0aCA9IGhlbHBlci5oZWxwV2lkdGggfHwgODA7XG4gICAgY29uc3QgaXRlbUluZGVudFdpZHRoID0gMjtcbiAgICBjb25zdCBpdGVtU2VwYXJhdG9yV2lkdGggPSAyOyAvLyBiZXR3ZWVuIHRlcm0gYW5kIGRlc2NyaXB0aW9uXG4gICAgZnVuY3Rpb24gZm9ybWF0SXRlbSh0ZXJtLCBkZXNjcmlwdGlvbikge1xuICAgICAgaWYgKGRlc2NyaXB0aW9uKSB7XG4gICAgICAgIGNvbnN0IGZ1bGxUZXh0ID0gYCR7dGVybS5wYWRFbmQodGVybVdpZHRoICsgaXRlbVNlcGFyYXRvcldpZHRoKX0ke2Rlc2NyaXB0aW9ufWA7XG4gICAgICAgIHJldHVybiBoZWxwZXIud3JhcChmdWxsVGV4dCwgaGVscFdpZHRoIC0gaXRlbUluZGVudFdpZHRoLCB0ZXJtV2lkdGggKyBpdGVtU2VwYXJhdG9yV2lkdGgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRlcm07XG4gICAgfTtcbiAgICBmdW5jdGlvbiBmb3JtYXRMaXN0KHRleHRBcnJheSkge1xuICAgICAgcmV0dXJuIHRleHRBcnJheS5qb2luKCdcXG4nKS5yZXBsYWNlKC9eL2dtLCAnICcucmVwZWF0KGl0ZW1JbmRlbnRXaWR0aCkpO1xuICAgIH1cblxuICAgIC8vIFVzYWdlXG4gICAgbGV0IG91dHB1dCA9IFtgVXNhZ2U6ICR7aGVscGVyLmNvbW1hbmRVc2FnZShjbWQpfWAsICcnXTtcblxuICAgIC8vIERlc2NyaXB0aW9uXG4gICAgY29uc3QgY29tbWFuZERlc2NyaXB0aW9uID0gaGVscGVyLmNvbW1hbmREZXNjcmlwdGlvbihjbWQpO1xuICAgIGlmIChjb21tYW5kRGVzY3JpcHRpb24ubGVuZ3RoID4gMCkge1xuICAgICAgb3V0cHV0ID0gb3V0cHV0LmNvbmNhdChbY29tbWFuZERlc2NyaXB0aW9uLCAnJ10pO1xuICAgIH1cblxuICAgIC8vIEFyZ3VtZW50c1xuICAgIGNvbnN0IGFyZ3VtZW50TGlzdCA9IGhlbHBlci52aXNpYmxlQXJndW1lbnRzKGNtZCkubWFwKChhcmd1bWVudCkgPT4ge1xuICAgICAgcmV0dXJuIGZvcm1hdEl0ZW0oYXJndW1lbnQudGVybSwgYXJndW1lbnQuZGVzY3JpcHRpb24pO1xuICAgIH0pO1xuICAgIGlmIChhcmd1bWVudExpc3QubGVuZ3RoID4gMCkge1xuICAgICAgb3V0cHV0ID0gb3V0cHV0LmNvbmNhdChbJ0FyZ3VtZW50czonLCBmb3JtYXRMaXN0KGFyZ3VtZW50TGlzdCksICcnXSk7XG4gICAgfVxuXG4gICAgLy8gT3B0aW9uc1xuICAgIGNvbnN0IG9wdGlvbkxpc3QgPSBoZWxwZXIudmlzaWJsZU9wdGlvbnMoY21kKS5tYXAoKG9wdGlvbikgPT4ge1xuICAgICAgcmV0dXJuIGZvcm1hdEl0ZW0oaGVscGVyLm9wdGlvblRlcm0ob3B0aW9uKSwgaGVscGVyLm9wdGlvbkRlc2NyaXB0aW9uKG9wdGlvbikpO1xuICAgIH0pO1xuICAgIGlmIChvcHRpb25MaXN0Lmxlbmd0aCA+IDApIHtcbiAgICAgIG91dHB1dCA9IG91dHB1dC5jb25jYXQoWydPcHRpb25zOicsIGZvcm1hdExpc3Qob3B0aW9uTGlzdCksICcnXSk7XG4gICAgfVxuXG4gICAgLy8gQ29tbWFuZHNcbiAgICBjb25zdCBjb21tYW5kTGlzdCA9IGhlbHBlci52aXNpYmxlQ29tbWFuZHMoY21kKS5tYXAoKGNtZCkgPT4ge1xuICAgICAgcmV0dXJuIGZvcm1hdEl0ZW0oaGVscGVyLnN1YmNvbW1hbmRUZXJtKGNtZCksIGhlbHBlci5zdWJjb21tYW5kRGVzY3JpcHRpb24oY21kKSk7XG4gICAgfSk7XG4gICAgaWYgKGNvbW1hbmRMaXN0Lmxlbmd0aCA+IDApIHtcbiAgICAgIG91dHB1dCA9IG91dHB1dC5jb25jYXQoWydDb21tYW5kczonLCBmb3JtYXRMaXN0KGNvbW1hbmRMaXN0KSwgJyddKTtcbiAgICB9XG5cbiAgICByZXR1cm4gb3V0cHV0LmpvaW4oJ1xcbicpO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGN1bGF0ZSB0aGUgcGFkIHdpZHRoIGZyb20gdGhlIG1heGltdW0gdGVybSBsZW5ndGguXG4gICAqXG4gICAqIEBwYXJhbSB7Q29tbWFuZH0gY21kXG4gICAqIEBwYXJhbSB7SGVscH0gaGVscGVyXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAqL1xuXG4gIHBhZFdpZHRoKGNtZCwgaGVscGVyKSB7XG4gICAgcmV0dXJuIE1hdGgubWF4KFxuICAgICAgaGVscGVyLmxvbmdlc3RPcHRpb25UZXJtTGVuZ3RoKGNtZCwgaGVscGVyKSxcbiAgICAgIGhlbHBlci5sb25nZXN0U3ViY29tbWFuZFRlcm1MZW5ndGgoY21kLCBoZWxwZXIpLFxuICAgICAgaGVscGVyLmxvbmdlc3RBcmd1bWVudFRlcm1MZW5ndGgoY21kLCBoZWxwZXIpXG4gICAgKTtcbiAgfTtcblxuICAvKipcbiAgICogV3JhcCB0aGUgZ2l2ZW4gc3RyaW5nIHRvIHdpZHRoIGNoYXJhY3RlcnMgcGVyIGxpbmUsIHdpdGggbGluZXMgYWZ0ZXIgdGhlIGZpcnN0IGluZGVudGVkLlxuICAgKiBEbyBub3Qgd3JhcCBpZiBpbnN1ZmZpY2llbnQgcm9vbSBmb3Igd3JhcHBpbmcgKG1pbkNvbHVtbldpZHRoKSwgb3Igc3RyaW5nIGlzIG1hbnVhbGx5IGZvcm1hdHRlZC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHN0clxuICAgKiBAcGFyYW0ge251bWJlcn0gd2lkdGhcbiAgICogQHBhcmFtIHtudW1iZXJ9IGluZGVudFxuICAgKiBAcGFyYW0ge251bWJlcn0gW21pbkNvbHVtbldpZHRoPTQwXVxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqXG4gICAqL1xuXG4gIHdyYXAoc3RyLCB3aWR0aCwgaW5kZW50LCBtaW5Db2x1bW5XaWR0aCA9IDQwKSB7XG4gICAgLy8gRGV0ZWN0IG1hbnVhbGx5IHdyYXBwZWQgYW5kIGluZGVudGVkIHN0cmluZ3MgYnkgc2VhcmNoaW5nIGZvciBsaW5lIGJyZWFrc1xuICAgIC8vIGZvbGxvd2VkIGJ5IG11bHRpcGxlIHNwYWNlcy90YWJzLlxuICAgIGlmIChzdHIubWF0Y2goL1tcXG5dXFxzKy8pKSByZXR1cm4gc3RyO1xuICAgIC8vIERvIG5vdCB3cmFwIGlmIG5vdCBlbm91Z2ggcm9vbSBmb3IgYSB3cmFwcGVkIGNvbHVtbiBvZiB0ZXh0IChhcyBjb3VsZCBlbmQgdXAgd2l0aCBhIHdvcmQgcGVyIGxpbmUpLlxuICAgIGNvbnN0IGNvbHVtbldpZHRoID0gd2lkdGggLSBpbmRlbnQ7XG4gICAgaWYgKGNvbHVtbldpZHRoIDwgbWluQ29sdW1uV2lkdGgpIHJldHVybiBzdHI7XG5cbiAgICBjb25zdCBsZWFkaW5nU3RyID0gc3RyLnN1YnN0cigwLCBpbmRlbnQpO1xuICAgIGNvbnN0IGNvbHVtblRleHQgPSBzdHIuc3Vic3RyKGluZGVudCk7XG5cbiAgICBjb25zdCBpbmRlbnRTdHJpbmcgPSAnICcucmVwZWF0KGluZGVudCk7XG4gICAgY29uc3QgcmVnZXggPSBuZXcgUmVnRXhwKCcuezEsJyArIChjb2x1bW5XaWR0aCAtIDEpICsgJ30oW1xcXFxzXFx1MjAwQl18JCl8W15cXFxcc1xcdTIwMEJdKz8oW1xcXFxzXFx1MjAwQl18JCknLCAnZycpO1xuICAgIGNvbnN0IGxpbmVzID0gY29sdW1uVGV4dC5tYXRjaChyZWdleCkgfHwgW107XG4gICAgcmV0dXJuIGxlYWRpbmdTdHIgKyBsaW5lcy5tYXAoKGxpbmUsIGkpID0+IHtcbiAgICAgIGlmIChsaW5lLnNsaWNlKC0xKSA9PT0gJ1xcbicpIHtcbiAgICAgICAgbGluZSA9IGxpbmUuc2xpY2UoMCwgbGluZS5sZW5ndGggLSAxKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiAoKGkgPiAwKSA/IGluZGVudFN0cmluZyA6ICcnKSArIGxpbmUudHJpbVJpZ2h0KCk7XG4gICAgfSkuam9pbignXFxuJyk7XG4gIH1cbn1cblxuY2xhc3MgT3B0aW9uIHtcbiAgLyoqXG4gICAqIEluaXRpYWxpemUgYSBuZXcgYE9wdGlvbmAgd2l0aCB0aGUgZ2l2ZW4gYGZsYWdzYCBhbmQgYGRlc2NyaXB0aW9uYC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGZsYWdzXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbZGVzY3JpcHRpb25dXG4gICAqL1xuXG4gIGNvbnN0cnVjdG9yKGZsYWdzLCBkZXNjcmlwdGlvbikge1xuICAgIHRoaXMuZmxhZ3MgPSBmbGFncztcbiAgICB0aGlzLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb24gfHwgJyc7XG5cbiAgICB0aGlzLnJlcXVpcmVkID0gZmxhZ3MuaW5jbHVkZXMoJzwnKTsgLy8gQSB2YWx1ZSBtdXN0IGJlIHN1cHBsaWVkIHdoZW4gdGhlIG9wdGlvbiBpcyBzcGVjaWZpZWQuXG4gICAgdGhpcy5vcHRpb25hbCA9IGZsYWdzLmluY2x1ZGVzKCdbJyk7IC8vIEEgdmFsdWUgaXMgb3B0aW9uYWwgd2hlbiB0aGUgb3B0aW9uIGlzIHNwZWNpZmllZC5cbiAgICAvLyB2YXJpYWRpYyB0ZXN0IGlnbm9yZXMgPHZhbHVlLC4uLj4gZXQgYWwgd2hpY2ggbWlnaHQgYmUgdXNlZCB0byBkZXNjcmliZSBjdXN0b20gc3BsaXR0aW5nIG9mIHNpbmdsZSBhcmd1bWVudFxuICAgIHRoaXMudmFyaWFkaWMgPSAvXFx3XFwuXFwuXFwuWz5cXF1dJC8udGVzdChmbGFncyk7IC8vIFRoZSBvcHRpb24gY2FuIHRha2UgbXVsdGlwbGUgdmFsdWVzLlxuICAgIHRoaXMubWFuZGF0b3J5ID0gZmFsc2U7IC8vIFRoZSBvcHRpb24gbXVzdCBoYXZlIGEgdmFsdWUgYWZ0ZXIgcGFyc2luZywgd2hpY2ggdXN1YWxseSBtZWFucyBpdCBtdXN0IGJlIHNwZWNpZmllZCBvbiBjb21tYW5kIGxpbmUuXG4gICAgY29uc3Qgb3B0aW9uRmxhZ3MgPSBfcGFyc2VPcHRpb25GbGFncyhmbGFncyk7XG4gICAgdGhpcy5zaG9ydCA9IG9wdGlvbkZsYWdzLnNob3J0RmxhZztcbiAgICB0aGlzLmxvbmcgPSBvcHRpb25GbGFncy5sb25nRmxhZztcbiAgICB0aGlzLm5lZ2F0ZSA9IGZhbHNlO1xuICAgIGlmICh0aGlzLmxvbmcpIHtcbiAgICAgIHRoaXMubmVnYXRlID0gdGhpcy5sb25nLnN0YXJ0c1dpdGgoJy0tbm8tJyk7XG4gICAgfVxuICAgIHRoaXMuZGVmYXVsdFZhbHVlID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuZGVmYXVsdFZhbHVlRGVzY3JpcHRpb24gPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5wYXJzZUFyZyA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmhpZGRlbiA9IGZhbHNlO1xuICAgIHRoaXMuYXJnQ2hvaWNlcyA9IHVuZGVmaW5lZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGRlZmF1bHQgdmFsdWUsIGFuZCBvcHRpb25hbGx5IHN1cHBseSB0aGUgZGVzY3JpcHRpb24gdG8gYmUgZGlzcGxheWVkIGluIHRoZSBoZWxwLlxuICAgKlxuICAgKiBAcGFyYW0ge2FueX0gdmFsdWVcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtkZXNjcmlwdGlvbl1cbiAgICogQHJldHVybiB7T3B0aW9ufVxuICAgKi9cblxuICBkZWZhdWx0KHZhbHVlLCBkZXNjcmlwdGlvbikge1xuICAgIHRoaXMuZGVmYXVsdFZhbHVlID0gdmFsdWU7XG4gICAgdGhpcy5kZWZhdWx0VmFsdWVEZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGN1c3RvbSBoYW5kbGVyIGZvciBwcm9jZXNzaW5nIENMSSBvcHRpb24gYXJndW1lbnRzIGludG8gb3B0aW9uIHZhbHVlcy5cbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2ZuXVxuICAgKiBAcmV0dXJuIHtPcHRpb259XG4gICAqL1xuXG4gIGFyZ1BhcnNlcihmbikge1xuICAgIHRoaXMucGFyc2VBcmcgPSBmbjtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogV2hldGhlciB0aGUgb3B0aW9uIGlzIG1hbmRhdG9yeSBhbmQgbXVzdCBoYXZlIGEgdmFsdWUgYWZ0ZXIgcGFyc2luZy5cbiAgICpcbiAgICogQHBhcmFtIHtib29sZWFufSBbbWFuZGF0b3J5PXRydWVdXG4gICAqIEByZXR1cm4ge09wdGlvbn1cbiAgICovXG5cbiAgbWFrZU9wdGlvbk1hbmRhdG9yeShtYW5kYXRvcnkgPSB0cnVlKSB7XG4gICAgdGhpcy5tYW5kYXRvcnkgPSAhIW1hbmRhdG9yeTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogSGlkZSBvcHRpb24gaW4gaGVscC5cbiAgICpcbiAgICogQHBhcmFtIHtib29sZWFufSBbaGlkZT10cnVlXVxuICAgKiBAcmV0dXJuIHtPcHRpb259XG4gICAqL1xuXG4gIGhpZGVIZWxwKGhpZGUgPSB0cnVlKSB7XG4gICAgdGhpcy5oaWRkZW4gPSAhIWhpZGU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBhcGkgcHJpdmF0ZVxuICAgKi9cblxuICBfY29uY2F0VmFsdWUodmFsdWUsIHByZXZpb3VzKSB7XG4gICAgaWYgKHByZXZpb3VzID09PSB0aGlzLmRlZmF1bHRWYWx1ZSB8fCAhQXJyYXkuaXNBcnJheShwcmV2aW91cykpIHtcbiAgICAgIHJldHVybiBbdmFsdWVdO1xuICAgIH1cblxuICAgIHJldHVybiBwcmV2aW91cy5jb25jYXQodmFsdWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIE9ubHkgYWxsb3cgb3B0aW9uIHZhbHVlIHRvIGJlIG9uZSBvZiBjaG9pY2VzLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSB2YWx1ZXNcbiAgICogQHJldHVybiB7T3B0aW9ufVxuICAgKi9cblxuICBjaG9pY2VzKHZhbHVlcykge1xuICAgIHRoaXMuYXJnQ2hvaWNlcyA9IHZhbHVlcztcbiAgICB0aGlzLnBhcnNlQXJnID0gKGFyZywgcHJldmlvdXMpID0+IHtcbiAgICAgIGlmICghdmFsdWVzLmluY2x1ZGVzKGFyZykpIHtcbiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRPcHRpb25Bcmd1bWVudEVycm9yKGBBbGxvd2VkIGNob2ljZXMgYXJlICR7dmFsdWVzLmpvaW4oJywgJyl9LmApO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMudmFyaWFkaWMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbmNhdFZhbHVlKGFyZywgcHJldmlvdXMpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGFyZztcbiAgICB9O1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm4gb3B0aW9uIG5hbWUuXG4gICAqXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG5cbiAgbmFtZSgpIHtcbiAgICBpZiAodGhpcy5sb25nKSB7XG4gICAgICByZXR1cm4gdGhpcy5sb25nLnJlcGxhY2UoL14tLS8sICcnKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2hvcnQucmVwbGFjZSgvXi0vLCAnJyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybiBvcHRpb24gbmFtZSwgaW4gYSBjYW1lbGNhc2UgZm9ybWF0IHRoYXQgY2FuIGJlIHVzZWRcbiAgICogYXMgYSBvYmplY3QgYXR0cmlidXRlIGtleS5cbiAgICpcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKiBAYXBpIHByaXZhdGVcbiAgICovXG5cbiAgYXR0cmlidXRlTmFtZSgpIHtcbiAgICByZXR1cm4gY2FtZWxjYXNlKHRoaXMubmFtZSgpLnJlcGxhY2UoL15uby0vLCAnJykpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBgYXJnYCBtYXRjaGVzIHRoZSBzaG9ydCBvciBsb25nIGZsYWcuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBhcmdcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICogQGFwaSBwcml2YXRlXG4gICAqL1xuXG4gIGlzKGFyZykge1xuICAgIHJldHVybiB0aGlzLnNob3J0ID09PSBhcmcgfHwgdGhpcy5sb25nID09PSBhcmc7XG4gIH07XG59XG5cbi8qKlxuICogQ29tbWFuZGVyRXJyb3IgY2xhc3NcbiAqIEBjbGFzc1xuICovXG5jbGFzcyBDb21tYW5kZXJFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgLyoqXG4gICAqIENvbnN0cnVjdHMgdGhlIENvbW1hbmRlckVycm9yIGNsYXNzXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBleGl0Q29kZSBzdWdnZXN0ZWQgZXhpdCBjb2RlIHdoaWNoIGNvdWxkIGJlIHVzZWQgd2l0aCBwcm9jZXNzLmV4aXRcbiAgICogQHBhcmFtIHtzdHJpbmd9IGNvZGUgYW4gaWQgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgZXJyb3JcbiAgICogQHBhcmFtIHtzdHJpbmd9IG1lc3NhZ2UgaHVtYW4tcmVhZGFibGUgZGVzY3JpcHRpb24gb2YgdGhlIGVycm9yXG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKi9cbiAgY29uc3RydWN0b3IoZXhpdENvZGUsIGNvZGUsIG1lc3NhZ2UpIHtcbiAgICBzdXBlcihtZXNzYWdlKTtcbiAgICAvLyBwcm9wZXJseSBjYXB0dXJlIHN0YWNrIHRyYWNlIGluIE5vZGUuanNcbiAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCB0aGlzLmNvbnN0cnVjdG9yKTtcbiAgICB0aGlzLm5hbWUgPSB0aGlzLmNvbnN0cnVjdG9yLm5hbWU7XG4gICAgdGhpcy5jb2RlID0gY29kZTtcbiAgICB0aGlzLmV4aXRDb2RlID0gZXhpdENvZGU7XG4gICAgdGhpcy5uZXN0ZWRFcnJvciA9IHVuZGVmaW5lZDtcbiAgfVxufVxuXG4vKipcbiAqIEludmFsaWRPcHRpb25Bcmd1bWVudEVycm9yIGNsYXNzXG4gKiBAY2xhc3NcbiAqL1xuY2xhc3MgSW52YWxpZE9wdGlvbkFyZ3VtZW50RXJyb3IgZXh0ZW5kcyBDb21tYW5kZXJFcnJvciB7XG4gIC8qKlxuICAgKiBDb25zdHJ1Y3RzIHRoZSBJbnZhbGlkT3B0aW9uQXJndW1lbnRFcnJvciBjbGFzc1xuICAgKiBAcGFyYW0ge3N0cmluZ30gW21lc3NhZ2VdIGV4cGxhbmF0aW9uIG9mIHdoeSBhcmd1bWVudCBpcyBpbnZhbGlkXG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKi9cbiAgY29uc3RydWN0b3IobWVzc2FnZSkge1xuICAgIHN1cGVyKDEsICdjb21tYW5kZXIuaW52YWxpZE9wdGlvbkFyZ3VtZW50JywgbWVzc2FnZSk7XG4gICAgLy8gcHJvcGVybHkgY2FwdHVyZSBzdGFjayB0cmFjZSBpbiBOb2RlLmpzXG4gICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcywgdGhpcy5jb25zdHJ1Y3Rvcik7XG4gICAgdGhpcy5uYW1lID0gdGhpcy5jb25zdHJ1Y3Rvci5uYW1lO1xuICB9XG59XG5cbmNsYXNzIENvbW1hbmQgZXh0ZW5kcyBFdmVudEVtaXR0ZXIge1xuICAvKipcbiAgICogSW5pdGlhbGl6ZSBhIG5ldyBgQ29tbWFuZGAuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbbmFtZV1cbiAgICovXG5cbiAgY29uc3RydWN0b3IobmFtZSkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5jb21tYW5kcyA9IFtdO1xuICAgIHRoaXMub3B0aW9ucyA9IFtdO1xuICAgIHRoaXMucGFyZW50ID0gbnVsbDtcbiAgICB0aGlzLl9hbGxvd1Vua25vd25PcHRpb24gPSBmYWxzZTtcbiAgICB0aGlzLl9hbGxvd0V4Y2Vzc0FyZ3VtZW50cyA9IHRydWU7XG4gICAgdGhpcy5fYXJncyA9IFtdO1xuICAgIHRoaXMucmF3QXJncyA9IG51bGw7XG4gICAgdGhpcy5fc2NyaXB0UGF0aCA9IG51bGw7XG4gICAgdGhpcy5fbmFtZSA9IG5hbWUgfHwgJyc7XG4gICAgdGhpcy5fb3B0aW9uVmFsdWVzID0ge307XG4gICAgdGhpcy5fc3RvcmVPcHRpb25zQXNQcm9wZXJ0aWVzID0gZmFsc2U7XG4gICAgdGhpcy5fYWN0aW9uUmVzdWx0cyA9IFtdO1xuICAgIHRoaXMuX2FjdGlvbkhhbmRsZXIgPSBudWxsO1xuICAgIHRoaXMuX2V4ZWN1dGFibGVIYW5kbGVyID0gZmFsc2U7XG4gICAgdGhpcy5fZXhlY3V0YWJsZUZpbGUgPSBudWxsOyAvLyBjdXN0b20gbmFtZSBmb3IgZXhlY3V0YWJsZVxuICAgIHRoaXMuX2RlZmF1bHRDb21tYW5kTmFtZSA9IG51bGw7XG4gICAgdGhpcy5fZXhpdENhbGxiYWNrID0gbnVsbDtcbiAgICB0aGlzLl9hbGlhc2VzID0gW107XG4gICAgdGhpcy5fY29tYmluZUZsYWdBbmRPcHRpb25hbFZhbHVlID0gdHJ1ZTtcbiAgICB0aGlzLl9kZXNjcmlwdGlvbiA9ICcnO1xuICAgIHRoaXMuX2FyZ3NEZXNjcmlwdGlvbiA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLl9lbmFibGVQb3NpdGlvbmFsT3B0aW9ucyA9IGZhbHNlO1xuICAgIHRoaXMuX3Bhc3NUaHJvdWdoT3B0aW9ucyA9IGZhbHNlO1xuXG4gICAgLy8gc2VlIC5jb25maWd1cmVPdXRwdXQoKSBmb3IgZG9jc1xuICAgIHRoaXMuX291dHB1dENvbmZpZ3VyYXRpb24gPSB7XG4gICAgICB3cml0ZU91dDogKHN0cikgPT4gcHJvY2Vzcy5zdGRvdXQud3JpdGUoc3RyKSxcbiAgICAgIHdyaXRlRXJyOiAoc3RyKSA9PiBwcm9jZXNzLnN0ZGVyci53cml0ZShzdHIpLFxuICAgICAgZ2V0T3V0SGVscFdpZHRoOiAoKSA9PiBwcm9jZXNzLnN0ZG91dC5pc1RUWSA/IHByb2Nlc3Muc3Rkb3V0LmNvbHVtbnMgOiB1bmRlZmluZWQsXG4gICAgICBnZXRFcnJIZWxwV2lkdGg6ICgpID0+IHByb2Nlc3Muc3RkZXJyLmlzVFRZID8gcHJvY2Vzcy5zdGRlcnIuY29sdW1ucyA6IHVuZGVmaW5lZCxcbiAgICAgIG91dHB1dEVycm9yOiAoc3RyLCB3cml0ZSkgPT4gd3JpdGUoc3RyKVxuICAgIH07XG5cbiAgICB0aGlzLl9oaWRkZW4gPSBmYWxzZTtcbiAgICB0aGlzLl9oYXNIZWxwT3B0aW9uID0gdHJ1ZTtcbiAgICB0aGlzLl9oZWxwRmxhZ3MgPSAnLWgsIC0taGVscCc7XG4gICAgdGhpcy5faGVscERlc2NyaXB0aW9uID0gJ2Rpc3BsYXkgaGVscCBmb3IgY29tbWFuZCc7XG4gICAgdGhpcy5faGVscFNob3J0RmxhZyA9ICctaCc7XG4gICAgdGhpcy5faGVscExvbmdGbGFnID0gJy0taGVscCc7XG4gICAgdGhpcy5fYWRkSW1wbGljaXRIZWxwQ29tbWFuZCA9IHVuZGVmaW5lZDsgLy8gRGVsaWJlcmF0ZWx5IHVuZGVmaW5lZCwgbm90IGRlY2lkZWQgd2hldGhlciB0cnVlIG9yIGZhbHNlXG4gICAgdGhpcy5faGVscENvbW1hbmROYW1lID0gJ2hlbHAnO1xuICAgIHRoaXMuX2hlbHBDb21tYW5kbmFtZUFuZEFyZ3MgPSAnaGVscCBbY29tbWFuZF0nO1xuICAgIHRoaXMuX2hlbHBDb21tYW5kRGVzY3JpcHRpb24gPSAnZGlzcGxheSBoZWxwIGZvciBjb21tYW5kJztcbiAgICB0aGlzLl9oZWxwQ29uZmlndXJhdGlvbiA9IHt9O1xuICB9XG5cbiAgLyoqXG4gICAqIERlZmluZSBhIGNvbW1hbmQuXG4gICAqXG4gICAqIFRoZXJlIGFyZSB0d28gc3R5bGVzIG9mIGNvbW1hbmQ6IHBheSBhdHRlbnRpb24gdG8gd2hlcmUgdG8gcHV0IHRoZSBkZXNjcmlwdGlvbi5cbiAgICpcbiAgICogRXhhbXBsZXM6XG4gICAqXG4gICAqICAgICAgLy8gQ29tbWFuZCBpbXBsZW1lbnRlZCB1c2luZyBhY3Rpb24gaGFuZGxlciAoZGVzY3JpcHRpb24gaXMgc3VwcGxpZWQgc2VwYXJhdGVseSB0byBgLmNvbW1hbmRgKVxuICAgKiAgICAgIHByb2dyYW1cbiAgICogICAgICAgIC5jb21tYW5kKCdjbG9uZSA8c291cmNlPiBbZGVzdGluYXRpb25dJylcbiAgICogICAgICAgIC5kZXNjcmlwdGlvbignY2xvbmUgYSByZXBvc2l0b3J5IGludG8gYSBuZXdseSBjcmVhdGVkIGRpcmVjdG9yeScpXG4gICAqICAgICAgICAuYWN0aW9uKChzb3VyY2UsIGRlc3RpbmF0aW9uKSA9PiB7XG4gICAqICAgICAgICAgIGNvbnNvbGUubG9nKCdjbG9uZSBjb21tYW5kIGNhbGxlZCcpO1xuICAgKiAgICAgICAgfSk7XG4gICAqXG4gICAqICAgICAgLy8gQ29tbWFuZCBpbXBsZW1lbnRlZCB1c2luZyBzZXBhcmF0ZSBleGVjdXRhYmxlIGZpbGUgKGRlc2NyaXB0aW9uIGlzIHNlY29uZCBwYXJhbWV0ZXIgdG8gYC5jb21tYW5kYClcbiAgICogICAgICBwcm9ncmFtXG4gICAqICAgICAgICAuY29tbWFuZCgnc3RhcnQgPHNlcnZpY2U+JywgJ3N0YXJ0IG5hbWVkIHNlcnZpY2UnKVxuICAgKiAgICAgICAgLmNvbW1hbmQoJ3N0b3AgW3NlcnZpY2VdJywgJ3N0b3AgbmFtZWQgc2VydmljZSwgb3IgYWxsIGlmIG5vIG5hbWUgc3VwcGxpZWQnKTtcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVBbmRBcmdzIC0gY29tbWFuZCBuYW1lIGFuZCBhcmd1bWVudHMsIGFyZ3MgYXJlIGA8cmVxdWlyZWQ+YCBvciBgW29wdGlvbmFsXWAgYW5kIGxhc3QgbWF5IGFsc28gYmUgYHZhcmlhZGljLi4uYFxuICAgKiBAcGFyYW0ge09iamVjdHxzdHJpbmd9IFthY3Rpb25PcHRzT3JFeGVjRGVzY10gLSBjb25maWd1cmF0aW9uIG9wdGlvbnMgKGZvciBhY3Rpb24pLCBvciBkZXNjcmlwdGlvbiAoZm9yIGV4ZWN1dGFibGUpXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbZXhlY09wdHNdIC0gY29uZmlndXJhdGlvbiBvcHRpb25zIChmb3IgZXhlY3V0YWJsZSlcbiAgICogQHJldHVybiB7Q29tbWFuZH0gcmV0dXJucyBuZXcgY29tbWFuZCBmb3IgYWN0aW9uIGhhbmRsZXIsIG9yIGB0aGlzYCBmb3IgZXhlY3V0YWJsZSBjb21tYW5kXG4gICAqL1xuXG4gIGNvbW1hbmQobmFtZUFuZEFyZ3MsIGFjdGlvbk9wdHNPckV4ZWNEZXNjLCBleGVjT3B0cykge1xuICAgIGxldCBkZXNjID0gYWN0aW9uT3B0c09yRXhlY0Rlc2M7XG4gICAgbGV0IG9wdHMgPSBleGVjT3B0cztcbiAgICBpZiAodHlwZW9mIGRlc2MgPT09ICdvYmplY3QnICYmIGRlc2MgIT09IG51bGwpIHtcbiAgICAgIG9wdHMgPSBkZXNjO1xuICAgICAgZGVzYyA9IG51bGw7XG4gICAgfVxuICAgIG9wdHMgPSBvcHRzIHx8IHt9O1xuICAgIGNvbnN0IGFyZ3MgPSBuYW1lQW5kQXJncy5zcGxpdCgvICsvKTtcbiAgICBjb25zdCBjbWQgPSB0aGlzLmNyZWF0ZUNvbW1hbmQoYXJncy5zaGlmdCgpKTtcblxuICAgIGlmIChkZXNjKSB7XG4gICAgICBjbWQuZGVzY3JpcHRpb24oZGVzYyk7XG4gICAgICBjbWQuX2V4ZWN1dGFibGVIYW5kbGVyID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKG9wdHMuaXNEZWZhdWx0KSB0aGlzLl9kZWZhdWx0Q29tbWFuZE5hbWUgPSBjbWQuX25hbWU7XG5cbiAgICBjbWQuX291dHB1dENvbmZpZ3VyYXRpb24gPSB0aGlzLl9vdXRwdXRDb25maWd1cmF0aW9uO1xuXG4gICAgY21kLl9oaWRkZW4gPSAhIShvcHRzLm5vSGVscCB8fCBvcHRzLmhpZGRlbik7IC8vIG5vSGVscCBpcyBkZXByZWNhdGVkIG9sZCBuYW1lIGZvciBoaWRkZW5cbiAgICBjbWQuX2hhc0hlbHBPcHRpb24gPSB0aGlzLl9oYXNIZWxwT3B0aW9uO1xuICAgIGNtZC5faGVscEZsYWdzID0gdGhpcy5faGVscEZsYWdzO1xuICAgIGNtZC5faGVscERlc2NyaXB0aW9uID0gdGhpcy5faGVscERlc2NyaXB0aW9uO1xuICAgIGNtZC5faGVscFNob3J0RmxhZyA9IHRoaXMuX2hlbHBTaG9ydEZsYWc7XG4gICAgY21kLl9oZWxwTG9uZ0ZsYWcgPSB0aGlzLl9oZWxwTG9uZ0ZsYWc7XG4gICAgY21kLl9oZWxwQ29tbWFuZE5hbWUgPSB0aGlzLl9oZWxwQ29tbWFuZE5hbWU7XG4gICAgY21kLl9oZWxwQ29tbWFuZG5hbWVBbmRBcmdzID0gdGhpcy5faGVscENvbW1hbmRuYW1lQW5kQXJncztcbiAgICBjbWQuX2hlbHBDb21tYW5kRGVzY3JpcHRpb24gPSB0aGlzLl9oZWxwQ29tbWFuZERlc2NyaXB0aW9uO1xuICAgIGNtZC5faGVscENvbmZpZ3VyYXRpb24gPSB0aGlzLl9oZWxwQ29uZmlndXJhdGlvbjtcbiAgICBjbWQuX2V4aXRDYWxsYmFjayA9IHRoaXMuX2V4aXRDYWxsYmFjaztcbiAgICBjbWQuX3N0b3JlT3B0aW9uc0FzUHJvcGVydGllcyA9IHRoaXMuX3N0b3JlT3B0aW9uc0FzUHJvcGVydGllcztcbiAgICBjbWQuX2NvbWJpbmVGbGFnQW5kT3B0aW9uYWxWYWx1ZSA9IHRoaXMuX2NvbWJpbmVGbGFnQW5kT3B0aW9uYWxWYWx1ZTtcbiAgICBjbWQuX2FsbG93RXhjZXNzQXJndW1lbnRzID0gdGhpcy5fYWxsb3dFeGNlc3NBcmd1bWVudHM7XG4gICAgY21kLl9lbmFibGVQb3NpdGlvbmFsT3B0aW9ucyA9IHRoaXMuX2VuYWJsZVBvc2l0aW9uYWxPcHRpb25zO1xuXG4gICAgY21kLl9leGVjdXRhYmxlRmlsZSA9IG9wdHMuZXhlY3V0YWJsZUZpbGUgfHwgbnVsbDsgLy8gQ3VzdG9tIG5hbWUgZm9yIGV4ZWN1dGFibGUgZmlsZSwgc2V0IG1pc3NpbmcgdG8gbnVsbCB0byBtYXRjaCBjb25zdHJ1Y3RvclxuICAgIHRoaXMuY29tbWFuZHMucHVzaChjbWQpO1xuICAgIGNtZC5fcGFyc2VFeHBlY3RlZEFyZ3MoYXJncyk7XG4gICAgY21kLnBhcmVudCA9IHRoaXM7XG5cbiAgICBpZiAoZGVzYykgcmV0dXJuIHRoaXM7XG4gICAgcmV0dXJuIGNtZDtcbiAgfTtcblxuICAvKipcbiAgICogRmFjdG9yeSByb3V0aW5lIHRvIGNyZWF0ZSBhIG5ldyB1bmF0dGFjaGVkIGNvbW1hbmQuXG4gICAqXG4gICAqIFNlZSAuY29tbWFuZCgpIGZvciBjcmVhdGluZyBhbiBhdHRhY2hlZCBzdWJjb21tYW5kLCB3aGljaCB1c2VzIHRoaXMgcm91dGluZSB0b1xuICAgKiBjcmVhdGUgdGhlIGNvbW1hbmQuIFlvdSBjYW4gb3ZlcnJpZGUgY3JlYXRlQ29tbWFuZCB0byBjdXN0b21pc2Ugc3ViY29tbWFuZHMuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbbmFtZV1cbiAgICogQHJldHVybiB7Q29tbWFuZH0gbmV3IGNvbW1hbmRcbiAgICovXG5cbiAgY3JlYXRlQ29tbWFuZChuYW1lKSB7XG4gICAgcmV0dXJuIG5ldyBDb21tYW5kKG5hbWUpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBZb3UgY2FuIGN1c3RvbWlzZSB0aGUgaGVscCB3aXRoIGEgc3ViY2xhc3Mgb2YgSGVscCBieSBvdmVycmlkaW5nIGNyZWF0ZUhlbHAsXG4gICAqIG9yIGJ5IG92ZXJyaWRpbmcgSGVscCBwcm9wZXJ0aWVzIHVzaW5nIGNvbmZpZ3VyZUhlbHAoKS5cbiAgICpcbiAgICogQHJldHVybiB7SGVscH1cbiAgICovXG5cbiAgY3JlYXRlSGVscCgpIHtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihuZXcgSGVscCgpLCB0aGlzLmNvbmZpZ3VyZUhlbHAoKSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFlvdSBjYW4gY3VzdG9taXNlIHRoZSBoZWxwIGJ5IG92ZXJyaWRpbmcgSGVscCBwcm9wZXJ0aWVzIHVzaW5nIGNvbmZpZ3VyZUhlbHAoKSxcbiAgICogb3Igd2l0aCBhIHN1YmNsYXNzIG9mIEhlbHAgYnkgb3ZlcnJpZGluZyBjcmVhdGVIZWxwKCkuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbY29uZmlndXJhdGlvbl0gLSBjb25maWd1cmF0aW9uIG9wdGlvbnNcbiAgICogQHJldHVybiB7Q29tbWFuZHxPYmplY3R9IGB0aGlzYCBjb21tYW5kIGZvciBjaGFpbmluZywgb3Igc3RvcmVkIGNvbmZpZ3VyYXRpb25cbiAgICovXG5cbiAgY29uZmlndXJlSGVscChjb25maWd1cmF0aW9uKSB7XG4gICAgaWYgKGNvbmZpZ3VyYXRpb24gPT09IHVuZGVmaW5lZCkgcmV0dXJuIHRoaXMuX2hlbHBDb25maWd1cmF0aW9uO1xuXG4gICAgdGhpcy5faGVscENvbmZpZ3VyYXRpb24gPSBjb25maWd1cmF0aW9uO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBkZWZhdWx0IG91dHB1dCBnb2VzIHRvIHN0ZG91dCBhbmQgc3RkZXJyLiBZb3UgY2FuIGN1c3RvbWlzZSB0aGlzIGZvciBzcGVjaWFsXG4gICAqIGFwcGxpY2F0aW9ucy4gWW91IGNhbiBhbHNvIGN1c3RvbWlzZSB0aGUgZGlzcGxheSBvZiBlcnJvcnMgYnkgb3ZlcnJpZGluZyBvdXRwdXRFcnJvci5cbiAgICpcbiAgICogVGhlIGNvbmZpZ3VyYXRpb24gcHJvcGVydGllcyBhcmUgYWxsIGZ1bmN0aW9uczpcbiAgICpcbiAgICogICAgLy8gZnVuY3Rpb25zIHRvIGNoYW5nZSB3aGVyZSBiZWluZyB3cml0dGVuLCBzdGRvdXQgYW5kIHN0ZGVyclxuICAgKiAgICB3cml0ZU91dChzdHIpXG4gICAqICAgIHdyaXRlRXJyKHN0cilcbiAgICogICAgLy8gbWF0Y2hpbmcgZnVuY3Rpb25zIHRvIHNwZWNpZnkgd2lkdGggZm9yIHdyYXBwaW5nIGhlbHBcbiAgICogICAgZ2V0T3V0SGVscFdpZHRoKClcbiAgICogICAgZ2V0RXJySGVscFdpZHRoKClcbiAgICogICAgLy8gZnVuY3Rpb25zIGJhc2VkIG9uIHdoYXQgaXMgYmVpbmcgd3JpdHRlbiBvdXRcbiAgICogICAgb3V0cHV0RXJyb3Ioc3RyLCB3cml0ZSkgLy8gdXNlZCBmb3IgZGlzcGxheWluZyBlcnJvcnMsIGFuZCBub3QgdXNlZCBmb3IgZGlzcGxheWluZyBoZWxwXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbY29uZmlndXJhdGlvbl0gLSBjb25maWd1cmF0aW9uIG9wdGlvbnNcbiAgICogQHJldHVybiB7Q29tbWFuZHxPYmplY3R9IGB0aGlzYCBjb21tYW5kIGZvciBjaGFpbmluZywgb3Igc3RvcmVkIGNvbmZpZ3VyYXRpb25cbiAgICovXG5cbiAgY29uZmlndXJlT3V0cHV0KGNvbmZpZ3VyYXRpb24pIHtcbiAgICBpZiAoY29uZmlndXJhdGlvbiA9PT0gdW5kZWZpbmVkKSByZXR1cm4gdGhpcy5fb3V0cHV0Q29uZmlndXJhdGlvbjtcblxuICAgIE9iamVjdC5hc3NpZ24odGhpcy5fb3V0cHV0Q29uZmlndXJhdGlvbiwgY29uZmlndXJhdGlvbik7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogQWRkIGEgcHJlcGFyZWQgc3ViY29tbWFuZC5cbiAgICpcbiAgICogU2VlIC5jb21tYW5kKCkgZm9yIGNyZWF0aW5nIGFuIGF0dGFjaGVkIHN1YmNvbW1hbmQgd2hpY2ggaW5oZXJpdHMgc2V0dGluZ3MgZnJvbSBpdHMgcGFyZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge0NvbW1hbmR9IGNtZCAtIG5ldyBzdWJjb21tYW5kXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0c10gLSBjb25maWd1cmF0aW9uIG9wdGlvbnNcbiAgICogQHJldHVybiB7Q29tbWFuZH0gYHRoaXNgIGNvbW1hbmQgZm9yIGNoYWluaW5nXG4gICAqL1xuXG4gIGFkZENvbW1hbmQoY21kLCBvcHRzKSB7XG4gICAgaWYgKCFjbWQuX25hbWUpIHRocm93IG5ldyBFcnJvcignQ29tbWFuZCBwYXNzZWQgdG8gLmFkZENvbW1hbmQoKSBtdXN0IGhhdmUgYSBuYW1lJyk7XG5cbiAgICAvLyBUbyBrZWVwIHRoaW5ncyBzaW1wbGUsIGJsb2NrIGF1dG9tYXRpYyBuYW1lIGdlbmVyYXRpb24gZm9yIGRlZXBseSBuZXN0ZWQgZXhlY3V0YWJsZXMuXG4gICAgLy8gRmFpbCBmYXN0IGFuZCBkZXRlY3Qgd2hlbiBhZGRpbmcgcmF0aGVyIHRoYW4gbGF0ZXIgd2hlbiBwYXJzaW5nLlxuICAgIGZ1bmN0aW9uIGNoZWNrRXhwbGljaXROYW1lcyhjb21tYW5kQXJyYXkpIHtcbiAgICAgIGNvbW1hbmRBcnJheS5mb3JFYWNoKChjbWQpID0+IHtcbiAgICAgICAgaWYgKGNtZC5fZXhlY3V0YWJsZUhhbmRsZXIgJiYgIWNtZC5fZXhlY3V0YWJsZUZpbGUpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE11c3Qgc3BlY2lmeSBleGVjdXRhYmxlRmlsZSBmb3IgZGVlcGx5IG5lc3RlZCBleGVjdXRhYmxlOiAke2NtZC5uYW1lKCl9YCk7XG4gICAgICAgIH1cbiAgICAgICAgY2hlY2tFeHBsaWNpdE5hbWVzKGNtZC5jb21tYW5kcyk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgY2hlY2tFeHBsaWNpdE5hbWVzKGNtZC5jb21tYW5kcyk7XG5cbiAgICBvcHRzID0gb3B0cyB8fCB7fTtcbiAgICBpZiAob3B0cy5pc0RlZmF1bHQpIHRoaXMuX2RlZmF1bHRDb21tYW5kTmFtZSA9IGNtZC5fbmFtZTtcbiAgICBpZiAob3B0cy5ub0hlbHAgfHwgb3B0cy5oaWRkZW4pIGNtZC5faGlkZGVuID0gdHJ1ZTsgLy8gbW9kaWZ5aW5nIHBhc3NlZCBjb21tYW5kIGR1ZSB0byBleGlzdGluZyBpbXBsZW1lbnRhdGlvblxuXG4gICAgdGhpcy5jb21tYW5kcy5wdXNoKGNtZCk7XG4gICAgY21kLnBhcmVudCA9IHRoaXM7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIERlZmluZSBhcmd1bWVudCBzeW50YXggZm9yIHRoZSBjb21tYW5kLlxuICAgKi9cblxuICBhcmd1bWVudHMoZGVzYykge1xuICAgIHJldHVybiB0aGlzLl9wYXJzZUV4cGVjdGVkQXJncyhkZXNjLnNwbGl0KC8gKy8pKTtcbiAgfTtcblxuICAvKipcbiAgICogT3ZlcnJpZGUgZGVmYXVsdCBkZWNpc2lvbiB3aGV0aGVyIHRvIGFkZCBpbXBsaWNpdCBoZWxwIGNvbW1hbmQuXG4gICAqXG4gICAqICAgIGFkZEhlbHBDb21tYW5kKCkgLy8gZm9yY2Ugb25cbiAgICogICAgYWRkSGVscENvbW1hbmQoZmFsc2UpOyAvLyBmb3JjZSBvZmZcbiAgICogICAgYWRkSGVscENvbW1hbmQoJ2hlbHAgW2NtZF0nLCAnZGlzcGxheSBoZWxwIGZvciBbY21kXScpOyAvLyBmb3JjZSBvbiB3aXRoIGN1c3RvbSBkZXRhaWxzXG4gICAqXG4gICAqIEByZXR1cm4ge0NvbW1hbmR9IGB0aGlzYCBjb21tYW5kIGZvciBjaGFpbmluZ1xuICAgKi9cblxuICBhZGRIZWxwQ29tbWFuZChlbmFibGVPck5hbWVBbmRBcmdzLCBkZXNjcmlwdGlvbikge1xuICAgIGlmIChlbmFibGVPck5hbWVBbmRBcmdzID09PSBmYWxzZSkge1xuICAgICAgdGhpcy5fYWRkSW1wbGljaXRIZWxwQ29tbWFuZCA9IGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9hZGRJbXBsaWNpdEhlbHBDb21tYW5kID0gdHJ1ZTtcbiAgICAgIGlmICh0eXBlb2YgZW5hYmxlT3JOYW1lQW5kQXJncyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgdGhpcy5faGVscENvbW1hbmROYW1lID0gZW5hYmxlT3JOYW1lQW5kQXJncy5zcGxpdCgnICcpWzBdO1xuICAgICAgICB0aGlzLl9oZWxwQ29tbWFuZG5hbWVBbmRBcmdzID0gZW5hYmxlT3JOYW1lQW5kQXJncztcbiAgICAgIH1cbiAgICAgIHRoaXMuX2hlbHBDb21tYW5kRGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbiB8fCB0aGlzLl9oZWxwQ29tbWFuZERlc2NyaXB0aW9uO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICogQGFwaSBwcml2YXRlXG4gICAqL1xuXG4gIF9oYXNJbXBsaWNpdEhlbHBDb21tYW5kKCkge1xuICAgIGlmICh0aGlzLl9hZGRJbXBsaWNpdEhlbHBDb21tYW5kID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiB0aGlzLmNvbW1hbmRzLmxlbmd0aCAmJiAhdGhpcy5fYWN0aW9uSGFuZGxlciAmJiAhdGhpcy5fZmluZENvbW1hbmQoJ2hlbHAnKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2FkZEltcGxpY2l0SGVscENvbW1hbmQ7XG4gIH07XG5cbiAgLyoqXG4gICAqIFBhcnNlIGV4cGVjdGVkIGBhcmdzYC5cbiAgICpcbiAgICogRm9yIGV4YW1wbGUgYFtcIlt0eXBlXVwiXWAgYmVjb21lcyBgW3sgcmVxdWlyZWQ6IGZhbHNlLCBuYW1lOiAndHlwZScgfV1gLlxuICAgKlxuICAgKiBAcGFyYW0ge0FycmF5fSBhcmdzXG4gICAqIEByZXR1cm4ge0NvbW1hbmR9IGB0aGlzYCBjb21tYW5kIGZvciBjaGFpbmluZ1xuICAgKiBAYXBpIHByaXZhdGVcbiAgICovXG5cbiAgX3BhcnNlRXhwZWN0ZWRBcmdzKGFyZ3MpIHtcbiAgICBpZiAoIWFyZ3MubGVuZ3RoKSByZXR1cm47XG4gICAgYXJncy5mb3JFYWNoKChhcmcpID0+IHtcbiAgICAgIGNvbnN0IGFyZ0RldGFpbHMgPSB7XG4gICAgICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgbmFtZTogJycsXG4gICAgICAgIHZhcmlhZGljOiBmYWxzZVxuICAgICAgfTtcblxuICAgICAgc3dpdGNoIChhcmdbMF0pIHtcbiAgICAgICAgY2FzZSAnPCc6XG4gICAgICAgICAgYXJnRGV0YWlscy5yZXF1aXJlZCA9IHRydWU7XG4gICAgICAgICAgYXJnRGV0YWlscy5uYW1lID0gYXJnLnNsaWNlKDEsIC0xKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnWyc6XG4gICAgICAgICAgYXJnRGV0YWlscy5uYW1lID0gYXJnLnNsaWNlKDEsIC0xKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgaWYgKGFyZ0RldGFpbHMubmFtZS5sZW5ndGggPiAzICYmIGFyZ0RldGFpbHMubmFtZS5zbGljZSgtMykgPT09ICcuLi4nKSB7XG4gICAgICAgIGFyZ0RldGFpbHMudmFyaWFkaWMgPSB0cnVlO1xuICAgICAgICBhcmdEZXRhaWxzLm5hbWUgPSBhcmdEZXRhaWxzLm5hbWUuc2xpY2UoMCwgLTMpO1xuICAgICAgfVxuICAgICAgaWYgKGFyZ0RldGFpbHMubmFtZSkge1xuICAgICAgICB0aGlzLl9hcmdzLnB1c2goYXJnRGV0YWlscyk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5fYXJncy5mb3JFYWNoKChhcmcsIGkpID0+IHtcbiAgICAgIGlmIChhcmcudmFyaWFkaWMgJiYgaSA8IHRoaXMuX2FyZ3MubGVuZ3RoIC0gMSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYG9ubHkgdGhlIGxhc3QgYXJndW1lbnQgY2FuIGJlIHZhcmlhZGljICcke2FyZy5uYW1lfSdgKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogUmVnaXN0ZXIgY2FsbGJhY2sgdG8gdXNlIGFzIHJlcGxhY2VtZW50IGZvciBjYWxsaW5nIHByb2Nlc3MuZXhpdC5cbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2ZuXSBvcHRpb25hbCBjYWxsYmFjayB3aGljaCB3aWxsIGJlIHBhc3NlZCBhIENvbW1hbmRlckVycm9yLCBkZWZhdWx0cyB0byB0aHJvd2luZ1xuICAgKiBAcmV0dXJuIHtDb21tYW5kfSBgdGhpc2AgY29tbWFuZCBmb3IgY2hhaW5pbmdcbiAgICovXG5cbiAgZXhpdE92ZXJyaWRlKGZuKSB7XG4gICAgaWYgKGZuKSB7XG4gICAgICB0aGlzLl9leGl0Q2FsbGJhY2sgPSBmbjtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fZXhpdENhbGxiYWNrID0gKGVycikgPT4ge1xuICAgICAgICBpZiAoZXJyLmNvZGUgIT09ICdjb21tYW5kZXIuZXhlY3V0ZVN1YkNvbW1hbmRBc3luYycpIHtcbiAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gQXN5bmMgY2FsbGJhY2sgZnJvbSBzcGF3biBldmVudHMsIG5vdCB1c2VmdWwgdG8gdGhyb3cuXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDYWxsIHByb2Nlc3MuZXhpdCwgYW5kIF9leGl0Q2FsbGJhY2sgaWYgZGVmaW5lZC5cbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IGV4aXRDb2RlIGV4aXQgY29kZSBmb3IgdXNpbmcgd2l0aCBwcm9jZXNzLmV4aXRcbiAgICogQHBhcmFtIHtzdHJpbmd9IGNvZGUgYW4gaWQgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgZXJyb3JcbiAgICogQHBhcmFtIHtzdHJpbmd9IG1lc3NhZ2UgaHVtYW4tcmVhZGFibGUgZGVzY3JpcHRpb24gb2YgdGhlIGVycm9yXG4gICAqIEByZXR1cm4gbmV2ZXJcbiAgICogQGFwaSBwcml2YXRlXG4gICAqL1xuXG4gIF9leGl0KGV4aXRDb2RlLCBjb2RlLCBtZXNzYWdlKSB7XG4gICAgaWYgKHRoaXMuX2V4aXRDYWxsYmFjaykge1xuICAgICAgdGhpcy5fZXhpdENhbGxiYWNrKG5ldyBDb21tYW5kZXJFcnJvcihleGl0Q29kZSwgY29kZSwgbWVzc2FnZSkpO1xuICAgICAgLy8gRXhwZWN0aW5nIHRoaXMgbGluZSBpcyBub3QgcmVhY2hlZC5cbiAgICB9XG4gICAgcHJvY2Vzcy5leGl0KGV4aXRDb2RlKTtcbiAgfTtcblxuICAvKipcbiAgICogUmVnaXN0ZXIgY2FsbGJhY2sgYGZuYCBmb3IgdGhlIGNvbW1hbmQuXG4gICAqXG4gICAqIEV4YW1wbGVzOlxuICAgKlxuICAgKiAgICAgIHByb2dyYW1cbiAgICogICAgICAgIC5jb21tYW5kKCdoZWxwJylcbiAgICogICAgICAgIC5kZXNjcmlwdGlvbignZGlzcGxheSB2ZXJib3NlIGhlbHAnKVxuICAgKiAgICAgICAgLmFjdGlvbihmdW5jdGlvbigpIHtcbiAgICogICAgICAgICAgIC8vIG91dHB1dCBoZWxwIGhlcmVcbiAgICogICAgICAgIH0pO1xuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICAgKiBAcmV0dXJuIHtDb21tYW5kfSBgdGhpc2AgY29tbWFuZCBmb3IgY2hhaW5pbmdcbiAgICovXG5cbiAgYWN0aW9uKGZuKSB7XG4gICAgY29uc3QgbGlzdGVuZXIgPSAoYXJncykgPT4ge1xuICAgICAgLy8gVGhlIC5hY3Rpb24gY2FsbGJhY2sgdGFrZXMgYW4gZXh0cmEgcGFyYW1ldGVyIHdoaWNoIGlzIHRoZSBjb21tYW5kIG9yIG9wdGlvbnMuXG4gICAgICBjb25zdCBleHBlY3RlZEFyZ3NDb3VudCA9IHRoaXMuX2FyZ3MubGVuZ3RoO1xuICAgICAgY29uc3QgYWN0aW9uQXJncyA9IGFyZ3Muc2xpY2UoMCwgZXhwZWN0ZWRBcmdzQ291bnQpO1xuICAgICAgaWYgKHRoaXMuX3N0b3JlT3B0aW9uc0FzUHJvcGVydGllcykge1xuICAgICAgICBhY3Rpb25BcmdzW2V4cGVjdGVkQXJnc0NvdW50XSA9IHRoaXM7IC8vIGJhY2t3YXJkcyBjb21wYXRpYmxlIFwib3B0aW9uc1wiXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhY3Rpb25BcmdzW2V4cGVjdGVkQXJnc0NvdW50XSA9IHRoaXMub3B0cygpO1xuICAgICAgfVxuICAgICAgYWN0aW9uQXJncy5wdXNoKHRoaXMpO1xuXG4gICAgICBjb25zdCBhY3Rpb25SZXN1bHQgPSBmbi5hcHBseSh0aGlzLCBhY3Rpb25BcmdzKTtcbiAgICAgIC8vIFJlbWVtYmVyIHJlc3VsdCBpbiBjYXNlIGl0IGlzIGFzeW5jLiBBc3N1bWUgcGFyc2VBc3luYyBnZXR0aW5nIGNhbGxlZCBvbiByb290LlxuICAgICAgbGV0IHJvb3RDb21tYW5kID0gdGhpcztcbiAgICAgIHdoaWxlIChyb290Q29tbWFuZC5wYXJlbnQpIHtcbiAgICAgICAgcm9vdENvbW1hbmQgPSByb290Q29tbWFuZC5wYXJlbnQ7XG4gICAgICB9XG4gICAgICByb290Q29tbWFuZC5fYWN0aW9uUmVzdWx0cy5wdXNoKGFjdGlvblJlc3VsdCk7XG4gICAgfTtcbiAgICB0aGlzLl9hY3Rpb25IYW5kbGVyID0gbGlzdGVuZXI7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIEZhY3Rvcnkgcm91dGluZSB0byBjcmVhdGUgYSBuZXcgdW5hdHRhY2hlZCBvcHRpb24uXG4gICAqXG4gICAqIFNlZSAub3B0aW9uKCkgZm9yIGNyZWF0aW5nIGFuIGF0dGFjaGVkIG9wdGlvbiwgd2hpY2ggdXNlcyB0aGlzIHJvdXRpbmUgdG9cbiAgICogY3JlYXRlIHRoZSBvcHRpb24uIFlvdSBjYW4gb3ZlcnJpZGUgY3JlYXRlT3B0aW9uIHRvIHJldHVybiBhIGN1c3RvbSBvcHRpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmbGFnc1xuICAgKiBAcGFyYW0ge3N0cmluZ30gW2Rlc2NyaXB0aW9uXVxuICAgKiBAcmV0dXJuIHtPcHRpb259IG5ldyBvcHRpb25cbiAgICovXG5cbiAgY3JlYXRlT3B0aW9uKGZsYWdzLCBkZXNjcmlwdGlvbikge1xuICAgIHJldHVybiBuZXcgT3B0aW9uKGZsYWdzLCBkZXNjcmlwdGlvbik7XG4gIH07XG5cbiAgLyoqXG4gICAqIEFkZCBhbiBvcHRpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7T3B0aW9ufSBvcHRpb25cbiAgICogQHJldHVybiB7Q29tbWFuZH0gYHRoaXNgIGNvbW1hbmQgZm9yIGNoYWluaW5nXG4gICAqL1xuICBhZGRPcHRpb24ob3B0aW9uKSB7XG4gICAgY29uc3Qgb25hbWUgPSBvcHRpb24ubmFtZSgpO1xuICAgIGNvbnN0IG5hbWUgPSBvcHRpb24uYXR0cmlidXRlTmFtZSgpO1xuXG4gICAgbGV0IGRlZmF1bHRWYWx1ZSA9IG9wdGlvbi5kZWZhdWx0VmFsdWU7XG5cbiAgICAvLyBwcmVhc3NpZ24gZGVmYXVsdCB2YWx1ZSBmb3IgLS1uby0qLCBbb3B0aW9uYWxdLCA8cmVxdWlyZWQ+LCBvciBwbGFpbiBmbGFnIGlmIGJvb2xlYW4gdmFsdWVcbiAgICBpZiAob3B0aW9uLm5lZ2F0ZSB8fCBvcHRpb24ub3B0aW9uYWwgfHwgb3B0aW9uLnJlcXVpcmVkIHx8IHR5cGVvZiBkZWZhdWx0VmFsdWUgPT09ICdib29sZWFuJykge1xuICAgICAgLy8gd2hlbiAtLW5vLWZvbyB3ZSBtYWtlIHN1cmUgZGVmYXVsdCBpcyB0cnVlLCB1bmxlc3MgYSAtLWZvbyBvcHRpb24gaXMgYWxyZWFkeSBkZWZpbmVkXG4gICAgICBpZiAob3B0aW9uLm5lZ2F0ZSkge1xuICAgICAgICBjb25zdCBwb3NpdGl2ZUxvbmdGbGFnID0gb3B0aW9uLmxvbmcucmVwbGFjZSgvXi0tbm8tLywgJy0tJyk7XG4gICAgICAgIGRlZmF1bHRWYWx1ZSA9IHRoaXMuX2ZpbmRPcHRpb24ocG9zaXRpdmVMb25nRmxhZykgPyB0aGlzLl9nZXRPcHRpb25WYWx1ZShuYW1lKSA6IHRydWU7XG4gICAgICB9XG4gICAgICAvLyBwcmVhc3NpZ24gb25seSBpZiB3ZSBoYXZlIGEgZGVmYXVsdFxuICAgICAgaWYgKGRlZmF1bHRWYWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRoaXMuX3NldE9wdGlvblZhbHVlKG5hbWUsIGRlZmF1bHRWYWx1ZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gcmVnaXN0ZXIgdGhlIG9wdGlvblxuICAgIHRoaXMub3B0aW9ucy5wdXNoKG9wdGlvbik7XG5cbiAgICAvLyB3aGVuIGl0J3MgcGFzc2VkIGFzc2lnbiB0aGUgdmFsdWVcbiAgICAvLyBhbmQgY29uZGl0aW9uYWxseSBpbnZva2UgdGhlIGNhbGxiYWNrXG4gICAgdGhpcy5vbignb3B0aW9uOicgKyBvbmFtZSwgKHZhbCkgPT4ge1xuICAgICAgY29uc3Qgb2xkVmFsdWUgPSB0aGlzLl9nZXRPcHRpb25WYWx1ZShuYW1lKTtcblxuICAgICAgLy8gY3VzdG9tIHByb2Nlc3NpbmdcbiAgICAgIGlmICh2YWwgIT09IG51bGwgJiYgb3B0aW9uLnBhcnNlQXJnKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgdmFsID0gb3B0aW9uLnBhcnNlQXJnKHZhbCwgb2xkVmFsdWUgPT09IHVuZGVmaW5lZCA/IGRlZmF1bHRWYWx1ZSA6IG9sZFZhbHVlKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgaWYgKGVyci5jb2RlID09PSAnY29tbWFuZGVyLmludmFsaWRPcHRpb25Bcmd1bWVudCcpIHtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBgZXJyb3I6IG9wdGlvbiAnJHtvcHRpb24uZmxhZ3N9JyBhcmd1bWVudCAnJHt2YWx9JyBpcyBpbnZhbGlkLiAke2Vyci5tZXNzYWdlfWA7XG4gICAgICAgICAgICB0aGlzLl9kaXNwbGF5RXJyb3IoZXJyLmV4aXRDb2RlLCBlcnIuY29kZSwgbWVzc2FnZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh2YWwgIT09IG51bGwgJiYgb3B0aW9uLnZhcmlhZGljKSB7XG4gICAgICAgIHZhbCA9IG9wdGlvbi5fY29uY2F0VmFsdWUodmFsLCBvbGRWYWx1ZSk7XG4gICAgICB9XG5cbiAgICAgIC8vIHVuYXNzaWduZWQgb3IgYm9vbGVhbiB2YWx1ZVxuICAgICAgaWYgKHR5cGVvZiBvbGRWYWx1ZSA9PT0gJ2Jvb2xlYW4nIHx8IHR5cGVvZiBvbGRWYWx1ZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgLy8gaWYgbm8gdmFsdWUsIG5lZ2F0ZSBmYWxzZSwgYW5kIHdlIGhhdmUgYSBkZWZhdWx0LCB0aGVuIHVzZSBpdCFcbiAgICAgICAgaWYgKHZhbCA9PSBudWxsKSB7XG4gICAgICAgICAgdGhpcy5fc2V0T3B0aW9uVmFsdWUobmFtZSwgb3B0aW9uLm5lZ2F0ZVxuICAgICAgICAgICAgPyBmYWxzZVxuICAgICAgICAgICAgOiBkZWZhdWx0VmFsdWUgfHwgdHJ1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5fc2V0T3B0aW9uVmFsdWUobmFtZSwgdmFsKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh2YWwgIT09IG51bGwpIHtcbiAgICAgICAgLy8gcmVhc3NpZ25cbiAgICAgICAgdGhpcy5fc2V0T3B0aW9uVmFsdWUobmFtZSwgb3B0aW9uLm5lZ2F0ZSA/IGZhbHNlIDogdmFsKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIEludGVybmFsIGltcGxlbWVudGF0aW9uIHNoYXJlZCBieSAub3B0aW9uKCkgYW5kIC5yZXF1aXJlZE9wdGlvbigpXG4gICAqXG4gICAqIEBhcGkgcHJpdmF0ZVxuICAgKi9cbiAgX29wdGlvbkV4KGNvbmZpZywgZmxhZ3MsIGRlc2NyaXB0aW9uLCBmbiwgZGVmYXVsdFZhbHVlKSB7XG4gICAgY29uc3Qgb3B0aW9uID0gdGhpcy5jcmVhdGVPcHRpb24oZmxhZ3MsIGRlc2NyaXB0aW9uKTtcbiAgICBvcHRpb24ubWFrZU9wdGlvbk1hbmRhdG9yeSghIWNvbmZpZy5tYW5kYXRvcnkpO1xuICAgIGlmICh0eXBlb2YgZm4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIG9wdGlvbi5kZWZhdWx0KGRlZmF1bHRWYWx1ZSkuYXJnUGFyc2VyKGZuKTtcbiAgICB9IGVsc2UgaWYgKGZuIGluc3RhbmNlb2YgUmVnRXhwKSB7XG4gICAgICAvLyBkZXByZWNhdGVkXG4gICAgICBjb25zdCByZWdleCA9IGZuO1xuICAgICAgZm4gPSAodmFsLCBkZWYpID0+IHtcbiAgICAgICAgY29uc3QgbSA9IHJlZ2V4LmV4ZWModmFsKTtcbiAgICAgICAgcmV0dXJuIG0gPyBtWzBdIDogZGVmO1xuICAgICAgfTtcbiAgICAgIG9wdGlvbi5kZWZhdWx0KGRlZmF1bHRWYWx1ZSkuYXJnUGFyc2VyKGZuKTtcbiAgICB9IGVsc2Uge1xuICAgICAgb3B0aW9uLmRlZmF1bHQoZm4pO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmFkZE9wdGlvbihvcHRpb24pO1xuICB9XG5cbiAgLyoqXG4gICAqIERlZmluZSBvcHRpb24gd2l0aCBgZmxhZ3NgLCBgZGVzY3JpcHRpb25gIGFuZCBvcHRpb25hbFxuICAgKiBjb2VyY2lvbiBgZm5gLlxuICAgKlxuICAgKiBUaGUgYGZsYWdzYCBzdHJpbmcgY29udGFpbnMgdGhlIHNob3J0IGFuZC9vciBsb25nIGZsYWdzLFxuICAgKiBzZXBhcmF0ZWQgYnkgY29tbWEsIGEgcGlwZSBvciBzcGFjZS4gVGhlIGZvbGxvd2luZyBhcmUgYWxsIHZhbGlkXG4gICAqIGFsbCB3aWxsIG91dHB1dCB0aGlzIHdheSB3aGVuIGAtLWhlbHBgIGlzIHVzZWQuXG4gICAqXG4gICAqICAgIFwiLXAsIC0tcGVwcGVyXCJcbiAgICogICAgXCItcHwtLXBlcHBlclwiXG4gICAqICAgIFwiLXAgLS1wZXBwZXJcIlxuICAgKlxuICAgKiBFeGFtcGxlczpcbiAgICpcbiAgICogICAgIC8vIHNpbXBsZSBib29sZWFuIGRlZmF1bHRpbmcgdG8gdW5kZWZpbmVkXG4gICAqICAgICBwcm9ncmFtLm9wdGlvbignLXAsIC0tcGVwcGVyJywgJ2FkZCBwZXBwZXInKTtcbiAgICpcbiAgICogICAgIHByb2dyYW0ucGVwcGVyXG4gICAqICAgICAvLyA9PiB1bmRlZmluZWRcbiAgICpcbiAgICogICAgIC0tcGVwcGVyXG4gICAqICAgICBwcm9ncmFtLnBlcHBlclxuICAgKiAgICAgLy8gPT4gdHJ1ZVxuICAgKlxuICAgKiAgICAgLy8gc2ltcGxlIGJvb2xlYW4gZGVmYXVsdGluZyB0byB0cnVlICh1bmxlc3Mgbm9uLW5lZ2F0ZWQgb3B0aW9uIGlzIGFsc28gZGVmaW5lZClcbiAgICogICAgIHByb2dyYW0ub3B0aW9uKCctQywgLS1uby1jaGVlc2UnLCAncmVtb3ZlIGNoZWVzZScpO1xuICAgKlxuICAgKiAgICAgcHJvZ3JhbS5jaGVlc2VcbiAgICogICAgIC8vID0+IHRydWVcbiAgICpcbiAgICogICAgIC0tbm8tY2hlZXNlXG4gICAqICAgICBwcm9ncmFtLmNoZWVzZVxuICAgKiAgICAgLy8gPT4gZmFsc2VcbiAgICpcbiAgICogICAgIC8vIHJlcXVpcmVkIGFyZ3VtZW50XG4gICAqICAgICBwcm9ncmFtLm9wdGlvbignLUMsIC0tY2hkaXIgPHBhdGg+JywgJ2NoYW5nZSB0aGUgd29ya2luZyBkaXJlY3RvcnknKTtcbiAgICpcbiAgICogICAgIC0tY2hkaXIgL3RtcFxuICAgKiAgICAgcHJvZ3JhbS5jaGRpclxuICAgKiAgICAgLy8gPT4gXCIvdG1wXCJcbiAgICpcbiAgICogICAgIC8vIG9wdGlvbmFsIGFyZ3VtZW50XG4gICAqICAgICBwcm9ncmFtLm9wdGlvbignLWMsIC0tY2hlZXNlIFt0eXBlXScsICdhZGQgY2hlZXNlIFttYXJibGVdJyk7XG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmbGFnc1xuICAgKiBAcGFyYW0ge3N0cmluZ30gW2Rlc2NyaXB0aW9uXVxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufCp9IFtmbl0gLSBjdXN0b20gb3B0aW9uIHByb2Nlc3NpbmcgZnVuY3Rpb24gb3IgZGVmYXVsdCB2YWx1ZVxuICAgKiBAcGFyYW0geyp9IFtkZWZhdWx0VmFsdWVdXG4gICAqIEByZXR1cm4ge0NvbW1hbmR9IGB0aGlzYCBjb21tYW5kIGZvciBjaGFpbmluZ1xuICAgKi9cblxuICBvcHRpb24oZmxhZ3MsIGRlc2NyaXB0aW9uLCBmbiwgZGVmYXVsdFZhbHVlKSB7XG4gICAgcmV0dXJuIHRoaXMuX29wdGlvbkV4KHt9LCBmbGFncywgZGVzY3JpcHRpb24sIGZuLCBkZWZhdWx0VmFsdWUpO1xuICB9O1xuXG4gIC8qKlxuICAqIEFkZCBhIHJlcXVpcmVkIG9wdGlvbiB3aGljaCBtdXN0IGhhdmUgYSB2YWx1ZSBhZnRlciBwYXJzaW5nLiBUaGlzIHVzdWFsbHkgbWVhbnNcbiAgKiB0aGUgb3B0aW9uIG11c3QgYmUgc3BlY2lmaWVkIG9uIHRoZSBjb21tYW5kIGxpbmUuIChPdGhlcndpc2UgdGhlIHNhbWUgYXMgLm9wdGlvbigpLilcbiAgKlxuICAqIFRoZSBgZmxhZ3NgIHN0cmluZyBjb250YWlucyB0aGUgc2hvcnQgYW5kL29yIGxvbmcgZmxhZ3MsIHNlcGFyYXRlZCBieSBjb21tYSwgYSBwaXBlIG9yIHNwYWNlLlxuICAqXG4gICogQHBhcmFtIHtzdHJpbmd9IGZsYWdzXG4gICogQHBhcmFtIHtzdHJpbmd9IFtkZXNjcmlwdGlvbl1cbiAgKiBAcGFyYW0ge0Z1bmN0aW9ufCp9IFtmbl0gLSBjdXN0b20gb3B0aW9uIHByb2Nlc3NpbmcgZnVuY3Rpb24gb3IgZGVmYXVsdCB2YWx1ZVxuICAqIEBwYXJhbSB7Kn0gW2RlZmF1bHRWYWx1ZV1cbiAgKiBAcmV0dXJuIHtDb21tYW5kfSBgdGhpc2AgY29tbWFuZCBmb3IgY2hhaW5pbmdcbiAgKi9cblxuICByZXF1aXJlZE9wdGlvbihmbGFncywgZGVzY3JpcHRpb24sIGZuLCBkZWZhdWx0VmFsdWUpIHtcbiAgICByZXR1cm4gdGhpcy5fb3B0aW9uRXgoeyBtYW5kYXRvcnk6IHRydWUgfSwgZmxhZ3MsIGRlc2NyaXB0aW9uLCBmbiwgZGVmYXVsdFZhbHVlKTtcbiAgfTtcblxuICAvKipcbiAgICogQWx0ZXIgcGFyc2luZyBvZiBzaG9ydCBmbGFncyB3aXRoIG9wdGlvbmFsIHZhbHVlcy5cbiAgICpcbiAgICogRXhhbXBsZXM6XG4gICAqXG4gICAqICAgIC8vIGZvciBgLm9wdGlvbignLWYsLS1mbGFnIFt2YWx1ZV0nKTpcbiAgICogICAgLmNvbWJpbmVGbGFnQW5kT3B0aW9uYWxWYWx1ZSh0cnVlKSAgLy8gYC1mODBgIGlzIHRyZWF0ZWQgbGlrZSBgLS1mbGFnPTgwYCwgdGhpcyBpcyB0aGUgZGVmYXVsdCBiZWhhdmlvdXJcbiAgICogICAgLmNvbWJpbmVGbGFnQW5kT3B0aW9uYWxWYWx1ZShmYWxzZSkgLy8gYC1mYmAgaXMgdHJlYXRlZCBsaWtlIGAtZiAtYmBcbiAgICpcbiAgICogQHBhcmFtIHtCb29sZWFufSBbY29tYmluZT10cnVlXSAtIGlmIGB0cnVlYCBvciBvbWl0dGVkLCBhbiBvcHRpb25hbCB2YWx1ZSBjYW4gYmUgc3BlY2lmaWVkIGRpcmVjdGx5IGFmdGVyIHRoZSBmbGFnLlxuICAgKi9cbiAgY29tYmluZUZsYWdBbmRPcHRpb25hbFZhbHVlKGNvbWJpbmUgPSB0cnVlKSB7XG4gICAgdGhpcy5fY29tYmluZUZsYWdBbmRPcHRpb25hbFZhbHVlID0gISFjb21iaW5lO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBbGxvdyB1bmtub3duIG9wdGlvbnMgb24gdGhlIGNvbW1hbmQgbGluZS5cbiAgICpcbiAgICogQHBhcmFtIHtCb29sZWFufSBbYWxsb3dVbmtub3duPXRydWVdIC0gaWYgYHRydWVgIG9yIG9taXR0ZWQsIG5vIGVycm9yIHdpbGwgYmUgdGhyb3duXG4gICAqIGZvciB1bmtub3duIG9wdGlvbnMuXG4gICAqL1xuICBhbGxvd1Vua25vd25PcHRpb24oYWxsb3dVbmtub3duID0gdHJ1ZSkge1xuICAgIHRoaXMuX2FsbG93VW5rbm93bk9wdGlvbiA9ICEhYWxsb3dVbmtub3duO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBbGxvdyBleGNlc3MgY29tbWFuZC1hcmd1bWVudHMgb24gdGhlIGNvbW1hbmQgbGluZS4gUGFzcyBmYWxzZSB0byBtYWtlIGV4Y2VzcyBhcmd1bWVudHMgYW4gZXJyb3IuXG4gICAqXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW2FsbG93RXhjZXNzPXRydWVdIC0gaWYgYHRydWVgIG9yIG9taXR0ZWQsIG5vIGVycm9yIHdpbGwgYmUgdGhyb3duXG4gICAqIGZvciBleGNlc3MgYXJndW1lbnRzLlxuICAgKi9cbiAgYWxsb3dFeGNlc3NBcmd1bWVudHMoYWxsb3dFeGNlc3MgPSB0cnVlKSB7XG4gICAgdGhpcy5fYWxsb3dFeGNlc3NBcmd1bWVudHMgPSAhIWFsbG93RXhjZXNzO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBFbmFibGUgcG9zaXRpb25hbCBvcHRpb25zLiBQb3NpdGlvbmFsIG1lYW5zIGdsb2JhbCBvcHRpb25zIGFyZSBzcGVjaWZpZWQgYmVmb3JlIHN1YmNvbW1hbmRzIHdoaWNoIGxldHNcbiAgICogc3ViY29tbWFuZHMgcmV1c2UgdGhlIHNhbWUgb3B0aW9uIG5hbWVzLCBhbmQgYWxzbyBlbmFibGVzIHN1YmNvbW1hbmRzIHRvIHR1cm4gb24gcGFzc1Rocm91Z2hPcHRpb25zLlxuICAgKiBUaGUgZGVmYXVsdCBiZWhhdmlvdXIgaXMgbm9uLXBvc2l0aW9uYWwgYW5kIGdsb2JhbCBvcHRpb25zIG1heSBhcHBlYXIgYW55d2hlcmUgb24gdGhlIGNvbW1hbmQgbGluZS5cbiAgICpcbiAgICogQHBhcmFtIHtCb29sZWFufSBbcG9zaXRpb25hbD10cnVlXVxuICAgKi9cbiAgZW5hYmxlUG9zaXRpb25hbE9wdGlvbnMocG9zaXRpb25hbCA9IHRydWUpIHtcbiAgICB0aGlzLl9lbmFibGVQb3NpdGlvbmFsT3B0aW9ucyA9ICEhcG9zaXRpb25hbDtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogUGFzcyB0aHJvdWdoIG9wdGlvbnMgdGhhdCBjb21lIGFmdGVyIGNvbW1hbmQtYXJndW1lbnRzIHJhdGhlciB0aGFuIHRyZWF0IHRoZW0gYXMgY29tbWFuZC1vcHRpb25zLFxuICAgKiBzbyBhY3R1YWwgY29tbWFuZC1vcHRpb25zIGNvbWUgYmVmb3JlIGNvbW1hbmQtYXJndW1lbnRzLiBUdXJuaW5nIHRoaXMgb24gZm9yIGEgc3ViY29tbWFuZCByZXF1aXJlc1xuICAgKiBwb3NpdGlvbmFsIG9wdGlvbnMgdG8gaGF2ZSBiZWVuIGVuYWJsZWQgb24gdGhlIHByb2dyYW0gKHBhcmVudCBjb21tYW5kcykuXG4gICAqIFRoZSBkZWZhdWx0IGJlaGF2aW91ciBpcyBub24tcG9zaXRpb25hbCBhbmQgb3B0aW9ucyBtYXkgYXBwZWFyIGJlZm9yZSBvciBhZnRlciBjb21tYW5kLWFyZ3VtZW50cy5cbiAgICpcbiAgICogQHBhcmFtIHtCb29sZWFufSBbcGFzc1Rocm91Z2g9dHJ1ZV1cbiAgICogZm9yIHVua25vd24gb3B0aW9ucy5cbiAgICovXG4gIHBhc3NUaHJvdWdoT3B0aW9ucyhwYXNzVGhyb3VnaCA9IHRydWUpIHtcbiAgICB0aGlzLl9wYXNzVGhyb3VnaE9wdGlvbnMgPSAhIXBhc3NUaHJvdWdoO1xuICAgIGlmICghIXRoaXMucGFyZW50ICYmIHBhc3NUaHJvdWdoICYmICF0aGlzLnBhcmVudC5fZW5hYmxlUG9zaXRpb25hbE9wdGlvbnMpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcigncGFzc1Rocm91Z2hPcHRpb25zIGNhbiBub3QgYmUgdXNlZCB3aXRob3V0IHR1cm5pbmcgb24gZW5hYmxlUG9zaXRpb25hbE9wdGlvbnMgZm9yIHBhcmVudCBjb21tYW5kKHMpJyk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgICogV2hldGhlciB0byBzdG9yZSBvcHRpb24gdmFsdWVzIGFzIHByb3BlcnRpZXMgb24gY29tbWFuZCBvYmplY3QsXG4gICAgKiBvciBzdG9yZSBzZXBhcmF0ZWx5IChzcGVjaWZ5IGZhbHNlKS4gSW4gYm90aCBjYXNlcyB0aGUgb3B0aW9uIHZhbHVlcyBjYW4gYmUgYWNjZXNzZWQgdXNpbmcgLm9wdHMoKS5cbiAgICAqXG4gICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtzdG9yZUFzUHJvcGVydGllcz10cnVlXVxuICAgICogQHJldHVybiB7Q29tbWFuZH0gYHRoaXNgIGNvbW1hbmQgZm9yIGNoYWluaW5nXG4gICAgKi9cblxuICBzdG9yZU9wdGlvbnNBc1Byb3BlcnRpZXMoc3RvcmVBc1Byb3BlcnRpZXMgPSB0cnVlKSB7XG4gICAgdGhpcy5fc3RvcmVPcHRpb25zQXNQcm9wZXJ0aWVzID0gISFzdG9yZUFzUHJvcGVydGllcztcbiAgICBpZiAodGhpcy5vcHRpb25zLmxlbmd0aCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdjYWxsIC5zdG9yZU9wdGlvbnNBc1Byb3BlcnRpZXMoKSBiZWZvcmUgYWRkaW5nIG9wdGlvbnMnKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIFN0b3JlIG9wdGlvbiB2YWx1ZVxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5XG4gICAqIEBwYXJhbSB7T2JqZWN0fSB2YWx1ZVxuICAgKiBAYXBpIHByaXZhdGVcbiAgICovXG5cbiAgX3NldE9wdGlvblZhbHVlKGtleSwgdmFsdWUpIHtcbiAgICBpZiAodGhpcy5fc3RvcmVPcHRpb25zQXNQcm9wZXJ0aWVzKSB7XG4gICAgICB0aGlzW2tleV0gPSB2YWx1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fb3B0aW9uVmFsdWVzW2tleV0gPSB2YWx1ZTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHJpZXZlIG9wdGlvbiB2YWx1ZVxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5XG4gICAqIEByZXR1cm4ge09iamVjdH0gdmFsdWVcbiAgICogQGFwaSBwcml2YXRlXG4gICAqL1xuXG4gIF9nZXRPcHRpb25WYWx1ZShrZXkpIHtcbiAgICBpZiAodGhpcy5fc3RvcmVPcHRpb25zQXNQcm9wZXJ0aWVzKSB7XG4gICAgICByZXR1cm4gdGhpc1trZXldO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fb3B0aW9uVmFsdWVzW2tleV07XG4gIH07XG5cbiAgLyoqXG4gICAqIFBhcnNlIGBhcmd2YCwgc2V0dGluZyBvcHRpb25zIGFuZCBpbnZva2luZyBjb21tYW5kcyB3aGVuIGRlZmluZWQuXG4gICAqXG4gICAqIFRoZSBkZWZhdWx0IGV4cGVjdGF0aW9uIGlzIHRoYXQgdGhlIGFyZ3VtZW50cyBhcmUgZnJvbSBub2RlIGFuZCBoYXZlIHRoZSBhcHBsaWNhdGlvbiBhcyBhcmd2WzBdXG4gICAqIGFuZCB0aGUgc2NyaXB0IGJlaW5nIHJ1biBpbiBhcmd2WzFdLCB3aXRoIHVzZXIgcGFyYW1ldGVycyBhZnRlciB0aGF0LlxuICAgKlxuICAgKiBFeGFtcGxlczpcbiAgICpcbiAgICogICAgICBwcm9ncmFtLnBhcnNlKHByb2Nlc3MuYXJndik7XG4gICAqICAgICAgcHJvZ3JhbS5wYXJzZSgpOyAvLyBpbXBsaWNpdGx5IHVzZSBwcm9jZXNzLmFyZ3YgYW5kIGF1dG8tZGV0ZWN0IG5vZGUgdnMgZWxlY3Ryb24gY29udmVudGlvbnNcbiAgICogICAgICBwcm9ncmFtLnBhcnNlKG15LWFyZ3MsIHsgZnJvbTogJ3VzZXInIH0pOyAvLyBqdXN0IHVzZXIgc3VwcGxpZWQgYXJndW1lbnRzLCBub3RoaW5nIHNwZWNpYWwgYWJvdXQgYXJndlswXVxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSBbYXJndl0gLSBvcHRpb25hbCwgZGVmYXVsdHMgdG8gcHJvY2Vzcy5hcmd2XG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbcGFyc2VPcHRpb25zXSAtIG9wdGlvbmFsbHkgc3BlY2lmeSBzdHlsZSBvZiBvcHRpb25zIHdpdGggZnJvbTogbm9kZS91c2VyL2VsZWN0cm9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbcGFyc2VPcHRpb25zLmZyb21dIC0gd2hlcmUgdGhlIGFyZ3MgYXJlIGZyb206ICdub2RlJywgJ3VzZXInLCAnZWxlY3Ryb24nXG4gICAqIEByZXR1cm4ge0NvbW1hbmR9IGB0aGlzYCBjb21tYW5kIGZvciBjaGFpbmluZ1xuICAgKi9cblxuICBwYXJzZShhcmd2LCBwYXJzZU9wdGlvbnMpIHtcbiAgICBpZiAoYXJndiAhPT0gdW5kZWZpbmVkICYmICFBcnJheS5pc0FycmF5KGFyZ3YpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ZpcnN0IHBhcmFtZXRlciB0byBwYXJzZSBtdXN0IGJlIGFycmF5IG9yIHVuZGVmaW5lZCcpO1xuICAgIH1cbiAgICBwYXJzZU9wdGlvbnMgPSBwYXJzZU9wdGlvbnMgfHwge307XG5cbiAgICAvLyBEZWZhdWx0IHRvIHVzaW5nIHByb2Nlc3MuYXJndlxuICAgIGlmIChhcmd2ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGFyZ3YgPSBwcm9jZXNzLmFyZ3Y7XG4gICAgICAvLyBAdHMtaWdub3JlOiB1bmtub3duIHByb3BlcnR5XG4gICAgICBpZiAocHJvY2Vzcy52ZXJzaW9ucyAmJiBwcm9jZXNzLnZlcnNpb25zLmVsZWN0cm9uKSB7XG4gICAgICAgIHBhcnNlT3B0aW9ucy5mcm9tID0gJ2VsZWN0cm9uJztcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5yYXdBcmdzID0gYXJndi5zbGljZSgpO1xuXG4gICAgLy8gbWFrZSBpdCBhIGxpdHRsZSBlYXNpZXIgZm9yIGNhbGxlcnMgYnkgc3VwcG9ydGluZyB2YXJpb3VzIGFyZ3YgY29udmVudGlvbnNcbiAgICBsZXQgdXNlckFyZ3M7XG4gICAgc3dpdGNoIChwYXJzZU9wdGlvbnMuZnJvbSkge1xuICAgICAgY2FzZSB1bmRlZmluZWQ6XG4gICAgICBjYXNlICdub2RlJzpcbiAgICAgICAgdGhpcy5fc2NyaXB0UGF0aCA9IGFyZ3ZbMV07XG4gICAgICAgIHVzZXJBcmdzID0gYXJndi5zbGljZSgyKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdlbGVjdHJvbic6XG4gICAgICAgIC8vIEB0cy1pZ25vcmU6IHVua25vd24gcHJvcGVydHlcbiAgICAgICAgaWYgKHByb2Nlc3MuZGVmYXVsdEFwcCkge1xuICAgICAgICAgIHRoaXMuX3NjcmlwdFBhdGggPSBhcmd2WzFdO1xuICAgICAgICAgIHVzZXJBcmdzID0gYXJndi5zbGljZSgyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB1c2VyQXJncyA9IGFyZ3Yuc2xpY2UoMSk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd1c2VyJzpcbiAgICAgICAgdXNlckFyZ3MgPSBhcmd2LnNsaWNlKDApO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgdW5leHBlY3RlZCBwYXJzZSBvcHRpb24geyBmcm9tOiAnJHtwYXJzZU9wdGlvbnMuZnJvbX0nIH1gKTtcbiAgICB9XG4gICAgaWYgKCF0aGlzLl9zY3JpcHRQYXRoICYmIHJlcXVpcmUubWFpbikge1xuICAgICAgdGhpcy5fc2NyaXB0UGF0aCA9IHJlcXVpcmUubWFpbi5maWxlbmFtZTtcbiAgICB9XG5cbiAgICAvLyBHdWVzcyBuYW1lLCB1c2VkIGluIHVzYWdlIGluIGhlbHAuXG4gICAgdGhpcy5fbmFtZSA9IHRoaXMuX25hbWUgfHwgKHRoaXMuX3NjcmlwdFBhdGggJiYgcGF0aC5iYXNlbmFtZSh0aGlzLl9zY3JpcHRQYXRoLCBwYXRoLmV4dG5hbWUodGhpcy5fc2NyaXB0UGF0aCkpKTtcblxuICAgIC8vIExldCdzIGdvIVxuICAgIHRoaXMuX3BhcnNlQ29tbWFuZChbXSwgdXNlckFyZ3MpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIFBhcnNlIGBhcmd2YCwgc2V0dGluZyBvcHRpb25zIGFuZCBpbnZva2luZyBjb21tYW5kcyB3aGVuIGRlZmluZWQuXG4gICAqXG4gICAqIFVzZSBwYXJzZUFzeW5jIGluc3RlYWQgb2YgcGFyc2UgaWYgYW55IG9mIHlvdXIgYWN0aW9uIGhhbmRsZXJzIGFyZSBhc3luYy4gUmV0dXJucyBhIFByb21pc2UuXG4gICAqXG4gICAqIFRoZSBkZWZhdWx0IGV4cGVjdGF0aW9uIGlzIHRoYXQgdGhlIGFyZ3VtZW50cyBhcmUgZnJvbSBub2RlIGFuZCBoYXZlIHRoZSBhcHBsaWNhdGlvbiBhcyBhcmd2WzBdXG4gICAqIGFuZCB0aGUgc2NyaXB0IGJlaW5nIHJ1biBpbiBhcmd2WzFdLCB3aXRoIHVzZXIgcGFyYW1ldGVycyBhZnRlciB0aGF0LlxuICAgKlxuICAgKiBFeGFtcGxlczpcbiAgICpcbiAgICogICAgICBwcm9ncmFtLnBhcnNlQXN5bmMocHJvY2Vzcy5hcmd2KTtcbiAgICogICAgICBwcm9ncmFtLnBhcnNlQXN5bmMoKTsgLy8gaW1wbGljaXRseSB1c2UgcHJvY2Vzcy5hcmd2IGFuZCBhdXRvLWRldGVjdCBub2RlIHZzIGVsZWN0cm9uIGNvbnZlbnRpb25zXG4gICAqICAgICAgcHJvZ3JhbS5wYXJzZUFzeW5jKG15LWFyZ3MsIHsgZnJvbTogJ3VzZXInIH0pOyAvLyBqdXN0IHVzZXIgc3VwcGxpZWQgYXJndW1lbnRzLCBub3RoaW5nIHNwZWNpYWwgYWJvdXQgYXJndlswXVxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSBbYXJndl1cbiAgICogQHBhcmFtIHtPYmplY3R9IFtwYXJzZU9wdGlvbnNdXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBwYXJzZU9wdGlvbnMuZnJvbSAtIHdoZXJlIHRoZSBhcmdzIGFyZSBmcm9tOiAnbm9kZScsICd1c2VyJywgJ2VsZWN0cm9uJ1xuICAgKiBAcmV0dXJuIHtQcm9taXNlfVxuICAgKi9cblxuICBwYXJzZUFzeW5jKGFyZ3YsIHBhcnNlT3B0aW9ucykge1xuICAgIHRoaXMucGFyc2UoYXJndiwgcGFyc2VPcHRpb25zKTtcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwodGhpcy5fYWN0aW9uUmVzdWx0cykudGhlbigoKSA9PiB0aGlzKTtcbiAgfTtcblxuICAvKipcbiAgICogRXhlY3V0ZSBhIHN1Yi1jb21tYW5kIGV4ZWN1dGFibGUuXG4gICAqXG4gICAqIEBhcGkgcHJpdmF0ZVxuICAgKi9cblxuICBfZXhlY3V0ZVN1YkNvbW1hbmQoc3ViY29tbWFuZCwgYXJncykge1xuICAgIGFyZ3MgPSBhcmdzLnNsaWNlKCk7XG4gICAgbGV0IGxhdW5jaFdpdGhOb2RlID0gZmFsc2U7IC8vIFVzZSBub2RlIGZvciBzb3VyY2UgdGFyZ2V0cyBzbyBkbyBub3QgbmVlZCB0byBnZXQgcGVybWlzc2lvbnMgY29ycmVjdCwgYW5kIG9uIFdpbmRvd3MuXG4gICAgY29uc3Qgc291cmNlRXh0ID0gWycuanMnLCAnLnRzJywgJy50c3gnLCAnLm1qcycsICcuY2pzJ107XG5cbiAgICAvLyBOb3QgY2hlY2tpbmcgZm9yIGhlbHAgZmlyc3QuIFVubGlrZWx5IHRvIGhhdmUgbWFuZGF0b3J5IGFuZCBleGVjdXRhYmxlLCBhbmQgY2FuJ3Qgcm9idXN0bHkgdGVzdCBmb3IgaGVscCBmbGFncyBpbiBleHRlcm5hbCBjb21tYW5kLlxuICAgIHRoaXMuX2NoZWNrRm9yTWlzc2luZ01hbmRhdG9yeU9wdGlvbnMoKTtcblxuICAgIC8vIFdhbnQgdGhlIGVudHJ5IHNjcmlwdCBhcyB0aGUgcmVmZXJlbmNlIGZvciBjb21tYW5kIG5hbWUgYW5kIGRpcmVjdG9yeSBmb3Igc2VhcmNoaW5nIGZvciBvdGhlciBmaWxlcy5cbiAgICBsZXQgc2NyaXB0UGF0aCA9IHRoaXMuX3NjcmlwdFBhdGg7XG4gICAgLy8gRmFsbGJhY2sgaW4gY2FzZSBub3Qgc2V0LCBkdWUgdG8gaG93IENvbW1hbmQgY3JlYXRlZCBvciBjYWxsZWQuXG4gICAgaWYgKCFzY3JpcHRQYXRoICYmIHJlcXVpcmUubWFpbikge1xuICAgICAgc2NyaXB0UGF0aCA9IHJlcXVpcmUubWFpbi5maWxlbmFtZTtcbiAgICB9XG5cbiAgICBsZXQgYmFzZURpcjtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzb2x2ZWRMaW5rID0gZnMucmVhbHBhdGhTeW5jKHNjcmlwdFBhdGgpO1xuICAgICAgYmFzZURpciA9IHBhdGguZGlybmFtZShyZXNvbHZlZExpbmspO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGJhc2VEaXIgPSAnLic7IC8vIGR1bW15LCBwcm9iYWJseSBub3QgZ29pbmcgdG8gZmluZCBleGVjdXRhYmxlIVxuICAgIH1cblxuICAgIC8vIG5hbWUgb2YgdGhlIHN1YmNvbW1hbmQsIGxpa2UgYHBtLWluc3RhbGxgXG4gICAgbGV0IGJpbiA9IHBhdGguYmFzZW5hbWUoc2NyaXB0UGF0aCwgcGF0aC5leHRuYW1lKHNjcmlwdFBhdGgpKSArICctJyArIHN1YmNvbW1hbmQuX25hbWU7XG4gICAgaWYgKHN1YmNvbW1hbmQuX2V4ZWN1dGFibGVGaWxlKSB7XG4gICAgICBiaW4gPSBzdWJjb21tYW5kLl9leGVjdXRhYmxlRmlsZTtcbiAgICB9XG5cbiAgICBjb25zdCBsb2NhbEJpbiA9IHBhdGguam9pbihiYXNlRGlyLCBiaW4pO1xuICAgIGlmIChmcy5leGlzdHNTeW5jKGxvY2FsQmluKSkge1xuICAgICAgLy8gcHJlZmVyIGxvY2FsIGAuLzxiaW4+YCB0byBiaW4gaW4gdGhlICRQQVRIXG4gICAgICBiaW4gPSBsb2NhbEJpbjtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gTG9vayBmb3Igc291cmNlIGZpbGVzLlxuICAgICAgc291cmNlRXh0LmZvckVhY2goKGV4dCkgPT4ge1xuICAgICAgICBpZiAoZnMuZXhpc3RzU3luYyhgJHtsb2NhbEJpbn0ke2V4dH1gKSkge1xuICAgICAgICAgIGJpbiA9IGAke2xvY2FsQmlufSR7ZXh0fWA7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBsYXVuY2hXaXRoTm9kZSA9IHNvdXJjZUV4dC5pbmNsdWRlcyhwYXRoLmV4dG5hbWUoYmluKSk7XG5cbiAgICBsZXQgcHJvYztcbiAgICBpZiAocHJvY2Vzcy5wbGF0Zm9ybSAhPT0gJ3dpbjMyJykge1xuICAgICAgaWYgKGxhdW5jaFdpdGhOb2RlKSB7XG4gICAgICAgIGFyZ3MudW5zaGlmdChiaW4pO1xuICAgICAgICAvLyBhZGQgZXhlY3V0YWJsZSBhcmd1bWVudHMgdG8gc3Bhd25cbiAgICAgICAgYXJncyA9IGluY3JlbWVudE5vZGVJbnNwZWN0b3JQb3J0KHByb2Nlc3MuZXhlY0FyZ3YpLmNvbmNhdChhcmdzKTtcblxuICAgICAgICBwcm9jID0gY2hpbGRQcm9jZXNzLnNwYXduKHByb2Nlc3MuYXJndlswXSwgYXJncywgeyBzdGRpbzogJ2luaGVyaXQnIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcHJvYyA9IGNoaWxkUHJvY2Vzcy5zcGF3bihiaW4sIGFyZ3MsIHsgc3RkaW86ICdpbmhlcml0JyB9KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgYXJncy51bnNoaWZ0KGJpbik7XG4gICAgICAvLyBhZGQgZXhlY3V0YWJsZSBhcmd1bWVudHMgdG8gc3Bhd25cbiAgICAgIGFyZ3MgPSBpbmNyZW1lbnROb2RlSW5zcGVjdG9yUG9ydChwcm9jZXNzLmV4ZWNBcmd2KS5jb25jYXQoYXJncyk7XG4gICAgICBwcm9jID0gY2hpbGRQcm9jZXNzLnNwYXduKHByb2Nlc3MuZXhlY1BhdGgsIGFyZ3MsIHsgc3RkaW86ICdpbmhlcml0JyB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBzaWduYWxzID0gWydTSUdVU1IxJywgJ1NJR1VTUjInLCAnU0lHVEVSTScsICdTSUdJTlQnLCAnU0lHSFVQJ107XG4gICAgc2lnbmFscy5mb3JFYWNoKChzaWduYWwpID0+IHtcbiAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgIHByb2Nlc3Mub24oc2lnbmFsLCAoKSA9PiB7XG4gICAgICAgIGlmIChwcm9jLmtpbGxlZCA9PT0gZmFsc2UgJiYgcHJvYy5leGl0Q29kZSA9PT0gbnVsbCkge1xuICAgICAgICAgIHByb2Mua2lsbChzaWduYWwpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIC8vIEJ5IGRlZmF1bHQgdGVybWluYXRlIHByb2Nlc3Mgd2hlbiBzcGF3bmVkIHByb2Nlc3MgdGVybWluYXRlcy5cbiAgICAvLyBTdXBwcmVzc2luZyB0aGUgZXhpdCBpZiBleGl0Q2FsbGJhY2sgZGVmaW5lZCBpcyBhIGJpdCBtZXNzeSBhbmQgb2YgbGltaXRlZCB1c2UsIGJ1dCBkb2VzIGFsbG93IHByb2Nlc3MgdG8gc3RheSBydW5uaW5nIVxuICAgIGNvbnN0IGV4aXRDYWxsYmFjayA9IHRoaXMuX2V4aXRDYWxsYmFjaztcbiAgICBpZiAoIWV4aXRDYWxsYmFjaykge1xuICAgICAgcHJvYy5vbignY2xvc2UnLCBwcm9jZXNzLmV4aXQuYmluZChwcm9jZXNzKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHByb2Mub24oJ2Nsb3NlJywgKCkgPT4ge1xuICAgICAgICBleGl0Q2FsbGJhY2sobmV3IENvbW1hbmRlckVycm9yKHByb2Nlc3MuZXhpdENvZGUgfHwgMCwgJ2NvbW1hbmRlci5leGVjdXRlU3ViQ29tbWFuZEFzeW5jJywgJyhjbG9zZSknKSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgcHJvYy5vbignZXJyb3InLCAoZXJyKSA9PiB7XG4gICAgICAvLyBAdHMtaWdub3JlXG4gICAgICBpZiAoZXJyLmNvZGUgPT09ICdFTk9FTlQnKSB7XG4gICAgICAgIGNvbnN0IGV4ZWN1dGFibGVNaXNzaW5nID0gYCcke2Jpbn0nIGRvZXMgbm90IGV4aXN0XG4gLSBpZiAnJHtzdWJjb21tYW5kLl9uYW1lfScgaXMgbm90IG1lYW50IHRvIGJlIGFuIGV4ZWN1dGFibGUgY29tbWFuZCwgcmVtb3ZlIGRlc2NyaXB0aW9uIHBhcmFtZXRlciBmcm9tICcuY29tbWFuZCgpJyBhbmQgdXNlICcuZGVzY3JpcHRpb24oKScgaW5zdGVhZFxuIC0gaWYgdGhlIGRlZmF1bHQgZXhlY3V0YWJsZSBuYW1lIGlzIG5vdCBzdWl0YWJsZSwgdXNlIHRoZSBleGVjdXRhYmxlRmlsZSBvcHRpb24gdG8gc3VwcGx5IGEgY3VzdG9tIG5hbWVgO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXhlY3V0YWJsZU1pc3NpbmcpO1xuICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgfSBlbHNlIGlmIChlcnIuY29kZSA9PT0gJ0VBQ0NFUycpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAnJHtiaW59JyBub3QgZXhlY3V0YWJsZWApO1xuICAgICAgfVxuICAgICAgaWYgKCFleGl0Q2FsbGJhY2spIHtcbiAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3Qgd3JhcHBlZEVycm9yID0gbmV3IENvbW1hbmRlckVycm9yKDEsICdjb21tYW5kZXIuZXhlY3V0ZVN1YkNvbW1hbmRBc3luYycsICcoZXJyb3IpJyk7XG4gICAgICAgIHdyYXBwZWRFcnJvci5uZXN0ZWRFcnJvciA9IGVycjtcbiAgICAgICAgZXhpdENhbGxiYWNrKHdyYXBwZWRFcnJvcik7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBTdG9yZSB0aGUgcmVmZXJlbmNlIHRvIHRoZSBjaGlsZCBwcm9jZXNzXG4gICAgdGhpcy5ydW5uaW5nQ29tbWFuZCA9IHByb2M7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBhcGkgcHJpdmF0ZVxuICAgKi9cbiAgX2Rpc3BhdGNoU3ViY29tbWFuZChjb21tYW5kTmFtZSwgb3BlcmFuZHMsIHVua25vd24pIHtcbiAgICBjb25zdCBzdWJDb21tYW5kID0gdGhpcy5fZmluZENvbW1hbmQoY29tbWFuZE5hbWUpO1xuICAgIGlmICghc3ViQ29tbWFuZCkgdGhpcy5oZWxwKHsgZXJyb3I6IHRydWUgfSk7XG5cbiAgICBpZiAoc3ViQ29tbWFuZC5fZXhlY3V0YWJsZUhhbmRsZXIpIHtcbiAgICAgIHRoaXMuX2V4ZWN1dGVTdWJDb21tYW5kKHN1YkNvbW1hbmQsIG9wZXJhbmRzLmNvbmNhdCh1bmtub3duKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN1YkNvbW1hbmQuX3BhcnNlQ29tbWFuZChvcGVyYW5kcywgdW5rbm93bik7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBQcm9jZXNzIGFyZ3VtZW50cyBpbiBjb250ZXh0IG9mIHRoaXMgY29tbWFuZC5cbiAgICpcbiAgICogQGFwaSBwcml2YXRlXG4gICAqL1xuXG4gIF9wYXJzZUNvbW1hbmQob3BlcmFuZHMsIHVua25vd24pIHtcbiAgICBjb25zdCBwYXJzZWQgPSB0aGlzLnBhcnNlT3B0aW9ucyh1bmtub3duKTtcbiAgICBvcGVyYW5kcyA9IG9wZXJhbmRzLmNvbmNhdChwYXJzZWQub3BlcmFuZHMpO1xuICAgIHVua25vd24gPSBwYXJzZWQudW5rbm93bjtcbiAgICB0aGlzLmFyZ3MgPSBvcGVyYW5kcy5jb25jYXQodW5rbm93bik7XG5cbiAgICBpZiAob3BlcmFuZHMgJiYgdGhpcy5fZmluZENvbW1hbmQob3BlcmFuZHNbMF0pKSB7XG4gICAgICB0aGlzLl9kaXNwYXRjaFN1YmNvbW1hbmQob3BlcmFuZHNbMF0sIG9wZXJhbmRzLnNsaWNlKDEpLCB1bmtub3duKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuX2hhc0ltcGxpY2l0SGVscENvbW1hbmQoKSAmJiBvcGVyYW5kc1swXSA9PT0gdGhpcy5faGVscENvbW1hbmROYW1lKSB7XG4gICAgICBpZiAob3BlcmFuZHMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIHRoaXMuaGVscCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fZGlzcGF0Y2hTdWJjb21tYW5kKG9wZXJhbmRzWzFdLCBbXSwgW3RoaXMuX2hlbHBMb25nRmxhZ10pO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5fZGVmYXVsdENvbW1hbmROYW1lKSB7XG4gICAgICBvdXRwdXRIZWxwSWZSZXF1ZXN0ZWQodGhpcywgdW5rbm93bik7IC8vIFJ1biB0aGUgaGVscCBmb3IgZGVmYXVsdCBjb21tYW5kIGZyb20gcGFyZW50IHJhdGhlciB0aGFuIHBhc3NpbmcgdG8gZGVmYXVsdCBjb21tYW5kXG4gICAgICB0aGlzLl9kaXNwYXRjaFN1YmNvbW1hbmQodGhpcy5fZGVmYXVsdENvbW1hbmROYW1lLCBvcGVyYW5kcywgdW5rbm93bik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0aGlzLmNvbW1hbmRzLmxlbmd0aCAmJiB0aGlzLmFyZ3MubGVuZ3RoID09PSAwICYmICF0aGlzLl9hY3Rpb25IYW5kbGVyICYmICF0aGlzLl9kZWZhdWx0Q29tbWFuZE5hbWUpIHtcbiAgICAgICAgLy8gcHJvYmFibHkgbWlzc2luZyBzdWJjb21tYW5kIGFuZCBubyBoYW5kbGVyLCB1c2VyIG5lZWRzIGhlbHBcbiAgICAgICAgdGhpcy5oZWxwKHsgZXJyb3I6IHRydWUgfSk7XG4gICAgICB9XG5cbiAgICAgIG91dHB1dEhlbHBJZlJlcXVlc3RlZCh0aGlzLCBwYXJzZWQudW5rbm93bik7XG4gICAgICB0aGlzLl9jaGVja0Zvck1pc3NpbmdNYW5kYXRvcnlPcHRpb25zKCk7XG5cbiAgICAgIC8vIFdlIGRvIG5vdCBhbHdheXMgY2FsbCB0aGlzIGNoZWNrIHRvIGF2b2lkIG1hc2tpbmcgYSBcImJldHRlclwiIGVycm9yLCBsaWtlIHVua25vd24gY29tbWFuZC5cbiAgICAgIGNvbnN0IGNoZWNrRm9yVW5rbm93bk9wdGlvbnMgPSAoKSA9PiB7XG4gICAgICAgIGlmIChwYXJzZWQudW5rbm93bi5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgdGhpcy51bmtub3duT3B0aW9uKHBhcnNlZC51bmtub3duWzBdKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgY29uc3QgY29tbWFuZEV2ZW50ID0gYGNvbW1hbmQ6JHt0aGlzLm5hbWUoKX1gO1xuICAgICAgaWYgKHRoaXMuX2FjdGlvbkhhbmRsZXIpIHtcbiAgICAgICAgY2hlY2tGb3JVbmtub3duT3B0aW9ucygpO1xuICAgICAgICAvLyBDaGVjayBleHBlY3RlZCBhcmd1bWVudHMgYW5kIGNvbGxlY3QgdmFyaWFkaWMgdG9nZXRoZXIuXG4gICAgICAgIGNvbnN0IGFyZ3MgPSB0aGlzLmFyZ3Muc2xpY2UoKTtcbiAgICAgICAgdGhpcy5fYXJncy5mb3JFYWNoKChhcmcsIGkpID0+IHtcbiAgICAgICAgICBpZiAoYXJnLnJlcXVpcmVkICYmIGFyZ3NbaV0gPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5taXNzaW5nQXJndW1lbnQoYXJnLm5hbWUpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoYXJnLnZhcmlhZGljKSB7XG4gICAgICAgICAgICBhcmdzW2ldID0gYXJncy5zcGxpY2UoaSk7XG4gICAgICAgICAgICBhcmdzLmxlbmd0aCA9IE1hdGgubWluKGkgKyAxLCBhcmdzLmxlbmd0aCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGFyZ3MubGVuZ3RoID4gdGhpcy5fYXJncy5sZW5ndGgpIHtcbiAgICAgICAgICB0aGlzLl9leGNlc3NBcmd1bWVudHMoYXJncyk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9hY3Rpb25IYW5kbGVyKGFyZ3MpO1xuICAgICAgICBpZiAodGhpcy5wYXJlbnQpIHRoaXMucGFyZW50LmVtaXQoY29tbWFuZEV2ZW50LCBvcGVyYW5kcywgdW5rbm93bik7IC8vIGxlZ2FjeVxuICAgICAgfSBlbHNlIGlmICh0aGlzLnBhcmVudCAmJiB0aGlzLnBhcmVudC5saXN0ZW5lckNvdW50KGNvbW1hbmRFdmVudCkpIHtcbiAgICAgICAgY2hlY2tGb3JVbmtub3duT3B0aW9ucygpO1xuICAgICAgICB0aGlzLnBhcmVudC5lbWl0KGNvbW1hbmRFdmVudCwgb3BlcmFuZHMsIHVua25vd24pOyAvLyBsZWdhY3lcbiAgICAgIH0gZWxzZSBpZiAob3BlcmFuZHMubGVuZ3RoKSB7XG4gICAgICAgIGlmICh0aGlzLl9maW5kQ29tbWFuZCgnKicpKSB7IC8vIGxlZ2FjeSBkZWZhdWx0IGNvbW1hbmRcbiAgICAgICAgICB0aGlzLl9kaXNwYXRjaFN1YmNvbW1hbmQoJyonLCBvcGVyYW5kcywgdW5rbm93bik7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5saXN0ZW5lckNvdW50KCdjb21tYW5kOionKSkge1xuICAgICAgICAgIC8vIHNraXAgb3B0aW9uIGNoZWNrLCBlbWl0IGV2ZW50IGZvciBwb3NzaWJsZSBtaXNzcGVsbGluZyBzdWdnZXN0aW9uXG4gICAgICAgICAgdGhpcy5lbWl0KCdjb21tYW5kOionLCBvcGVyYW5kcywgdW5rbm93bik7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5jb21tYW5kcy5sZW5ndGgpIHtcbiAgICAgICAgICB0aGlzLnVua25vd25Db21tYW5kKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2hlY2tGb3JVbmtub3duT3B0aW9ucygpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuY29tbWFuZHMubGVuZ3RoKSB7XG4gICAgICAgIC8vIFRoaXMgY29tbWFuZCBoYXMgc3ViY29tbWFuZHMgYW5kIG5vdGhpbmcgaG9va2VkIHVwIGF0IHRoaXMgbGV2ZWwsIHNvIGRpc3BsYXkgaGVscC5cbiAgICAgICAgdGhpcy5oZWxwKHsgZXJyb3I6IHRydWUgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjaGVja0ZvclVua25vd25PcHRpb25zKCk7XG4gICAgICAgIC8vIGZhbGwgdGhyb3VnaCBmb3IgY2FsbGVyIHRvIGhhbmRsZSBhZnRlciBjYWxsaW5nIC5wYXJzZSgpXG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBGaW5kIG1hdGNoaW5nIGNvbW1hbmQuXG4gICAqXG4gICAqIEBhcGkgcHJpdmF0ZVxuICAgKi9cbiAgX2ZpbmRDb21tYW5kKG5hbWUpIHtcbiAgICBpZiAoIW5hbWUpIHJldHVybiB1bmRlZmluZWQ7XG4gICAgcmV0dXJuIHRoaXMuY29tbWFuZHMuZmluZChjbWQgPT4gY21kLl9uYW1lID09PSBuYW1lIHx8IGNtZC5fYWxpYXNlcy5pbmNsdWRlcyhuYW1lKSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybiBhbiBvcHRpb24gbWF0Y2hpbmcgYGFyZ2AgaWYgYW55LlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gYXJnXG4gICAqIEByZXR1cm4ge09wdGlvbn1cbiAgICogQGFwaSBwcml2YXRlXG4gICAqL1xuXG4gIF9maW5kT3B0aW9uKGFyZykge1xuICAgIHJldHVybiB0aGlzLm9wdGlvbnMuZmluZChvcHRpb24gPT4gb3B0aW9uLmlzKGFyZykpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBEaXNwbGF5IGFuIGVycm9yIG1lc3NhZ2UgaWYgYSBtYW5kYXRvcnkgb3B0aW9uIGRvZXMgbm90IGhhdmUgYSB2YWx1ZS5cbiAgICogTGF6eSBjYWxsaW5nIGFmdGVyIGNoZWNraW5nIGZvciBoZWxwIGZsYWdzIGZyb20gbGVhZiBzdWJjb21tYW5kLlxuICAgKlxuICAgKiBAYXBpIHByaXZhdGVcbiAgICovXG5cbiAgX2NoZWNrRm9yTWlzc2luZ01hbmRhdG9yeU9wdGlvbnMoKSB7XG4gICAgLy8gV2FsayB1cCBoaWVyYXJjaHkgc28gY2FuIGNhbGwgaW4gc3ViY29tbWFuZCBhZnRlciBjaGVja2luZyBmb3IgZGlzcGxheWluZyBoZWxwLlxuICAgIGZvciAobGV0IGNtZCA9IHRoaXM7IGNtZDsgY21kID0gY21kLnBhcmVudCkge1xuICAgICAgY21kLm9wdGlvbnMuZm9yRWFjaCgoYW5PcHRpb24pID0+IHtcbiAgICAgICAgaWYgKGFuT3B0aW9uLm1hbmRhdG9yeSAmJiAoY21kLl9nZXRPcHRpb25WYWx1ZShhbk9wdGlvbi5hdHRyaWJ1dGVOYW1lKCkpID09PSB1bmRlZmluZWQpKSB7XG4gICAgICAgICAgY21kLm1pc3NpbmdNYW5kYXRvcnlPcHRpb25WYWx1ZShhbk9wdGlvbik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogUGFyc2Ugb3B0aW9ucyBmcm9tIGBhcmd2YCByZW1vdmluZyBrbm93biBvcHRpb25zLFxuICAgKiBhbmQgcmV0dXJuIGFyZ3Ygc3BsaXQgaW50byBvcGVyYW5kcyBhbmQgdW5rbm93biBhcmd1bWVudHMuXG4gICAqXG4gICAqIEV4YW1wbGVzOlxuICAgKlxuICAgKiAgICBhcmd2ID0+IG9wZXJhbmRzLCB1bmtub3duXG4gICAqICAgIC0ta25vd24ga2trIG9wID0+IFtvcF0sIFtdXG4gICAqICAgIG9wIC0ta25vd24ga2trID0+IFtvcF0sIFtdXG4gICAqICAgIHN1YiAtLXVua25vd24gdXV1IG9wID0+IFtzdWJdLCBbLS11bmtub3duIHV1dSBvcF1cbiAgICogICAgc3ViIC0tIC0tdW5rbm93biB1dXUgb3AgPT4gW3N1YiAtLXVua25vd24gdXV1IG9wXSwgW11cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmdbXX0gYXJndlxuICAgKiBAcmV0dXJuIHt7b3BlcmFuZHM6IFN0cmluZ1tdLCB1bmtub3duOiBTdHJpbmdbXX19XG4gICAqL1xuXG4gIHBhcnNlT3B0aW9ucyhhcmd2KSB7XG4gICAgY29uc3Qgb3BlcmFuZHMgPSBbXTsgLy8gb3BlcmFuZHMsIG5vdCBvcHRpb25zIG9yIHZhbHVlc1xuICAgIGNvbnN0IHVua25vd24gPSBbXTsgLy8gZmlyc3QgdW5rbm93biBvcHRpb24gYW5kIHJlbWFpbmluZyB1bmtub3duIGFyZ3NcbiAgICBsZXQgZGVzdCA9IG9wZXJhbmRzO1xuICAgIGNvbnN0IGFyZ3MgPSBhcmd2LnNsaWNlKCk7XG5cbiAgICBmdW5jdGlvbiBtYXliZU9wdGlvbihhcmcpIHtcbiAgICAgIHJldHVybiBhcmcubGVuZ3RoID4gMSAmJiBhcmdbMF0gPT09ICctJztcbiAgICB9XG5cbiAgICAvLyBwYXJzZSBvcHRpb25zXG4gICAgbGV0IGFjdGl2ZVZhcmlhZGljT3B0aW9uID0gbnVsbDtcbiAgICB3aGlsZSAoYXJncy5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IGFyZyA9IGFyZ3Muc2hpZnQoKTtcblxuICAgICAgLy8gbGl0ZXJhbFxuICAgICAgaWYgKGFyZyA9PT0gJy0tJykge1xuICAgICAgICBpZiAoZGVzdCA9PT0gdW5rbm93bikgZGVzdC5wdXNoKGFyZyk7XG4gICAgICAgIGRlc3QucHVzaCguLi5hcmdzKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIGlmIChhY3RpdmVWYXJpYWRpY09wdGlvbiAmJiAhbWF5YmVPcHRpb24oYXJnKSkge1xuICAgICAgICB0aGlzLmVtaXQoYG9wdGlvbjoke2FjdGl2ZVZhcmlhZGljT3B0aW9uLm5hbWUoKX1gLCBhcmcpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGFjdGl2ZVZhcmlhZGljT3B0aW9uID0gbnVsbDtcblxuICAgICAgaWYgKG1heWJlT3B0aW9uKGFyZykpIHtcbiAgICAgICAgY29uc3Qgb3B0aW9uID0gdGhpcy5fZmluZE9wdGlvbihhcmcpO1xuICAgICAgICAvLyByZWNvZ25pc2VkIG9wdGlvbiwgY2FsbCBsaXN0ZW5lciB0byBhc3NpZ24gdmFsdWUgd2l0aCBwb3NzaWJsZSBjdXN0b20gcHJvY2Vzc2luZ1xuICAgICAgICBpZiAob3B0aW9uKSB7XG4gICAgICAgICAgaWYgKG9wdGlvbi5yZXF1aXJlZCkge1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBhcmdzLnNoaWZ0KCk7XG4gICAgICAgICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkgdGhpcy5vcHRpb25NaXNzaW5nQXJndW1lbnQob3B0aW9uKTtcbiAgICAgICAgICAgIHRoaXMuZW1pdChgb3B0aW9uOiR7b3B0aW9uLm5hbWUoKX1gLCB2YWx1ZSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChvcHRpb24ub3B0aW9uYWwpIHtcbiAgICAgICAgICAgIGxldCB2YWx1ZSA9IG51bGw7XG4gICAgICAgICAgICAvLyBoaXN0b3JpY2FsIGJlaGF2aW91ciBpcyBvcHRpb25hbCB2YWx1ZSBpcyBmb2xsb3dpbmcgYXJnIHVubGVzcyBhbiBvcHRpb25cbiAgICAgICAgICAgIGlmIChhcmdzLmxlbmd0aCA+IDAgJiYgIW1heWJlT3B0aW9uKGFyZ3NbMF0pKSB7XG4gICAgICAgICAgICAgIHZhbHVlID0gYXJncy5zaGlmdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5lbWl0KGBvcHRpb246JHtvcHRpb24ubmFtZSgpfWAsIHZhbHVlKTtcbiAgICAgICAgICB9IGVsc2UgeyAvLyBib29sZWFuIGZsYWdcbiAgICAgICAgICAgIHRoaXMuZW1pdChgb3B0aW9uOiR7b3B0aW9uLm5hbWUoKX1gKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYWN0aXZlVmFyaWFkaWNPcHRpb24gPSBvcHRpb24udmFyaWFkaWMgPyBvcHRpb24gOiBudWxsO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIExvb2sgZm9yIGNvbWJvIG9wdGlvbnMgZm9sbG93aW5nIHNpbmdsZSBkYXNoLCBlYXQgZmlyc3Qgb25lIGlmIGtub3duLlxuICAgICAgaWYgKGFyZy5sZW5ndGggPiAyICYmIGFyZ1swXSA9PT0gJy0nICYmIGFyZ1sxXSAhPT0gJy0nKSB7XG4gICAgICAgIGNvbnN0IG9wdGlvbiA9IHRoaXMuX2ZpbmRPcHRpb24oYC0ke2FyZ1sxXX1gKTtcbiAgICAgICAgaWYgKG9wdGlvbikge1xuICAgICAgICAgIGlmIChvcHRpb24ucmVxdWlyZWQgfHwgKG9wdGlvbi5vcHRpb25hbCAmJiB0aGlzLl9jb21iaW5lRmxhZ0FuZE9wdGlvbmFsVmFsdWUpKSB7XG4gICAgICAgICAgICAvLyBvcHRpb24gd2l0aCB2YWx1ZSBmb2xsb3dpbmcgaW4gc2FtZSBhcmd1bWVudFxuICAgICAgICAgICAgdGhpcy5lbWl0KGBvcHRpb246JHtvcHRpb24ubmFtZSgpfWAsIGFyZy5zbGljZSgyKSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIGJvb2xlYW4gb3B0aW9uLCBlbWl0IGFuZCBwdXQgYmFjayByZW1haW5kZXIgb2YgYXJnIGZvciBmdXJ0aGVyIHByb2Nlc3NpbmdcbiAgICAgICAgICAgIHRoaXMuZW1pdChgb3B0aW9uOiR7b3B0aW9uLm5hbWUoKX1gKTtcbiAgICAgICAgICAgIGFyZ3MudW5zaGlmdChgLSR7YXJnLnNsaWNlKDIpfWApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBMb29rIGZvciBrbm93biBsb25nIGZsYWcgd2l0aCB2YWx1ZSwgbGlrZSAtLWZvbz1iYXJcbiAgICAgIGlmICgvXi0tW149XSs9Ly50ZXN0KGFyZykpIHtcbiAgICAgICAgY29uc3QgaW5kZXggPSBhcmcuaW5kZXhPZignPScpO1xuICAgICAgICBjb25zdCBvcHRpb24gPSB0aGlzLl9maW5kT3B0aW9uKGFyZy5zbGljZSgwLCBpbmRleCkpO1xuICAgICAgICBpZiAob3B0aW9uICYmIChvcHRpb24ucmVxdWlyZWQgfHwgb3B0aW9uLm9wdGlvbmFsKSkge1xuICAgICAgICAgIHRoaXMuZW1pdChgb3B0aW9uOiR7b3B0aW9uLm5hbWUoKX1gLCBhcmcuc2xpY2UoaW5kZXggKyAxKSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gTm90IGEgcmVjb2duaXNlZCBvcHRpb24gYnkgdGhpcyBjb21tYW5kLlxuICAgICAgLy8gTWlnaHQgYmUgYSBjb21tYW5kLWFyZ3VtZW50LCBvciBzdWJjb21tYW5kIG9wdGlvbiwgb3IgdW5rbm93biBvcHRpb24sIG9yIGhlbHAgY29tbWFuZCBvciBvcHRpb24uXG5cbiAgICAgIC8vIEFuIHVua25vd24gb3B0aW9uIG1lYW5zIGZ1cnRoZXIgYXJndW1lbnRzIGFsc28gY2xhc3NpZmllZCBhcyB1bmtub3duIHNvIGNhbiBiZSByZXByb2Nlc3NlZCBieSBzdWJjb21tYW5kcy5cbiAgICAgIGlmIChtYXliZU9wdGlvbihhcmcpKSB7XG4gICAgICAgIGRlc3QgPSB1bmtub3duO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiB1c2luZyBwb3NpdGlvbmFsT3B0aW9ucywgc3RvcCBwcm9jZXNzaW5nIG91ciBvcHRpb25zIGF0IHN1YmNvbW1hbmQuXG4gICAgICBpZiAoKHRoaXMuX2VuYWJsZVBvc2l0aW9uYWxPcHRpb25zIHx8IHRoaXMuX3Bhc3NUaHJvdWdoT3B0aW9ucykgJiYgb3BlcmFuZHMubGVuZ3RoID09PSAwICYmIHVua25vd24ubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGlmICh0aGlzLl9maW5kQ29tbWFuZChhcmcpKSB7XG4gICAgICAgICAgb3BlcmFuZHMucHVzaChhcmcpO1xuICAgICAgICAgIGlmIChhcmdzLmxlbmd0aCA+IDApIHVua25vd24ucHVzaCguLi5hcmdzKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfSBlbHNlIGlmIChhcmcgPT09IHRoaXMuX2hlbHBDb21tYW5kTmFtZSAmJiB0aGlzLl9oYXNJbXBsaWNpdEhlbHBDb21tYW5kKCkpIHtcbiAgICAgICAgICBvcGVyYW5kcy5wdXNoKGFyZyk7XG4gICAgICAgICAgaWYgKGFyZ3MubGVuZ3RoID4gMCkgb3BlcmFuZHMucHVzaCguLi5hcmdzKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9kZWZhdWx0Q29tbWFuZE5hbWUpIHtcbiAgICAgICAgICB1bmtub3duLnB1c2goYXJnKTtcbiAgICAgICAgICBpZiAoYXJncy5sZW5ndGggPiAwKSB1bmtub3duLnB1c2goLi4uYXJncyk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gSWYgdXNpbmcgcGFzc1Rocm91Z2hPcHRpb25zLCBzdG9wIHByb2Nlc3Npbmcgb3B0aW9ucyBhdCBmaXJzdCBjb21tYW5kLWFyZ3VtZW50LlxuICAgICAgaWYgKHRoaXMuX3Bhc3NUaHJvdWdoT3B0aW9ucykge1xuICAgICAgICBkZXN0LnB1c2goYXJnKTtcbiAgICAgICAgaWYgKGFyZ3MubGVuZ3RoID4gMCkgZGVzdC5wdXNoKC4uLmFyZ3MpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgLy8gYWRkIGFyZ1xuICAgICAgZGVzdC5wdXNoKGFyZyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgb3BlcmFuZHMsIHVua25vd24gfTtcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJuIGFuIG9iamVjdCBjb250YWluaW5nIG9wdGlvbnMgYXMga2V5LXZhbHVlIHBhaXJzXG4gICAqXG4gICAqIEByZXR1cm4ge09iamVjdH1cbiAgICovXG4gIG9wdHMoKSB7XG4gICAgaWYgKHRoaXMuX3N0b3JlT3B0aW9uc0FzUHJvcGVydGllcykge1xuICAgICAgLy8gUHJlc2VydmUgb3JpZ2luYWwgYmVoYXZpb3VyIHNvIGJhY2t3YXJkcyBjb21wYXRpYmxlIHdoZW4gc3RpbGwgdXNpbmcgcHJvcGVydGllc1xuICAgICAgY29uc3QgcmVzdWx0ID0ge307XG4gICAgICBjb25zdCBsZW4gPSB0aGlzLm9wdGlvbnMubGVuZ3RoO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGtleSA9IHRoaXMub3B0aW9uc1tpXS5hdHRyaWJ1dGVOYW1lKCk7XG4gICAgICAgIHJlc3VsdFtrZXldID0ga2V5ID09PSB0aGlzLl92ZXJzaW9uT3B0aW9uTmFtZSA/IHRoaXMuX3ZlcnNpb24gOiB0aGlzW2tleV07XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl9vcHRpb25WYWx1ZXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIEludGVybmFsIGJvdHRsZW5lY2sgZm9yIGhhbmRsaW5nIG9mIHBhcnNpbmcgZXJyb3JzLlxuICAgKlxuICAgKiBAYXBpIHByaXZhdGVcbiAgICovXG4gIF9kaXNwbGF5RXJyb3IoZXhpdENvZGUsIGNvZGUsIG1lc3NhZ2UpIHtcbiAgICB0aGlzLl9vdXRwdXRDb25maWd1cmF0aW9uLm91dHB1dEVycm9yKGAke21lc3NhZ2V9XFxuYCwgdGhpcy5fb3V0cHV0Q29uZmlndXJhdGlvbi53cml0ZUVycik7XG4gICAgdGhpcy5fZXhpdChleGl0Q29kZSwgY29kZSwgbWVzc2FnZSk7XG4gIH1cblxuICAvKipcbiAgICogQXJndW1lbnQgYG5hbWVgIGlzIG1pc3NpbmcuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gICAqIEBhcGkgcHJpdmF0ZVxuICAgKi9cblxuICBtaXNzaW5nQXJndW1lbnQobmFtZSkge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBgZXJyb3I6IG1pc3NpbmcgcmVxdWlyZWQgYXJndW1lbnQgJyR7bmFtZX0nYDtcbiAgICB0aGlzLl9kaXNwbGF5RXJyb3IoMSwgJ2NvbW1hbmRlci5taXNzaW5nQXJndW1lbnQnLCBtZXNzYWdlKTtcbiAgfTtcblxuICAvKipcbiAgICogYE9wdGlvbmAgaXMgbWlzc2luZyBhbiBhcmd1bWVudC5cbiAgICpcbiAgICogQHBhcmFtIHtPcHRpb259IG9wdGlvblxuICAgKiBAYXBpIHByaXZhdGVcbiAgICovXG5cbiAgb3B0aW9uTWlzc2luZ0FyZ3VtZW50KG9wdGlvbikge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBgZXJyb3I6IG9wdGlvbiAnJHtvcHRpb24uZmxhZ3N9JyBhcmd1bWVudCBtaXNzaW5nYDtcbiAgICB0aGlzLl9kaXNwbGF5RXJyb3IoMSwgJ2NvbW1hbmRlci5vcHRpb25NaXNzaW5nQXJndW1lbnQnLCBtZXNzYWdlKTtcbiAgfTtcblxuICAvKipcbiAgICogYE9wdGlvbmAgZG9lcyBub3QgaGF2ZSBhIHZhbHVlLCBhbmQgaXMgYSBtYW5kYXRvcnkgb3B0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0ge09wdGlvbn0gb3B0aW9uXG4gICAqIEBhcGkgcHJpdmF0ZVxuICAgKi9cblxuICBtaXNzaW5nTWFuZGF0b3J5T3B0aW9uVmFsdWUob3B0aW9uKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGBlcnJvcjogcmVxdWlyZWQgb3B0aW9uICcke29wdGlvbi5mbGFnc30nIG5vdCBzcGVjaWZpZWRgO1xuICAgIHRoaXMuX2Rpc3BsYXlFcnJvcigxLCAnY29tbWFuZGVyLm1pc3NpbmdNYW5kYXRvcnlPcHRpb25WYWx1ZScsIG1lc3NhZ2UpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBVbmtub3duIG9wdGlvbiBgZmxhZ2AuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmbGFnXG4gICAqIEBhcGkgcHJpdmF0ZVxuICAgKi9cblxuICB1bmtub3duT3B0aW9uKGZsYWcpIHtcbiAgICBpZiAodGhpcy5fYWxsb3dVbmtub3duT3B0aW9uKSByZXR1cm47XG4gICAgY29uc3QgbWVzc2FnZSA9IGBlcnJvcjogdW5rbm93biBvcHRpb24gJyR7ZmxhZ30nYDtcbiAgICB0aGlzLl9kaXNwbGF5RXJyb3IoMSwgJ2NvbW1hbmRlci51bmtub3duT3B0aW9uJywgbWVzc2FnZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEV4Y2VzcyBhcmd1bWVudHMsIG1vcmUgdGhhbiBleHBlY3RlZC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmdbXX0gcmVjZWl2ZWRBcmdzXG4gICAqIEBhcGkgcHJpdmF0ZVxuICAgKi9cblxuICBfZXhjZXNzQXJndW1lbnRzKHJlY2VpdmVkQXJncykge1xuICAgIGlmICh0aGlzLl9hbGxvd0V4Y2Vzc0FyZ3VtZW50cykgcmV0dXJuO1xuXG4gICAgY29uc3QgZXhwZWN0ZWQgPSB0aGlzLl9hcmdzLmxlbmd0aDtcbiAgICBjb25zdCBzID0gKGV4cGVjdGVkID09PSAxKSA/ICcnIDogJ3MnO1xuICAgIGNvbnN0IGZvclN1YmNvbW1hbmQgPSB0aGlzLnBhcmVudCA/IGAgZm9yICcke3RoaXMubmFtZSgpfSdgIDogJyc7XG4gICAgY29uc3QgbWVzc2FnZSA9IGBlcnJvcjogdG9vIG1hbnkgYXJndW1lbnRzJHtmb3JTdWJjb21tYW5kfS4gRXhwZWN0ZWQgJHtleHBlY3RlZH0gYXJndW1lbnQke3N9IGJ1dCBnb3QgJHtyZWNlaXZlZEFyZ3MubGVuZ3RofS5gO1xuICAgIHRoaXMuX2Rpc3BsYXlFcnJvcigxLCAnY29tbWFuZGVyLmV4Y2Vzc0FyZ3VtZW50cycsIG1lc3NhZ2UpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBVbmtub3duIGNvbW1hbmQuXG4gICAqXG4gICAqIEBhcGkgcHJpdmF0ZVxuICAgKi9cblxuICB1bmtub3duQ29tbWFuZCgpIHtcbiAgICBjb25zdCBwYXJ0Q29tbWFuZHMgPSBbdGhpcy5uYW1lKCldO1xuICAgIGZvciAobGV0IHBhcmVudENtZCA9IHRoaXMucGFyZW50OyBwYXJlbnRDbWQ7IHBhcmVudENtZCA9IHBhcmVudENtZC5wYXJlbnQpIHtcbiAgICAgIHBhcnRDb21tYW5kcy51bnNoaWZ0KHBhcmVudENtZC5uYW1lKCkpO1xuICAgIH1cbiAgICBjb25zdCBmdWxsQ29tbWFuZCA9IHBhcnRDb21tYW5kcy5qb2luKCcgJyk7XG4gICAgY29uc3QgbWVzc2FnZSA9IGBlcnJvcjogdW5rbm93biBjb21tYW5kICcke3RoaXMuYXJnc1swXX0nLmAgK1xuICAgICAgKHRoaXMuX2hhc0hlbHBPcHRpb24gPyBgIFNlZSAnJHtmdWxsQ29tbWFuZH0gJHt0aGlzLl9oZWxwTG9uZ0ZsYWd9Jy5gIDogJycpO1xuICAgIHRoaXMuX2Rpc3BsYXlFcnJvcigxLCAnY29tbWFuZGVyLnVua25vd25Db21tYW5kJywgbWVzc2FnZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgcHJvZ3JhbSB2ZXJzaW9uIHRvIGBzdHJgLlxuICAgKlxuICAgKiBUaGlzIG1ldGhvZCBhdXRvLXJlZ2lzdGVycyB0aGUgXCItViwgLS12ZXJzaW9uXCIgZmxhZ1xuICAgKiB3aGljaCB3aWxsIHByaW50IHRoZSB2ZXJzaW9uIG51bWJlciB3aGVuIHBhc3NlZC5cbiAgICpcbiAgICogWW91IGNhbiBvcHRpb25hbGx5IHN1cHBseSB0aGUgIGZsYWdzIGFuZCBkZXNjcmlwdGlvbiB0byBvdmVycmlkZSB0aGUgZGVmYXVsdHMuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzdHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtmbGFnc11cbiAgICogQHBhcmFtIHtzdHJpbmd9IFtkZXNjcmlwdGlvbl1cbiAgICogQHJldHVybiB7dGhpcyB8IHN0cmluZ30gYHRoaXNgIGNvbW1hbmQgZm9yIGNoYWluaW5nLCBvciB2ZXJzaW9uIHN0cmluZyBpZiBubyBhcmd1bWVudHNcbiAgICovXG5cbiAgdmVyc2lvbihzdHIsIGZsYWdzLCBkZXNjcmlwdGlvbikge1xuICAgIGlmIChzdHIgPT09IHVuZGVmaW5lZCkgcmV0dXJuIHRoaXMuX3ZlcnNpb247XG4gICAgdGhpcy5fdmVyc2lvbiA9IHN0cjtcbiAgICBmbGFncyA9IGZsYWdzIHx8ICctViwgLS12ZXJzaW9uJztcbiAgICBkZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uIHx8ICdvdXRwdXQgdGhlIHZlcnNpb24gbnVtYmVyJztcbiAgICBjb25zdCB2ZXJzaW9uT3B0aW9uID0gdGhpcy5jcmVhdGVPcHRpb24oZmxhZ3MsIGRlc2NyaXB0aW9uKTtcbiAgICB0aGlzLl92ZXJzaW9uT3B0aW9uTmFtZSA9IHZlcnNpb25PcHRpb24uYXR0cmlidXRlTmFtZSgpO1xuICAgIHRoaXMub3B0aW9ucy5wdXNoKHZlcnNpb25PcHRpb24pO1xuICAgIHRoaXMub24oJ29wdGlvbjonICsgdmVyc2lvbk9wdGlvbi5uYW1lKCksICgpID0+IHtcbiAgICAgIHRoaXMuX291dHB1dENvbmZpZ3VyYXRpb24ud3JpdGVPdXQoYCR7c3RyfVxcbmApO1xuICAgICAgdGhpcy5fZXhpdCgwLCAnY29tbWFuZGVyLnZlcnNpb24nLCBzdHIpO1xuICAgIH0pO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGRlc2NyaXB0aW9uIHRvIGBzdHJgLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gW3N0cl1cbiAgICogQHBhcmFtIHtPYmplY3R9IFthcmdzRGVzY3JpcHRpb25dXG4gICAqIEByZXR1cm4ge3N0cmluZ3xDb21tYW5kfVxuICAgKi9cbiAgZGVzY3JpcHRpb24oc3RyLCBhcmdzRGVzY3JpcHRpb24pIHtcbiAgICBpZiAoc3RyID09PSB1bmRlZmluZWQgJiYgYXJnc0Rlc2NyaXB0aW9uID09PSB1bmRlZmluZWQpIHJldHVybiB0aGlzLl9kZXNjcmlwdGlvbjtcbiAgICB0aGlzLl9kZXNjcmlwdGlvbiA9IHN0cjtcbiAgICB0aGlzLl9hcmdzRGVzY3JpcHRpb24gPSBhcmdzRGVzY3JpcHRpb247XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldCBhbiBhbGlhcyBmb3IgdGhlIGNvbW1hbmQuXG4gICAqXG4gICAqIFlvdSBtYXkgY2FsbCBtb3JlIHRoYW4gb25jZSB0byBhZGQgbXVsdGlwbGUgYWxpYXNlcy4gT25seSB0aGUgZmlyc3QgYWxpYXMgaXMgc2hvd24gaW4gdGhlIGF1dG8tZ2VuZXJhdGVkIGhlbHAuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbYWxpYXNdXG4gICAqIEByZXR1cm4ge3N0cmluZ3xDb21tYW5kfVxuICAgKi9cblxuICBhbGlhcyhhbGlhcykge1xuICAgIGlmIChhbGlhcyA9PT0gdW5kZWZpbmVkKSByZXR1cm4gdGhpcy5fYWxpYXNlc1swXTsgLy8ganVzdCByZXR1cm4gZmlyc3QsIGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eVxuXG4gICAgbGV0IGNvbW1hbmQgPSB0aGlzO1xuICAgIGlmICh0aGlzLmNvbW1hbmRzLmxlbmd0aCAhPT0gMCAmJiB0aGlzLmNvbW1hbmRzW3RoaXMuY29tbWFuZHMubGVuZ3RoIC0gMV0uX2V4ZWN1dGFibGVIYW5kbGVyKSB7XG4gICAgICAvLyBhc3N1bWUgYWRkaW5nIGFsaWFzIGZvciBsYXN0IGFkZGVkIGV4ZWN1dGFibGUgc3ViY29tbWFuZCwgcmF0aGVyIHRoYW4gdGhpc1xuICAgICAgY29tbWFuZCA9IHRoaXMuY29tbWFuZHNbdGhpcy5jb21tYW5kcy5sZW5ndGggLSAxXTtcbiAgICB9XG5cbiAgICBpZiAoYWxpYXMgPT09IGNvbW1hbmQuX25hbWUpIHRocm93IG5ldyBFcnJvcignQ29tbWFuZCBhbGlhcyBjYW5cXCd0IGJlIHRoZSBzYW1lIGFzIGl0cyBuYW1lJyk7XG5cbiAgICBjb21tYW5kLl9hbGlhc2VzLnB1c2goYWxpYXMpO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZXQgYWxpYXNlcyBmb3IgdGhlIGNvbW1hbmQuXG4gICAqXG4gICAqIE9ubHkgdGhlIGZpcnN0IGFsaWFzIGlzIHNob3duIGluIHRoZSBhdXRvLWdlbmVyYXRlZCBoZWxwLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSBbYWxpYXNlc11cbiAgICogQHJldHVybiB7c3RyaW5nW118Q29tbWFuZH1cbiAgICovXG5cbiAgYWxpYXNlcyhhbGlhc2VzKSB7XG4gICAgLy8gR2V0dGVyIGZvciB0aGUgYXJyYXkgb2YgYWxpYXNlcyBpcyB0aGUgbWFpbiByZWFzb24gZm9yIGhhdmluZyBhbGlhc2VzKCkgaW4gYWRkaXRpb24gdG8gYWxpYXMoKS5cbiAgICBpZiAoYWxpYXNlcyA9PT0gdW5kZWZpbmVkKSByZXR1cm4gdGhpcy5fYWxpYXNlcztcblxuICAgIGFsaWFzZXMuZm9yRWFjaCgoYWxpYXMpID0+IHRoaXMuYWxpYXMoYWxpYXMpKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogU2V0IC8gZ2V0IHRoZSBjb21tYW5kIHVzYWdlIGBzdHJgLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gW3N0cl1cbiAgICogQHJldHVybiB7U3RyaW5nfENvbW1hbmR9XG4gICAqL1xuXG4gIHVzYWdlKHN0cikge1xuICAgIGlmIChzdHIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgaWYgKHRoaXMuX3VzYWdlKSByZXR1cm4gdGhpcy5fdXNhZ2U7XG5cbiAgICAgIGNvbnN0IGFyZ3MgPSB0aGlzLl9hcmdzLm1hcCgoYXJnKSA9PiB7XG4gICAgICAgIHJldHVybiBodW1hblJlYWRhYmxlQXJnTmFtZShhcmcpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gW10uY29uY2F0KFxuICAgICAgICAodGhpcy5vcHRpb25zLmxlbmd0aCB8fCB0aGlzLl9oYXNIZWxwT3B0aW9uID8gJ1tvcHRpb25zXScgOiBbXSksXG4gICAgICAgICh0aGlzLmNvbW1hbmRzLmxlbmd0aCA/ICdbY29tbWFuZF0nIDogW10pLFxuICAgICAgICAodGhpcy5fYXJncy5sZW5ndGggPyBhcmdzIDogW10pXG4gICAgICApLmpvaW4oJyAnKTtcbiAgICB9XG5cbiAgICB0aGlzLl91c2FnZSA9IHN0cjtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogR2V0IG9yIHNldCB0aGUgbmFtZSBvZiB0aGUgY29tbWFuZFxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gW3N0cl1cbiAgICogQHJldHVybiB7c3RyaW5nfENvbW1hbmR9XG4gICAqL1xuXG4gIG5hbWUoc3RyKSB7XG4gICAgaWYgKHN0ciA9PT0gdW5kZWZpbmVkKSByZXR1cm4gdGhpcy5fbmFtZTtcbiAgICB0aGlzLl9uYW1lID0gc3RyO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm4gcHJvZ3JhbSBoZWxwIGRvY3VtZW50YXRpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7eyBlcnJvcjogYm9vbGVhbiB9fSBbY29udGV4dE9wdGlvbnNdIC0gcGFzcyB7ZXJyb3I6dHJ1ZX0gdG8gd3JhcCBmb3Igc3RkZXJyIGluc3RlYWQgb2Ygc3Rkb3V0XG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG5cbiAgaGVscEluZm9ybWF0aW9uKGNvbnRleHRPcHRpb25zKSB7XG4gICAgY29uc3QgaGVscGVyID0gdGhpcy5jcmVhdGVIZWxwKCk7XG4gICAgaWYgKGhlbHBlci5oZWxwV2lkdGggPT09IHVuZGVmaW5lZCkge1xuICAgICAgaGVscGVyLmhlbHBXaWR0aCA9IChjb250ZXh0T3B0aW9ucyAmJiBjb250ZXh0T3B0aW9ucy5lcnJvcikgPyB0aGlzLl9vdXRwdXRDb25maWd1cmF0aW9uLmdldEVyckhlbHBXaWR0aCgpIDogdGhpcy5fb3V0cHV0Q29uZmlndXJhdGlvbi5nZXRPdXRIZWxwV2lkdGgoKTtcbiAgICB9XG4gICAgcmV0dXJuIGhlbHBlci5mb3JtYXRIZWxwKHRoaXMsIGhlbHBlcik7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBhcGkgcHJpdmF0ZVxuICAgKi9cblxuICBfZ2V0SGVscENvbnRleHQoY29udGV4dE9wdGlvbnMpIHtcbiAgICBjb250ZXh0T3B0aW9ucyA9IGNvbnRleHRPcHRpb25zIHx8IHt9O1xuICAgIGNvbnN0IGNvbnRleHQgPSB7IGVycm9yOiAhIWNvbnRleHRPcHRpb25zLmVycm9yIH07XG4gICAgbGV0IHdyaXRlO1xuICAgIGlmIChjb250ZXh0LmVycm9yKSB7XG4gICAgICB3cml0ZSA9IChhcmcpID0+IHRoaXMuX291dHB1dENvbmZpZ3VyYXRpb24ud3JpdGVFcnIoYXJnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgd3JpdGUgPSAoYXJnKSA9PiB0aGlzLl9vdXRwdXRDb25maWd1cmF0aW9uLndyaXRlT3V0KGFyZyk7XG4gICAgfVxuICAgIGNvbnRleHQud3JpdGUgPSBjb250ZXh0T3B0aW9ucy53cml0ZSB8fCB3cml0ZTtcbiAgICBjb250ZXh0LmNvbW1hbmQgPSB0aGlzO1xuICAgIHJldHVybiBjb250ZXh0O1xuICB9XG5cbiAgLyoqXG4gICAqIE91dHB1dCBoZWxwIGluZm9ybWF0aW9uIGZvciB0aGlzIGNvbW1hbmQuXG4gICAqXG4gICAqIE91dHB1dHMgYnVpbHQtaW4gaGVscCwgYW5kIGN1c3RvbSB0ZXh0IGFkZGVkIHVzaW5nIGAuYWRkSGVscFRleHQoKWAuXG4gICAqXG4gICAqIEBwYXJhbSB7eyBlcnJvcjogYm9vbGVhbiB9IHwgRnVuY3Rpb259IFtjb250ZXh0T3B0aW9uc10gLSBwYXNzIHtlcnJvcjp0cnVlfSB0byB3cml0ZSB0byBzdGRlcnIgaW5zdGVhZCBvZiBzdGRvdXRcbiAgICovXG5cbiAgb3V0cHV0SGVscChjb250ZXh0T3B0aW9ucykge1xuICAgIGxldCBkZXByZWNhdGVkQ2FsbGJhY2s7XG4gICAgaWYgKHR5cGVvZiBjb250ZXh0T3B0aW9ucyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgZGVwcmVjYXRlZENhbGxiYWNrID0gY29udGV4dE9wdGlvbnM7XG4gICAgICBjb250ZXh0T3B0aW9ucyA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY29uc3QgY29udGV4dCA9IHRoaXMuX2dldEhlbHBDb250ZXh0KGNvbnRleHRPcHRpb25zKTtcblxuICAgIGNvbnN0IGdyb3VwTGlzdGVuZXJzID0gW107XG4gICAgbGV0IGNvbW1hbmQgPSB0aGlzO1xuICAgIHdoaWxlIChjb21tYW5kKSB7XG4gICAgICBncm91cExpc3RlbmVycy5wdXNoKGNvbW1hbmQpOyAvLyBvcmRlcmVkIGZyb20gY3VycmVudCBjb21tYW5kIHRvIHJvb3RcbiAgICAgIGNvbW1hbmQgPSBjb21tYW5kLnBhcmVudDtcbiAgICB9XG5cbiAgICBncm91cExpc3RlbmVycy5zbGljZSgpLnJldmVyc2UoKS5mb3JFYWNoKGNvbW1hbmQgPT4gY29tbWFuZC5lbWl0KCdiZWZvcmVBbGxIZWxwJywgY29udGV4dCkpO1xuICAgIHRoaXMuZW1pdCgnYmVmb3JlSGVscCcsIGNvbnRleHQpO1xuXG4gICAgbGV0IGhlbHBJbmZvcm1hdGlvbiA9IHRoaXMuaGVscEluZm9ybWF0aW9uKGNvbnRleHQpO1xuICAgIGlmIChkZXByZWNhdGVkQ2FsbGJhY2spIHtcbiAgICAgIGhlbHBJbmZvcm1hdGlvbiA9IGRlcHJlY2F0ZWRDYWxsYmFjayhoZWxwSW5mb3JtYXRpb24pO1xuICAgICAgaWYgKHR5cGVvZiBoZWxwSW5mb3JtYXRpb24gIT09ICdzdHJpbmcnICYmICFCdWZmZXIuaXNCdWZmZXIoaGVscEluZm9ybWF0aW9uKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ291dHB1dEhlbHAgY2FsbGJhY2sgbXVzdCByZXR1cm4gYSBzdHJpbmcgb3IgYSBCdWZmZXInKTtcbiAgICAgIH1cbiAgICB9XG4gICAgY29udGV4dC53cml0ZShoZWxwSW5mb3JtYXRpb24pO1xuXG4gICAgdGhpcy5lbWl0KHRoaXMuX2hlbHBMb25nRmxhZyk7IC8vIGRlcHJlY2F0ZWRcbiAgICB0aGlzLmVtaXQoJ2FmdGVySGVscCcsIGNvbnRleHQpO1xuICAgIGdyb3VwTGlzdGVuZXJzLmZvckVhY2goY29tbWFuZCA9PiBjb21tYW5kLmVtaXQoJ2FmdGVyQWxsSGVscCcsIGNvbnRleHQpKTtcbiAgfTtcblxuICAvKipcbiAgICogWW91IGNhbiBwYXNzIGluIGZsYWdzIGFuZCBhIGRlc2NyaXB0aW9uIHRvIG92ZXJyaWRlIHRoZSBoZWxwXG4gICAqIGZsYWdzIGFuZCBoZWxwIGRlc2NyaXB0aW9uIGZvciB5b3VyIGNvbW1hbmQuIFBhc3MgaW4gZmFsc2UgdG9cbiAgICogZGlzYWJsZSB0aGUgYnVpbHQtaW4gaGVscCBvcHRpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nIHwgYm9vbGVhbn0gW2ZsYWdzXVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW2Rlc2NyaXB0aW9uXVxuICAgKiBAcmV0dXJuIHtDb21tYW5kfSBgdGhpc2AgY29tbWFuZCBmb3IgY2hhaW5pbmdcbiAgICovXG5cbiAgaGVscE9wdGlvbihmbGFncywgZGVzY3JpcHRpb24pIHtcbiAgICBpZiAodHlwZW9mIGZsYWdzID09PSAnYm9vbGVhbicpIHtcbiAgICAgIHRoaXMuX2hhc0hlbHBPcHRpb24gPSBmbGFncztcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICB0aGlzLl9oZWxwRmxhZ3MgPSBmbGFncyB8fCB0aGlzLl9oZWxwRmxhZ3M7XG4gICAgdGhpcy5faGVscERlc2NyaXB0aW9uID0gZGVzY3JpcHRpb24gfHwgdGhpcy5faGVscERlc2NyaXB0aW9uO1xuXG4gICAgY29uc3QgaGVscEZsYWdzID0gX3BhcnNlT3B0aW9uRmxhZ3ModGhpcy5faGVscEZsYWdzKTtcbiAgICB0aGlzLl9oZWxwU2hvcnRGbGFnID0gaGVscEZsYWdzLnNob3J0RmxhZztcbiAgICB0aGlzLl9oZWxwTG9uZ0ZsYWcgPSBoZWxwRmxhZ3MubG9uZ0ZsYWc7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogT3V0cHV0IGhlbHAgaW5mb3JtYXRpb24gYW5kIGV4aXQuXG4gICAqXG4gICAqIE91dHB1dHMgYnVpbHQtaW4gaGVscCwgYW5kIGN1c3RvbSB0ZXh0IGFkZGVkIHVzaW5nIGAuYWRkSGVscFRleHQoKWAuXG4gICAqXG4gICAqIEBwYXJhbSB7eyBlcnJvcjogYm9vbGVhbiB9fSBbY29udGV4dE9wdGlvbnNdIC0gcGFzcyB7ZXJyb3I6dHJ1ZX0gdG8gd3JpdGUgdG8gc3RkZXJyIGluc3RlYWQgb2Ygc3Rkb3V0XG4gICAqL1xuXG4gIGhlbHAoY29udGV4dE9wdGlvbnMpIHtcbiAgICB0aGlzLm91dHB1dEhlbHAoY29udGV4dE9wdGlvbnMpO1xuICAgIGxldCBleGl0Q29kZSA9IHByb2Nlc3MuZXhpdENvZGUgfHwgMDtcbiAgICBpZiAoZXhpdENvZGUgPT09IDAgJiYgY29udGV4dE9wdGlvbnMgJiYgdHlwZW9mIGNvbnRleHRPcHRpb25zICE9PSAnZnVuY3Rpb24nICYmIGNvbnRleHRPcHRpb25zLmVycm9yKSB7XG4gICAgICBleGl0Q29kZSA9IDE7XG4gICAgfVxuICAgIC8vIG1lc3NhZ2U6IGRvIG5vdCBoYXZlIGFsbCBkaXNwbGF5ZWQgdGV4dCBhdmFpbGFibGUgc28gb25seSBwYXNzaW5nIHBsYWNlaG9sZGVyLlxuICAgIHRoaXMuX2V4aXQoZXhpdENvZGUsICdjb21tYW5kZXIuaGVscCcsICcob3V0cHV0SGVscCknKTtcbiAgfTtcblxuICAvKipcbiAgICogQWRkIGFkZGl0aW9uYWwgdGV4dCB0byBiZSBkaXNwbGF5ZWQgd2l0aCB0aGUgYnVpbHQtaW4gaGVscC5cbiAgICpcbiAgICogUG9zaXRpb24gaXMgJ2JlZm9yZScgb3IgJ2FmdGVyJyB0byBhZmZlY3QganVzdCB0aGlzIGNvbW1hbmQsXG4gICAqIGFuZCAnYmVmb3JlQWxsJyBvciAnYWZ0ZXJBbGwnIHRvIGFmZmVjdCB0aGlzIGNvbW1hbmQgYW5kIGFsbCBpdHMgc3ViY29tbWFuZHMuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBwb3NpdGlvbiAtIGJlZm9yZSBvciBhZnRlciBidWlsdC1pbiBoZWxwXG4gICAqIEBwYXJhbSB7c3RyaW5nIHwgRnVuY3Rpb259IHRleHQgLSBzdHJpbmcgdG8gYWRkLCBvciBhIGZ1bmN0aW9uIHJldHVybmluZyBhIHN0cmluZ1xuICAgKiBAcmV0dXJuIHtDb21tYW5kfSBgdGhpc2AgY29tbWFuZCBmb3IgY2hhaW5pbmdcbiAgICovXG4gIGFkZEhlbHBUZXh0KHBvc2l0aW9uLCB0ZXh0KSB7XG4gICAgY29uc3QgYWxsb3dlZFZhbHVlcyA9IFsnYmVmb3JlQWxsJywgJ2JlZm9yZScsICdhZnRlcicsICdhZnRlckFsbCddO1xuICAgIGlmICghYWxsb3dlZFZhbHVlcy5pbmNsdWRlcyhwb3NpdGlvbikpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVW5leHBlY3RlZCB2YWx1ZSBmb3IgcG9zaXRpb24gdG8gYWRkSGVscFRleHQuXG5FeHBlY3Rpbmcgb25lIG9mICcke2FsbG93ZWRWYWx1ZXMuam9pbihcIicsICdcIil9J2ApO1xuICAgIH1cbiAgICBjb25zdCBoZWxwRXZlbnQgPSBgJHtwb3NpdGlvbn1IZWxwYDtcbiAgICB0aGlzLm9uKGhlbHBFdmVudCwgKGNvbnRleHQpID0+IHtcbiAgICAgIGxldCBoZWxwU3RyO1xuICAgICAgaWYgKHR5cGVvZiB0ZXh0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGhlbHBTdHIgPSB0ZXh0KHsgZXJyb3I6IGNvbnRleHQuZXJyb3IsIGNvbW1hbmQ6IGNvbnRleHQuY29tbWFuZCB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGhlbHBTdHIgPSB0ZXh0O1xuICAgICAgfVxuICAgICAgLy8gSWdub3JlIGZhbHN5IHZhbHVlIHdoZW4gbm90aGluZyB0byBvdXRwdXQuXG4gICAgICBpZiAoaGVscFN0cikge1xuICAgICAgICBjb250ZXh0LndyaXRlKGAke2hlbHBTdHJ9XFxuYCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbn07XG5cbi8qKlxuICogRXhwb3NlIHRoZSByb290IGNvbW1hbmQuXG4gKi9cblxuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gbmV3IENvbW1hbmQoKTtcbmV4cG9ydHMucHJvZ3JhbSA9IGV4cG9ydHM7IC8vIE1vcmUgZXhwbGljaXQgYWNjZXNzIHRvIGdsb2JhbCBjb21tYW5kLlxuXG4vKipcbiAqIEV4cG9zZSBjbGFzc2VzXG4gKi9cblxuZXhwb3J0cy5Db21tYW5kID0gQ29tbWFuZDtcbmV4cG9ydHMuT3B0aW9uID0gT3B0aW9uO1xuZXhwb3J0cy5Db21tYW5kZXJFcnJvciA9IENvbW1hbmRlckVycm9yO1xuZXhwb3J0cy5JbnZhbGlkT3B0aW9uQXJndW1lbnRFcnJvciA9IEludmFsaWRPcHRpb25Bcmd1bWVudEVycm9yO1xuZXhwb3J0cy5IZWxwID0gSGVscDtcblxuLyoqXG4gKiBDYW1lbC1jYXNlIHRoZSBnaXZlbiBgZmxhZ2BcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gZmxhZ1xuICogQHJldHVybiB7c3RyaW5nfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gY2FtZWxjYXNlKGZsYWcpIHtcbiAgcmV0dXJuIGZsYWcuc3BsaXQoJy0nKS5yZWR1Y2UoKHN0ciwgd29yZCkgPT4ge1xuICAgIHJldHVybiBzdHIgKyB3b3JkWzBdLnRvVXBwZXJDYXNlKCkgKyB3b3JkLnNsaWNlKDEpO1xuICB9KTtcbn1cblxuLyoqXG4gKiBPdXRwdXQgaGVscCBpbmZvcm1hdGlvbiBpZiBoZWxwIGZsYWdzIHNwZWNpZmllZFxuICpcbiAqIEBwYXJhbSB7Q29tbWFuZH0gY21kIC0gY29tbWFuZCB0byBvdXRwdXQgaGVscCBmb3JcbiAqIEBwYXJhbSB7QXJyYXl9IGFyZ3MgLSBhcnJheSBvZiBvcHRpb25zIHRvIHNlYXJjaCBmb3IgaGVscCBmbGFnc1xuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gb3V0cHV0SGVscElmUmVxdWVzdGVkKGNtZCwgYXJncykge1xuICBjb25zdCBoZWxwT3B0aW9uID0gY21kLl9oYXNIZWxwT3B0aW9uICYmIGFyZ3MuZmluZChhcmcgPT4gYXJnID09PSBjbWQuX2hlbHBMb25nRmxhZyB8fCBhcmcgPT09IGNtZC5faGVscFNob3J0RmxhZyk7XG4gIGlmIChoZWxwT3B0aW9uKSB7XG4gICAgY21kLm91dHB1dEhlbHAoKTtcbiAgICAvLyAoRG8gbm90IGhhdmUgYWxsIGRpc3BsYXllZCB0ZXh0IGF2YWlsYWJsZSBzbyBvbmx5IHBhc3NpbmcgcGxhY2Vob2xkZXIuKVxuICAgIGNtZC5fZXhpdCgwLCAnY29tbWFuZGVyLmhlbHBEaXNwbGF5ZWQnLCAnKG91dHB1dEhlbHApJyk7XG4gIH1cbn1cblxuLyoqXG4gKiBUYWtlcyBhbiBhcmd1bWVudCBhbmQgcmV0dXJucyBpdHMgaHVtYW4gcmVhZGFibGUgZXF1aXZhbGVudCBmb3IgaGVscCB1c2FnZS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gYXJnXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBodW1hblJlYWRhYmxlQXJnTmFtZShhcmcpIHtcbiAgY29uc3QgbmFtZU91dHB1dCA9IGFyZy5uYW1lICsgKGFyZy52YXJpYWRpYyA9PT0gdHJ1ZSA/ICcuLi4nIDogJycpO1xuXG4gIHJldHVybiBhcmcucmVxdWlyZWRcbiAgICA/ICc8JyArIG5hbWVPdXRwdXQgKyAnPidcbiAgICA6ICdbJyArIG5hbWVPdXRwdXQgKyAnXSc7XG59XG5cbi8qKlxuICogUGFyc2UgdGhlIHNob3J0IGFuZCBsb25nIGZsYWcgb3V0IG9mIHNvbWV0aGluZyBsaWtlICctbSwtLW1peGVkIDx2YWx1ZT4nXG4gKlxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gX3BhcnNlT3B0aW9uRmxhZ3MoZmxhZ3MpIHtcbiAgbGV0IHNob3J0RmxhZztcbiAgbGV0IGxvbmdGbGFnO1xuICAvLyBVc2Ugb3JpZ2luYWwgdmVyeSBsb29zZSBwYXJzaW5nIHRvIG1haW50YWluIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IGZvciBub3csXG4gIC8vIHdoaWNoIGFsbG93ZWQgZm9yIGV4YW1wbGUgdW5pbnRlbmRlZCBgLXN3LCAtLXNob3J0LXdvcmRgIFtzaWNdLlxuICBjb25zdCBmbGFnUGFydHMgPSBmbGFncy5zcGxpdCgvWyB8LF0rLyk7XG4gIGlmIChmbGFnUGFydHMubGVuZ3RoID4gMSAmJiAhL15bWzxdLy50ZXN0KGZsYWdQYXJ0c1sxXSkpIHNob3J0RmxhZyA9IGZsYWdQYXJ0cy5zaGlmdCgpO1xuICBsb25nRmxhZyA9IGZsYWdQYXJ0cy5zaGlmdCgpO1xuICAvLyBBZGQgc3VwcG9ydCBmb3IgbG9uZSBzaG9ydCBmbGFnIHdpdGhvdXQgc2lnbmlmaWNhbnRseSBjaGFuZ2luZyBwYXJzaW5nIVxuICBpZiAoIXNob3J0RmxhZyAmJiAvXi1bXi1dJC8udGVzdChsb25nRmxhZykpIHtcbiAgICBzaG9ydEZsYWcgPSBsb25nRmxhZztcbiAgICBsb25nRmxhZyA9IHVuZGVmaW5lZDtcbiAgfVxuICByZXR1cm4geyBzaG9ydEZsYWcsIGxvbmdGbGFnIH07XG59XG5cbi8qKlxuICogU2NhbiBhcmd1bWVudHMgYW5kIGluY3JlbWVudCBwb3J0IG51bWJlciBmb3IgaW5zcGVjdCBjYWxscyAodG8gYXZvaWQgY29uZmxpY3RzIHdoZW4gc3Bhd25pbmcgbmV3IGNvbW1hbmQpLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nW119IGFyZ3MgLSBhcnJheSBvZiBhcmd1bWVudHMgZnJvbSBub2RlLmV4ZWNBcmd2XG4gKiBAcmV0dXJucyB7c3RyaW5nW119XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBpbmNyZW1lbnROb2RlSW5zcGVjdG9yUG9ydChhcmdzKSB7XG4gIC8vIFRlc3RpbmcgZm9yIHRoZXNlIG9wdGlvbnM6XG4gIC8vICAtLWluc3BlY3RbPVtob3N0Ol1wb3J0XVxuICAvLyAgLS1pbnNwZWN0LWJya1s9W2hvc3Q6XXBvcnRdXG4gIC8vICAtLWluc3BlY3QtcG9ydD1baG9zdDpdcG9ydFxuICByZXR1cm4gYXJncy5tYXAoKGFyZykgPT4ge1xuICAgIGlmICghYXJnLnN0YXJ0c1dpdGgoJy0taW5zcGVjdCcpKSB7XG4gICAgICByZXR1cm4gYXJnO1xuICAgIH1cbiAgICBsZXQgZGVidWdPcHRpb247XG4gICAgbGV0IGRlYnVnSG9zdCA9ICcxMjcuMC4wLjEnO1xuICAgIGxldCBkZWJ1Z1BvcnQgPSAnOTIyOSc7XG4gICAgbGV0IG1hdGNoO1xuICAgIGlmICgobWF0Y2ggPSBhcmcubWF0Y2goL14oLS1pbnNwZWN0KC1icmspPykkLykpICE9PSBudWxsKSB7XG4gICAgICAvLyBlLmcuIC0taW5zcGVjdFxuICAgICAgZGVidWdPcHRpb24gPSBtYXRjaFsxXTtcbiAgICB9IGVsc2UgaWYgKChtYXRjaCA9IGFyZy5tYXRjaCgvXigtLWluc3BlY3QoLWJya3wtcG9ydCk/KT0oW146XSspJC8pKSAhPT0gbnVsbCkge1xuICAgICAgZGVidWdPcHRpb24gPSBtYXRjaFsxXTtcbiAgICAgIGlmICgvXlxcZCskLy50ZXN0KG1hdGNoWzNdKSkge1xuICAgICAgICAvLyBlLmcuIC0taW5zcGVjdD0xMjM0XG4gICAgICAgIGRlYnVnUG9ydCA9IG1hdGNoWzNdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gZS5nLiAtLWluc3BlY3Q9bG9jYWxob3N0XG4gICAgICAgIGRlYnVnSG9zdCA9IG1hdGNoWzNdO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoKG1hdGNoID0gYXJnLm1hdGNoKC9eKC0taW5zcGVjdCgtYnJrfC1wb3J0KT8pPShbXjpdKyk6KFxcZCspJC8pKSAhPT0gbnVsbCkge1xuICAgICAgLy8gZS5nLiAtLWluc3BlY3Q9bG9jYWxob3N0OjEyMzRcbiAgICAgIGRlYnVnT3B0aW9uID0gbWF0Y2hbMV07XG4gICAgICBkZWJ1Z0hvc3QgPSBtYXRjaFszXTtcbiAgICAgIGRlYnVnUG9ydCA9IG1hdGNoWzRdO1xuICAgIH1cblxuICAgIGlmIChkZWJ1Z09wdGlvbiAmJiBkZWJ1Z1BvcnQgIT09ICcwJykge1xuICAgICAgcmV0dXJuIGAke2RlYnVnT3B0aW9ufT0ke2RlYnVnSG9zdH06JHtwYXJzZUludChkZWJ1Z1BvcnQpICsgMX1gO1xuICAgIH1cbiAgICByZXR1cm4gYXJnO1xuICB9KTtcbn1cbiIsIi8vXG4vLyBDb3B5cmlnaHQgKGMpIDIwMjEsIFRleGFzIEluc3RydW1lbnRzIEluY29ycG9yYXRlZFxuLy8gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vXG4vLyBSZWRpc3RyaWJ1dGlvbiBhbmQgdXNlIGluIHNvdXJjZSBhbmQgYmluYXJ5IGZvcm1zLCB3aXRoIG9yIHdpdGhvdXRcbi8vIG1vZGlmaWNhdGlvbiwgYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uc1xuLy8gYXJlIG1ldDpcbi8vXG4vLyAqICBSZWRpc3RyaWJ1dGlvbnMgb2Ygc291cmNlIGNvZGUgbXVzdCByZXRhaW4gdGhlIGFib3ZlIGNvcHlyaWdodFxuLy8gICAgbm90aWNlLCB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyLlxuLy9cbi8vICogIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmUgY29weXJpZ2h0XG4vLyAgICBub3RpY2UsIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIgaW4gdGhlXG4vLyAgICBkb2N1bWVudGF0aW9uIGFuZC9vciBvdGhlciBtYXRlcmlhbHMgcHJvdmlkZWQgd2l0aCB0aGUgZGlzdHJpYnV0aW9uLlxuLy9cbi8vICogIE5laXRoZXIgdGhlIG5hbWUgb2YgVGV4YXMgSW5zdHJ1bWVudHMgSW5jb3Jwb3JhdGVkIG5vciB0aGUgbmFtZXMgb2Zcbi8vICAgIGl0cyBjb250cmlidXRvcnMgbWF5IGJlIHVzZWQgdG8gZW5kb3JzZSBvciBwcm9tb3RlIHByb2R1Y3RzIGRlcml2ZWRcbi8vICAgIGZyb20gdGhpcyBzb2Z0d2FyZSB3aXRob3V0IHNwZWNpZmljIHByaW9yIHdyaXR0ZW4gcGVybWlzc2lvbi5cbi8vXG4vLyBUSElTIFNPRlRXQVJFIElTIFBST1ZJREVEIEJZIFRIRSBDT1BZUklHSFQgSE9MREVSUyBBTkQgQ09OVFJJQlVUT1JTIFwiQVMgSVNcIlxuLy8gQU5EIEFOWSBFWFBSRVNTIE9SIElNUExJRUQgV0FSUkFOVElFUywgSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sXG4vLyBUSEUgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSBBTkQgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSXG4vLyBQVVJQT1NFIEFSRSBESVNDTEFJTUVELiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQ09QWVJJR0hUIE9XTkVSIE9SXG4vLyBDT05UUklCVVRPUlMgQkUgTElBQkxFIEZPUiBBTlkgRElSRUNULCBJTkRJUkVDVCwgSU5DSURFTlRBTCwgU1BFQ0lBTCxcbi8vIEVYRU1QTEFSWSwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIChJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTyxcbi8vIFBST0NVUkVNRU5UIE9GIFNVQlNUSVRVVEUgR09PRFMgT1IgU0VSVklDRVM7IExPU1MgT0YgVVNFLCBEQVRBLCBPUiBQUk9GSVRTO1xuLy8gT1IgQlVTSU5FU1MgSU5URVJSVVBUSU9OKSBIT1dFVkVSIENBVVNFRCBBTkQgT04gQU5ZIFRIRU9SWSBPRiBMSUFCSUxJVFksXG4vLyBXSEVUSEVSIElOIENPTlRSQUNULCBTVFJJQ1QgTElBQklMSVRZLCBPUiBUT1JUIChJTkNMVURJTkcgTkVHTElHRU5DRSBPUlxuLy8gT1RIRVJXSVNFKSBBUklTSU5HIElOIEFOWSBXQVkgT1VUIE9GIFRIRSBVU0UgT0YgVEhJUyBTT0ZUV0FSRSxcbi8vIEVWRU4gSUYgQURWSVNFRCBPRiBUSEUgUE9TU0lCSUxJVFkgT0YgU1VDSCBEQU1BR0UuKVxuXG4vKiBnbG9iYWwgcHJvY2VzcyAqL1xuaW1wb3J0IHtleGlzdHNTeW5jfSAgICAgICAgZnJvbSAgJ2ZzJztcbmltcG9ydCB7cHJvZ3JhbX0gICAgICAgICAgIGZyb20gJ2NvbW1hbmRlcic7XG5pbXBvcnQge2VsZjJycHJjX3NlY3Rpb25zfSBmcm9tICAnLi9lbGYycnByY19zZWN0aW9ucyc7XG5pbXBvcnQgeyBwYXJzZX0gICAgICAgICAgICBmcm9tICdwYXRoJztcblxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5wcm9ncmFtXG4gICAgLnZlcnNpb24gICAgKCcwMC4wMS4wMCcpXG4gICAgLmRlc2NyaXB0aW9uKCdDb252ZXJ0IGFuIEVsZiBmaWxlIHRvIGFuIFJQUkMgZmlsZS4nKVxuICAgIC5vcHRpb24gICAgICgnLWUsIC0tYmlnRW5kaWFuJywgICAnR2VuZXJhdGUgQmlnIEVuZGlhbiBGaWxlJywgZmFsc2UpXG4gICAgLm9wdGlvbiAgICAgKCctbywgLS1vdXQgPHZhbHVlPicsICdUaGUgcGF0aCBmb3IgdGhlIG91dHB1dCBmaWxlJylcbiAgICAuYXJndW1lbnRzICAoJzxlbGZGaWxlPicpXG4gICAgLmFjdGlvbiAgICAgKChlbGZGaWxlKSA9PiAge1xuICAgICAgICBpZiAoIWV4aXN0c1N5bmMoZWxmRmlsZSkpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVsZiBGaWxlICR7ZWxmRmlsZX0gZG9lcyBub3QgZXhpc3RgKTtcbiAgICAgICAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IG9wdHMgPSBwcm9ncmFtLm9wdHMoKTtcblxuICAgICAgICBpZiAoIW9wdHMub3V0KSB7XG4gICAgICAgICAgICBvcHRzLm91dCA9IHBhcnNlKGVsZkZpbGUpLm5hbWUgKyAnLnJwcmMnO1xuICAgICAgICB9XG5cbiAgICAgICAgZWxmMnJwcmNfc2VjdGlvbnMoZWxmRmlsZSwgb3B0cy5vdXQsIG9wdHMuYmlnRW5kaWFuKTtcbiAgICB9KTtcblxucHJvZ3JhbS5wYXJzZSgpOyIsIi8vXG4vLyBDb3B5cmlnaHQgKGMpIDIwMjEsIFRleGFzIEluc3RydW1lbnRzIEluY29ycG9yYXRlZFxuLy8gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vXG4vLyBSZWRpc3RyaWJ1dGlvbiBhbmQgdXNlIGluIHNvdXJjZSBhbmQgYmluYXJ5IGZvcm1zLCB3aXRoIG9yIHdpdGhvdXRcbi8vIG1vZGlmaWNhdGlvbiwgYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uc1xuLy8gYXJlIG1ldDpcbi8vXG4vLyAqICBSZWRpc3RyaWJ1dGlvbnMgb2Ygc291cmNlIGNvZGUgbXVzdCByZXRhaW4gdGhlIGFib3ZlIGNvcHlyaWdodFxuLy8gICAgbm90aWNlLCB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyLlxuLy9cbi8vICogIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmUgY29weXJpZ2h0XG4vLyAgICBub3RpY2UsIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIgaW4gdGhlXG4vLyAgICBkb2N1bWVudGF0aW9uIGFuZC9vciBvdGhlciBtYXRlcmlhbHMgcHJvdmlkZWQgd2l0aCB0aGUgZGlzdHJpYnV0aW9uLlxuLy9cbi8vICogIE5laXRoZXIgdGhlIG5hbWUgb2YgVGV4YXMgSW5zdHJ1bWVudHMgSW5jb3Jwb3JhdGVkIG5vciB0aGUgbmFtZXMgb2Zcbi8vICAgIGl0cyBjb250cmlidXRvcnMgbWF5IGJlIHVzZWQgdG8gZW5kb3JzZSBvciBwcm9tb3RlIHByb2R1Y3RzIGRlcml2ZWRcbi8vICAgIGZyb20gdGhpcyBzb2Z0d2FyZSB3aXRob3V0IHNwZWNpZmljIHByaW9yIHdyaXR0ZW4gcGVybWlzc2lvbi5cbi8vXG4vLyBUSElTIFNPRlRXQVJFIElTIFBST1ZJREVEIEJZIFRIRSBDT1BZUklHSFQgSE9MREVSUyBBTkQgQ09OVFJJQlVUT1JTIFwiQVMgSVNcIlxuLy8gQU5EIEFOWSBFWFBSRVNTIE9SIElNUExJRUQgV0FSUkFOVElFUywgSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sXG4vLyBUSEUgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSBBTkQgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSXG4vLyBQVVJQT1NFIEFSRSBESVNDTEFJTUVELiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQ09QWVJJR0hUIE9XTkVSIE9SXG4vLyBDT05UUklCVVRPUlMgQkUgTElBQkxFIEZPUiBBTlkgRElSRUNULCBJTkRJUkVDVCwgSU5DSURFTlRBTCwgU1BFQ0lBTCxcbi8vIEVYRU1QTEFSWSwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIChJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTyxcbi8vIFBST0NVUkVNRU5UIE9GIFNVQlNUSVRVVEUgR09PRFMgT1IgU0VSVklDRVM7IExPU1MgT0YgVVNFLCBEQVRBLCBPUiBQUk9GSVRTO1xuLy8gT1IgQlVTSU5FU1MgSU5URVJSVVBUSU9OKSBIT1dFVkVSIENBVVNFRCBBTkQgT04gQU5ZIFRIRU9SWSBPRiBMSUFCSUxJVFksXG4vLyBXSEVUSEVSIElOIENPTlRSQUNULCBTVFJJQ1QgTElBQklMSVRZLCBPUiBUT1JUIChJTkNMVURJTkcgTkVHTElHRU5DRSBPUlxuLy8gT1RIRVJXSVNFKSBBUklTSU5HIElOIEFOWSBXQVkgT1VUIE9GIFRIRSBVU0UgT0YgVEhJUyBTT0ZUV0FSRSxcbi8vIEVWRU4gSUYgQURWSVNFRCBPRiBUSEUgUE9TU0lCSUxJVFkgT0YgU1VDSCBEQU1BR0UuKVxuXG4vKiBnbG9iYWwgQnVmZmVyICovXG5pbXBvcnQge29wZW5TeW5jLCBjbG9zZVN5bmMsIHJlYWRTeW5jLCB3cml0ZVN5bmN9IGZyb20gICdmcyc7XG5pbXBvcnQge3JlYWRFbGZGaWxlSGVhZGVyLCByZWFkRWxmU2VjdGlvbkhlYWRlcn0gIGZyb20gICcuL2VsZl9yZWFkZXInO1xuXG5mdW5jdGlvbiB3cml0ZTRieXRlKGJ1ZiA6IEJ1ZmZlciwgdmFsdWUgOiBudW1iZXIsIG9mZnNldCA6IG51bWJlciwgYmlnX2VuZGlhbiAgPSBmYWxzZSkgOiB2b2lkXG57XG4gICAgaWYgKGJpZ19lbmRpYW4pIGJ1Zi53cml0ZVVJbnQzMkJFKHZhbHVlLCBvZmZzZXQpO1xuICAgIGVsc2UgICAgICAgICAgICBidWYud3JpdGVVSW50MzJMRSh2YWx1ZSwgb2Zmc2V0KTtcbn1cblxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIENvbnZlcnQgYW4gRUxGIGZpbGUgdG8gYSBiaW5hcnkgZmlsZSBhbGEgJ29iamNvcHkgLW8gYmluYXJ5J1xuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbmV4cG9ydCBmdW5jdGlvbiBlbGYycnByY19zZWN0aW9ucyhlbGZGaWxlIDogc3RyaW5nLCBycHJjRmlsZSA6IHN0cmluZywgYmlnX2VuZGlhbiAgPSBmYWxzZSkgOiBudW1iZXJcbntcbiAgICBjb25zdCBmRUxGIDogbnVtYmVyID0gb3BlblN5bmMoZWxmRmlsZSwgJ3InKTtcbiAgICBjb25zdCBmaEVMRiA9IHJlYWRFbGZGaWxlSGVhZGVyKGZFTEYpO1xuICAgIGlmIChmaEVMRi5lX2lkZW50X21hZ2ljICE9PSAnXFx4N0ZFTEYnKSByZXR1cm4gMTtcbiAgICBsZXQgc2hFTEYgPSByZWFkRWxmU2VjdGlvbkhlYWRlcihmRUxGLCBmaEVMRik7XG5cbiAgICAvLyBFbGltaW5hdGUgc2dlbWVudHMgd2l0aCB1bmluaXRpYWxpemVkIGRhdGFcbiAgICBzaEVMRiA9IHNoRUxGLmZpbHRlcigocykgPT4gKCEocy5zaF90eXBlICYgMHg4KSkpO1xuICAgIHNoRUxGID0gc2hFTEYuZmlsdGVyKChzKSA9PiAocy5zaF9mbGFncyAmIDB4MikpO1xuICAgIHNoRUxGID0gc2hFTEYuc29ydCgoczEsczIpID0+IChzMS5zaF9hZGRyIDwgczIuc2hfYWRkciA/IC0xIDogczEuc2hfYWRkciA9PSBzMi5zaF9hZGRyID8gMCA6IDEpKTtcblxuICAgIGNvbnN0IGZpbGVIZHJTaXplICAgICA9IDIwO1xuICAgIGNvbnN0IHNlY3Rpb25IZHJTaXplICA9IDIwO1xuICAgIGNvbnN0IHZlcnNpb24gICAgICAgICA9IDE7XG4gICAgY29uc3QgcmVzZXJ2ZWQgICAgICAgID0gMDtcbiAgICBsZXQgICBmaWxlUG9zUlBSQyAgICAgPSAwO1xuICAgIGNvbnN0ICAgZlJQUkMgICAgICAgICAgOiBudW1iZXIgPSBvcGVuU3luYyhycHJjRmlsZSwgJ3cnKTtcbiAgICBjb25zdCAgIGZpbGVIZHIgICAgICAgIDogQnVmZmVyID0gQnVmZmVyLmFsbG9jKGZpbGVIZHJTaXplKTtcblxuICAgIC8vIFdyaXRlIHRoZSBSUFJDIEZpbGUgSGVhZGVyXG4gICAgZmlsZUhkci53cml0ZSgnUlBSQycpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1hZ2ljIHdvcmRcbiAgICB3cml0ZTRieXRlKGZpbGVIZHIsIGZoRUxGLmVfZW50cnksIDQsIGJpZ19lbmRpYW4pOyAgLy8gZW50cnkgcG9pbnRcbiAgICB3cml0ZTRieXRlKGZpbGVIZHIsIHJlc2VydmVkLCAgICAgIDgsIGJpZ19lbmRpYW4pOyAgLy8gcmVzZXJ2ZWRcbiAgICB3cml0ZTRieXRlKGZpbGVIZHIsIHNoRUxGLmxlbmd0aCwgMTIsIGJpZ19lbmRpYW4pOyAgLy8gc2VnbWVudCBjb3VudFxuICAgIHdyaXRlNGJ5dGUoZmlsZUhkciwgdmVyc2lvbiwgICAgICAxNiwgYmlnX2VuZGlhbik7ICAvLyB2ZXJzaW9uXG4gICAgd3JpdGVTeW5jKGZSUFJDLCBmaWxlSGRyLCAwLCBmaWxlSGRyU2l6ZSwgIGZpbGVQb3NSUFJDKTtcbiAgICBmaWxlUG9zUlBSQyArPSBmaWxlSGRyU2l6ZTtcblxuICAgIC8vIFdyaXRlIHRoZSBzZWN0aW9uIEhlYWRlciBhbmQgc2VjdGlvbiBDb250ZW50IGZvciBlYWNoIHNlY3Rpb25cbiAgICBmb3IgKGNvbnN0IHNlY3Qgb2Ygc2hFTEYpIHtcbiAgICAgICAgLy8gV3JpdGUgdGhlIHNlY3Rpb24gaGVhZGVyXG4gICAgICAgIGNvbnN0IHNlY3RIZHIgOiBCdWZmZXIgPSBCdWZmZXIuYWxsb2Moc2VjdGlvbkhkclNpemUpO1xuICAgICAgICB3cml0ZTRieXRlKHNlY3RIZHIsIHNlY3Quc2hfYWRkciwwLCBiaWdfZW5kaWFuKTsgIC8vIHNlZ21lbnQgcnVuIGFkZHJlc3NcbiAgICAgICAgd3JpdGU0Ynl0ZShzZWN0SGRyLCByZXNlcnZlZCwgICAgNCwgYmlnX2VuZGlhbik7ICAvLyByZXNlcnZlZFxuICAgICAgICB3cml0ZTRieXRlKHNlY3RIZHIsIHNlY3Quc2hfc2l6ZSw4LCBiaWdfZW5kaWFuKTsgIC8vIHNlY3Rpb24gc2l6ZVxuICAgICAgICB3cml0ZTRieXRlKHNlY3RIZHIsIHJlc2VydmVkLCAgIDEyLCBiaWdfZW5kaWFuKTsgIC8vIHJlc2VydmVkXG4gICAgICAgIHdyaXRlNGJ5dGUoc2VjdEhkciwgcmVzZXJ2ZWQsICAgMTYsIGJpZ19lbmRpYW4pOyAgLy8gcmVzZXJ2ZWRcbiAgICAgICAgd3JpdGVTeW5jKGZSUFJDLCBzZWN0SGRyLCAwLCBzZWN0aW9uSGRyU2l6ZSwgIGZpbGVQb3NSUFJDKTtcbiAgICAgICAgZmlsZVBvc1JQUkMgKz0gc2VjdGlvbkhkclNpemU7XG5cbiAgICAgICAgLy8gV3JpdGUgdGhlIHNlZ21lbnRcbiAgICAgICAgY29uc3QgYnVmZmVyIDogQnVmZmVyID0gQnVmZmVyLmFsbG9jKHNlY3Quc2hfc2l6ZSk7XG4gICAgICAgIHJlYWRTeW5jIChmRUxGLCAgYnVmZmVyLCAwLCBzZWN0LnNoX3NpemUsIHNlY3Quc2hfb2Zmc2V0KTtcbiAgICAgICAgd3JpdGVTeW5jKGZSUFJDLCBidWZmZXIsIDAsIHNlY3Quc2hfc2l6ZSwgZmlsZVBvc1JQUkMpO1xuICAgICAgICBmaWxlUG9zUlBSQyArPSBzZWN0LnNoX3NpemU7XG4gICAgfVxuXG4gICAgY2xvc2VTeW5jKGZFTEYpO1xuICAgIGNsb3NlU3luYyhmUlBSQyk7XG4gICAgcmV0dXJuIDA7XG59XG4iLCIvL1xuLy8gQ29weXJpZ2h0IChjKSAyMDIxLCBUZXhhcyBJbnN0cnVtZW50cyBJbmNvcnBvcmF0ZWRcbi8vIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vL1xuLy8gUmVkaXN0cmlidXRpb24gYW5kIHVzZSBpbiBzb3VyY2UgYW5kIGJpbmFyeSBmb3Jtcywgd2l0aCBvciB3aXRob3V0XG4vLyBtb2RpZmljYXRpb24sIGFyZSBwZXJtaXR0ZWQgcHJvdmlkZWQgdGhhdCB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnNcbi8vIGFyZSBtZXQ6XG4vL1xuLy8gKiAgUmVkaXN0cmlidXRpb25zIG9mIHNvdXJjZSBjb2RlIG11c3QgcmV0YWluIHRoZSBhYm92ZSBjb3B5cmlnaHRcbi8vICAgIG5vdGljZSwgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lci5cbi8vXG4vLyAqICBSZWRpc3RyaWJ1dGlvbnMgaW4gYmluYXJ5IGZvcm0gbXVzdCByZXByb2R1Y2UgdGhlIGFib3ZlIGNvcHlyaWdodFxuLy8gICAgbm90aWNlLCB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyIGluIHRoZVxuLy8gICAgZG9jdW1lbnRhdGlvbiBhbmQvb3Igb3RoZXIgbWF0ZXJpYWxzIHByb3ZpZGVkIHdpdGggdGhlIGRpc3RyaWJ1dGlvbi5cbi8vXG4vLyAqICBOZWl0aGVyIHRoZSBuYW1lIG9mIFRleGFzIEluc3RydW1lbnRzIEluY29ycG9yYXRlZCBub3IgdGhlIG5hbWVzIG9mXG4vLyAgICBpdHMgY29udHJpYnV0b3JzIG1heSBiZSB1c2VkIHRvIGVuZG9yc2Ugb3IgcHJvbW90ZSBwcm9kdWN0cyBkZXJpdmVkXG4vLyAgICBmcm9tIHRoaXMgc29mdHdhcmUgd2l0aG91dCBzcGVjaWZpYyBwcmlvciB3cml0dGVuIHBlcm1pc3Npb24uXG4vL1xuLy8gVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgQU5EIENPTlRSSUJVVE9SUyBcIkFTIElTXCJcbi8vIEFORCBBTlkgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLFxuLy8gVEhFIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUlxuLy8gUFVSUE9TRSBBUkUgRElTQ0xBSU1FRC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIENPUFlSSUdIVCBPV05FUiBPUlxuLy8gQ09OVFJJQlVUT1JTIEJFIExJQUJMRSBGT1IgQU5ZIERJUkVDVCwgSU5ESVJFQ1QsIElOQ0lERU5UQUwsIFNQRUNJQUwsXG4vLyBFWEVNUExBUlksIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyAoSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sXG4vLyBQUk9DVVJFTUVOVCBPRiBTVUJTVElUVVRFIEdPT0RTIE9SIFNFUlZJQ0VTOyBMT1NTIE9GIFVTRSwgREFUQSwgT1IgUFJPRklUUztcbi8vIE9SIEJVU0lORVNTIElOVEVSUlVQVElPTikgSE9XRVZFUiBDQVVTRUQgQU5EIE9OIEFOWSBUSEVPUlkgT0YgTElBQklMSVRZLFxuLy8gV0hFVEhFUiBJTiBDT05UUkFDVCwgU1RSSUNUIExJQUJJTElUWSwgT1IgVE9SVCAoSU5DTFVESU5HIE5FR0xJR0VOQ0UgT1Jcbi8vIE9USEVSV0lTRSkgQVJJU0lORyBJTiBBTlkgV0FZIE9VVCBPRiBUSEUgVVNFIE9GIFRISVMgU09GVFdBUkUsXG4vLyBFVkVOIElGIEFEVklTRUQgT0YgVEhFIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLlxuXG4vKiBnbG9iYWwgQnVmZmVyLCBCaWdJbnQgKi9cbmltcG9ydCB7b3BlblN5bmMsIGNsb3NlU3luYywgcmVhZFN5bmMgfSBmcm9tICAnZnMnO1xuXG4vLyBEb2VzIG5vdCBjdXJyZW50bHkgaGFuZGxlIGFkZHJlc3NlcyA+IDUzIGJpdHNcblxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIEVMRiBGaWxlIEhlYWRlciBGaWVsZHNcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5pbnRlcmZhY2UgZWxmRmlsZUhlYWRlciB7XG4gICAgICAgIGVfaWRlbnRfbWFnaWMgICAgIDogc3RyaW5nLFxuICAgICAgICBlX2lkZW50X2NsYXNzICAgICA6IG51bWJlcixcbiAgICAgICAgZV9pZGVudF9kYXRhICAgICAgOiBudW1iZXIsXG4gICAgICAgIGVfaWRlbnRfdmVyc2lvbiAgIDogbnVtYmVyLFxuICAgICAgICBlX2lkZW50X29zYWJpICAgICA6IG51bWJlcixcbiAgICAgICAgZV9pZGVudF9hYml2ZXJzaW9uOiBudW1iZXIsXG4gICAgICAgIGVfdHlwZSAgICAgICAgICAgIDogbnVtYmVyLFxuICAgICAgICBlX21hY2hpbmUgICAgICAgICA6IG51bWJlcixcbiAgICAgICAgZV92ZXJzaW9uICAgICAgICAgOiBudW1iZXIsXG4gICAgICAgIGVfZW50cnkgICAgICAgICAgIDogbnVtYmVyLFxuICAgICAgICBlX3Bob2ZmICAgICAgICAgICA6IG51bWJlcixcbiAgICAgICAgZV9zaG9mZiAgICAgICAgICAgOiBudW1iZXIsXG4gICAgICAgIGVfZmxhZ3MgICAgICAgICAgIDogbnVtYmVyLFxuICAgICAgICBlX2Voc2l6ZSAgICAgICAgICA6IG51bWJlcixcbiAgICAgICAgZV9waGVudHNpemUgICAgICAgOiBudW1iZXIsXG4gICAgICAgIGVfcGhudW0gICAgICAgICAgIDogbnVtYmVyLFxuICAgICAgICBlX3NoZW50c2l6ZSAgICAgICA6IG51bWJlcixcbiAgICAgICAgZV9zaG51bSAgICAgICAgICAgOiBudW1iZXIsXG4gICAgICAgIGVfc2hzdHJuZHggICAgICAgIDogbnVtYmVyXG4gICAgfVxuXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gRUxGIFByb2dyYW0gSGVhZGVyIEZpZWxkcyAtIENvbnRhaW5zIHRoZSBFTEYgU2VnbWVudHNcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5pbnRlcmZhY2UgZWxmUHJvZ3JhbUhlYWRlciB7XG4gICAgICAgIHBfdHlwZSAgICAgOiBudW1iZXIsXG4gICAgICAgIHBfb2Zmc2V0ICAgOiBudW1iZXIsXG4gICAgICAgIHBfdmFkZHIgICAgOiBudW1iZXIsXG4gICAgICAgIHBfcGFkZHIgICAgOiBudW1iZXIsXG4gICAgICAgIHBfZmlsZXN6ICAgOiBudW1iZXIsXG4gICAgICAgIHBfbWVtc3ogICAgOiBudW1iZXIsXG4gICAgICAgIHBfZmxhZ3MgICAgOiBudW1iZXIsXG4gICAgICAgIHBfYWxpZ24gICAgOiBudW1iZXJcbiAgICB9XG5cbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBFTEYgU2VjdGlvbiBIZWFkZXIgRmllbGRzIC0gQ29udGFpbnMgdGhlIEVMRiBTZWN0aW9uc1xuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbmludGVyZmFjZSBlbGZTZWN0aW9uSGVhZGVyIHtcbiAgICBuYW1lICAgICAgICAgOiBzdHJpbmcsXG4gICAgc2hfbmFtZSAgICAgIDogbnVtYmVyLFxuICAgIHNoX3R5cGUgICAgICA6IG51bWJlcixcbiAgICBzaF9mbGFncyAgICAgOiBudW1iZXIsXG4gICAgc2hfYWRkciAgICAgIDogbnVtYmVyLFxuICAgIHNoX29mZnNldCAgICA6IG51bWJlcixcbiAgICBzaF9zaXplICAgICAgOiBudW1iZXIsXG4gICAgc2hfbGluayAgICAgIDogbnVtYmVyLFxuICAgIHNoX2luZm8gICAgICA6IG51bWJlcixcbiAgICBzaF9hZGRyYWxpZ24gOiBudW1iZXIsXG4gICAgc2hfZW50c2l6ZSAgIDogbnVtYmVyXG4gICAgfVxuXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gUmVhZCBhIHNpemVkIGZpZWxkIGZyb20gYSBidWZmZXIgaGFuZGxpbmcgZW5kaWFuZXNzXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuZnVuY3Rpb24gZXh0cmFjdChlbmRpYW4gOiBudW1iZXIsIGJ1ZmZlciA6IEJ1ZmZlciwgb2Zmc2V0IDogbnVtYmVyLCBzaXplIDogbnVtYmVyKSA6IG51bWJlclxue1xuICAgIGlmIChzaXplIDwgOClcbiAgICAgICAgIHJldHVybiAoZW5kaWFuID09IDEpID8gYnVmZmVyLnJlYWRVSW50TEUob2Zmc2V0LCBzaXplKSA6IGJ1ZmZlci5yZWFkVUludEJFKG9mZnNldCwgc2l6ZSk7XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gKGVuZGlhbiA9PSAxKSA/IGJ1ZmZlci5yZWFkQmlnVUludDY0TEUob2Zmc2V0KSA6IGJ1ZmZlci5yZWFkQmlnVUludDY0QkUob2Zmc2V0KTtcbiAgICAgICAgaWYgKHZhbHVlID4gQmlnSW50KE51bWJlci5NQVhfU0FGRV9JTlRFR0VSKSlcbiAgICAgICAgICAgIHRocm93KCdlbGYgcmVhZGVyIGNhbm5vdCBoYW5kbGUgOCBieXRlIGZpZWxkcyB3aXRoID4gNTMgYml0cycpO1xuICAgICAgICByZXR1cm4gTnVtYmVyKHZhbHVlKTtcbiAgICB9XG59XG5cbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBSZWFkIFRoZSBFTEYgZmlsZSBoZWFkZXJcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5leHBvcnQgZnVuY3Rpb24gcmVhZEVsZkZpbGVIZWFkZXIoZmQgOiBudW1iZXIpIDogZWxmRmlsZUhlYWRlclxue1xuICAgIC8vIFJlYWQgdGhlIGZpcnN0IDY0IGJ5dGVzIG9mIHRoZSBFbGYgZmlsZSBpbnRvIGEgYnVmZmVyXG4gICAgY29uc3QgYnVmZmVyIDogQnVmZmVyID0gQnVmZmVyLmFsbG9jKDY0KTtcbiAgICByZWFkU3luYyhmZCwgYnVmZmVyLCAwLCA2NCwgMCk7XG5cbiAgICAvLyBEZXRlcm1pbmUgdGhlIGVuZGlhbi1uZXNzIG9mIHRoZSBmaWxlIGFuZCBpZiBhZGRyZXNzZXMgYXJlIDMyIG9yIDY0IGJpdHNcbiAgICBjb25zdCBlbmRpYW4gICA6IG51bWJlciA9IGJ1ZmZlci5yZWFkVUludDgoMHg1KTsgLy8gMSAtPiBMRSwgMCAtPiBCRVxuICAgIGNvbnN0IGFkZHJTaXplIDogbnVtYmVyID0gYnVmZmVyLnJlYWRVSW50OCgweDQpICogNDtcblxuICAgIGNvbnN0IGZoIDogZWxmRmlsZUhlYWRlciA9IHtcbiAgICAgICAgZV9pZGVudF9tYWdpYyAgICAgOiBidWZmZXIudG9TdHJpbmcoJ3V0ZjgnLCAwLCA0KSxcbiAgICAgICAgZV9pZGVudF9jbGFzcyAgICAgOiBidWZmZXIucmVhZFVJbnQ4KDB4NCksXG4gICAgICAgIGVfaWRlbnRfZGF0YSAgICAgIDogYnVmZmVyLnJlYWRVSW50OCgweDUpLFxuICAgICAgICBlX2lkZW50X3ZlcnNpb24gICA6IGJ1ZmZlci5yZWFkVUludDgoMHg2KSxcbiAgICAgICAgZV9pZGVudF9vc2FiaSAgICAgOiBidWZmZXIucmVhZFVJbnQ4KDB4NyksXG4gICAgICAgIGVfaWRlbnRfYWJpdmVyc2lvbjogYnVmZmVyLnJlYWRVSW50OCgweDgpLFxuICAgICAgICBlX3R5cGUgICAgICAgICAgICA6IGV4dHJhY3QoZW5kaWFuLCBidWZmZXIsIDB4MTAsIDIpLFxuICAgICAgICBlX21hY2hpbmUgICAgICAgICA6IGV4dHJhY3QoZW5kaWFuLCBidWZmZXIsIDB4MTIsIDIpLFxuICAgICAgICBlX3ZlcnNpb24gICAgICAgICA6IGV4dHJhY3QoZW5kaWFuLCBidWZmZXIsIDB4MTQsIDQpLFxuICAgICAgICBlX2VudHJ5ICAgICAgICAgICA6IGV4dHJhY3QoZW5kaWFuLCBidWZmZXIsIDB4MTgsIGFkZHJTaXplKSxcbiAgICAgICAgZV9waG9mZiAgICAgICAgICAgOiBleHRyYWN0KGVuZGlhbiwgYnVmZmVyLCAweDE4ICsgYWRkclNpemUsIGFkZHJTaXplKSxcbiAgICAgICAgZV9zaG9mZiAgICAgICAgICAgOiBleHRyYWN0KGVuZGlhbiwgYnVmZmVyLCAweDE4ICsgMiphZGRyU2l6ZSwgYWRkclNpemUpLFxuICAgICAgICBlX2ZsYWdzICAgICAgICAgICA6IGV4dHJhY3QoZW5kaWFuLCBidWZmZXIsIDB4MTggKyAzKmFkZHJTaXplLCA0KSxcbiAgICAgICAgZV9laHNpemUgICAgICAgICAgOiBleHRyYWN0KGVuZGlhbiwgYnVmZmVyLCAweDFDICsgMyphZGRyU2l6ZSwgMiksXG4gICAgICAgIGVfcGhlbnRzaXplICAgICAgIDogZXh0cmFjdChlbmRpYW4sIGJ1ZmZlciwgMHgxRSArIDMqYWRkclNpemUsIDIpLFxuICAgICAgICBlX3BobnVtICAgICAgICAgICA6IGV4dHJhY3QoZW5kaWFuLCBidWZmZXIsIDB4MjAgKyAzKmFkZHJTaXplLCAyKSxcbiAgICAgICAgZV9zaGVudHNpemUgICAgICAgOiBleHRyYWN0KGVuZGlhbiwgYnVmZmVyLCAweDIyICsgMyphZGRyU2l6ZSwgMiksXG4gICAgICAgIGVfc2hudW0gICAgICAgICAgIDogZXh0cmFjdChlbmRpYW4sIGJ1ZmZlciwgMHgyNCArIDMqYWRkclNpemUsIDIpLFxuICAgICAgICBlX3Noc3RybmR4ICAgICAgICA6IGV4dHJhY3QoZW5kaWFuLCBidWZmZXIsIDB4MjYgKyAzKmFkZHJTaXplLCAyKVxuICAgIH07XG5cbiAgICByZXR1cm4gZmg7XG59XG5cbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBSZWFkIFRoZSBFTEYgcHJvZ3JhbSBoZWFkZXIsIHdoaWNoIGNvbnRhaW5zIHRoZSBzZWdtZW50c1xuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbmV4cG9ydCBmdW5jdGlvbiByZWFkRWxmUHJvZ3JhbUhlYWRlcihmZCA6IG51bWJlciwgZmggOiBlbGZGaWxlSGVhZGVyKSA6IGVsZlByb2dyYW1IZWFkZXIgW11cbntcbiAgICBjb25zdCBlbmRpYW4gID0gTnVtYmVyKGZoLmVfaWRlbnRfZGF0YSk7XG4gICAgY29uc3QgcGhTaXplICA9IE51bWJlcihmaC5lX3BobnVtICogZmguZV9waGVudHNpemUpO1xuICAgIGNvbnN0IGJ1ZmZlciA6IEJ1ZmZlciA9IEJ1ZmZlci5hbGxvYyhwaFNpemUpO1xuICAgIGxldCBwaEVudCAgOiBlbGZQcm9ncmFtSGVhZGVyO1xuICAgIGNvbnN0IHBoICAgICA6IGVsZlByb2dyYW1IZWFkZXJbXSA9IFtdO1xuXG4gICAgcmVhZFN5bmMoZmQsIGJ1ZmZlciwgMCwgcGhTaXplLCBmaC5lX3Bob2ZmKTtcblxuICAgIGZvciAobGV0IGlkeCAgPSAwIDsgaWR4IDwgZmguZV9waG51bTsgaWR4ICs9IDEpIHtcbiAgICAgICAgY29uc3Qgb2Zmc2V0IDogbnVtYmVyID0gaWR4ICogTnVtYmVyKGZoLmVfcGhlbnRzaXplKTtcbiAgICAgICAgaWYgKGZoLmVfcGhlbnRzaXplID09IDMyKSAvLyAzMiBiaXQgbWFjaGluZVxuICAgICAgICAgICAgcGhFbnQgPSB7XG4gICAgICAgICAgICAgICAgcF90eXBlICAgICA6IGV4dHJhY3QoZW5kaWFuLCBidWZmZXIsIG9mZnNldCsweDAsIDQpLFxuICAgICAgICAgICAgICAgIHBfb2Zmc2V0ICAgOiBleHRyYWN0KGVuZGlhbiwgYnVmZmVyLCBvZmZzZXQrMHg0LCA0KSxcbiAgICAgICAgICAgICAgICBwX3ZhZGRyICAgIDogZXh0cmFjdChlbmRpYW4sIGJ1ZmZlciwgb2Zmc2V0KzB4OCwgNCksXG4gICAgICAgICAgICAgICAgcF9wYWRkciAgICA6IGV4dHJhY3QoZW5kaWFuLCBidWZmZXIsIG9mZnNldCsweEMsIDQpLFxuICAgICAgICAgICAgICAgIHBfZmlsZXN6ICAgOiBleHRyYWN0KGVuZGlhbiwgYnVmZmVyLCBvZmZzZXQrMHgxMCwgNCksXG4gICAgICAgICAgICAgICAgcF9tZW1zeiAgICA6IGV4dHJhY3QoZW5kaWFuLCBidWZmZXIsIG9mZnNldCsweDE0LCA0KSxcbiAgICAgICAgICAgICAgICBwX2ZsYWdzICAgIDogZXh0cmFjdChlbmRpYW4sIGJ1ZmZlciwgb2Zmc2V0KzB4MTgsIDQpLFxuICAgICAgICAgICAgICAgIHBfYWxpZ24gICAgOiBleHRyYWN0KGVuZGlhbiwgYnVmZmVyLCBvZmZzZXQrMHgxQywgNClcbiAgICAgICAgICAgIH07XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHBoRW50ID0ge1xuICAgICAgICAgICAgICAgIHBfdHlwZSAgICAgOiBleHRyYWN0KGVuZGlhbiwgYnVmZmVyLCBvZmZzZXQrMHgwLCA0KSxcbiAgICAgICAgICAgICAgICBwX2ZsYWdzICAgIDogZXh0cmFjdChlbmRpYW4sIGJ1ZmZlciwgb2Zmc2V0KzB4NCwgNCksXG4gICAgICAgICAgICAgICAgcF9vZmZzZXQgICA6IGV4dHJhY3QoZW5kaWFuLCBidWZmZXIsIG9mZnNldCsweDgsIDgpLFxuICAgICAgICAgICAgICAgIHBfdmFkZHIgICAgOiBleHRyYWN0KGVuZGlhbiwgYnVmZmVyLCBvZmZzZXQrMHgxMCwgOCksXG4gICAgICAgICAgICAgICAgcF9wYWRkciAgICA6IGV4dHJhY3QoZW5kaWFuLCBidWZmZXIsIG9mZnNldCsweDE4LCA4KSxcbiAgICAgICAgICAgICAgICBwX2ZpbGVzeiAgIDogZXh0cmFjdChlbmRpYW4sIGJ1ZmZlciwgb2Zmc2V0KzB4MjAsIDgpLFxuICAgICAgICAgICAgICAgIHBfbWVtc3ogICAgOiBleHRyYWN0KGVuZGlhbiwgYnVmZmVyLCBvZmZzZXQrMHgyOCwgOCksXG4gICAgICAgICAgICAgICAgcF9hbGlnbiAgICA6IGV4dHJhY3QoZW5kaWFuLCBidWZmZXIsIG9mZnNldCsweDMwLCA4KVxuICAgICAgICAgICAgfTtcblxuICAgICAgICBwaC5wdXNoKHBoRW50KTtcbiAgICB9XG5cbiAgICByZXR1cm4gcGg7XG59XG5cbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuZnVuY3Rpb24gc2VjdGlvbk5hbWUoZmQgOiBudW1iZXIsIG5hbWVPZmZzZXQgOiBudW1iZXIsIHNlY3Rpb25zIDogZWxmU2VjdGlvbkhlYWRlciBbXSwgZmggOiBlbGZGaWxlSGVhZGVyKSA6IHN0cmluZ1xue1xuICAgIGNvbnN0IG5hbWVMb2MgPSBzZWN0aW9uc1tmaC5lX3Noc3RybmR4XS5zaF9vZmZzZXQgKyBuYW1lT2Zmc2V0O1xuICAgIGNvbnN0IGJ1ZmZlciAgPSBCdWZmZXIuYWxsb2MoMzIpO1xuXG4gICAgcmVhZFN5bmMoZmQsIGJ1ZmZlciwgMCwgMzIsIG5hbWVMb2MpO1xuXG4gICAgY29uc3QgbnVsbFBvcyA9IGJ1ZmZlci5pbmRleE9mKDApO1xuICAgIHJldHVybiBidWZmZXIudG9TdHJpbmcoJ3V0ZjgnLCAwLCBudWxsUG9zKTtcbn1cblxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFJlYWQgVGhlIEVMRiBzZWN0aW9uIGhlYWRlciwgd2hpY2ggY29udGFpbnMgdGhlIHNlY3Rpb25zXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuZXhwb3J0IGZ1bmN0aW9uIHJlYWRFbGZTZWN0aW9uSGVhZGVyKGZkIDogbnVtYmVyLCBmaCA6IGVsZkZpbGVIZWFkZXIpIDogZWxmU2VjdGlvbkhlYWRlciBbXVxue1xuXG4gICAgY29uc3QgZW5kaWFuICA9IE51bWJlcihmaC5lX2lkZW50X2RhdGEpO1xuICAgIGNvbnN0IHNoU2l6ZSAgPSBOdW1iZXIoZmguZV9zaG51bSAqIGZoLmVfc2hlbnRzaXplKTtcbiAgICBjb25zdCBidWZmZXIgOiBCdWZmZXIgPSBCdWZmZXIuYWxsb2Moc2hTaXplKTtcbiAgICBsZXQgc2hFbnQgIDogZWxmU2VjdGlvbkhlYWRlcjtcbiAgICBjb25zdCBzaCAgICAgOiBlbGZTZWN0aW9uSGVhZGVyW10gPSBbXTtcblxuICAgIHJlYWRTeW5jKGZkLCBidWZmZXIsIDAsIHNoU2l6ZSwgZmguZV9zaG9mZik7XG5cbiAgICBmb3IgKGxldCBpZHggPSAwIDsgaWR4IDwgZmguZV9zaG51bTsgaWR4ICs9IDEpIHtcbiAgICAgICAgY29uc3Qgb2Zmc2V0ID0gaWR4ICogZmguZV9zaGVudHNpemU7XG4gICAgICAgIGlmIChmaC5lX3NoZW50c2l6ZSA9PSA0MCkgLy8gMzIgYml0IG1hY2hpbmVcbiAgICAgICAgICAgIHNoRW50ID0ge1xuICAgICAgICAgICAgICAgIG5hbWUgICAgICAgICA6ICcnLCAvLyBUbyBiZSBmaWxsZWQgaW4gbGF0ZXJcbiAgICAgICAgICAgICAgICBzaF9uYW1lICAgICAgOiBleHRyYWN0KGVuZGlhbiwgYnVmZmVyLCBvZmZzZXQrMHgwLCA0KSxcbiAgICAgICAgICAgICAgICBzaF90eXBlICAgICAgOiBleHRyYWN0KGVuZGlhbiwgYnVmZmVyLCBvZmZzZXQrMHg0LCA0KSxcbiAgICAgICAgICAgICAgICBzaF9mbGFncyAgICAgOiBleHRyYWN0KGVuZGlhbiwgYnVmZmVyLCBvZmZzZXQrMHg4LCA0KSxcbiAgICAgICAgICAgICAgICBzaF9hZGRyICAgICAgOiBleHRyYWN0KGVuZGlhbiwgYnVmZmVyLCBvZmZzZXQrMHhDLCA0KSxcbiAgICAgICAgICAgICAgICBzaF9vZmZzZXQgICAgOiBleHRyYWN0KGVuZGlhbiwgYnVmZmVyLCBvZmZzZXQrMHgxMCwgNCksXG4gICAgICAgICAgICAgICAgc2hfc2l6ZSAgICAgIDogZXh0cmFjdChlbmRpYW4sIGJ1ZmZlciwgb2Zmc2V0KzB4MTQsIDQpLFxuICAgICAgICAgICAgICAgIHNoX2xpbmsgICAgICA6IGV4dHJhY3QoZW5kaWFuLCBidWZmZXIsIG9mZnNldCsweDE4LCA0KSxcbiAgICAgICAgICAgICAgICBzaF9pbmZvICAgICAgOiBleHRyYWN0KGVuZGlhbiwgYnVmZmVyLCBvZmZzZXQrMHgxQywgNCksXG4gICAgICAgICAgICAgICAgc2hfYWRkcmFsaWduIDogZXh0cmFjdChlbmRpYW4sIGJ1ZmZlciwgb2Zmc2V0KzB4MjAsIDQpLFxuICAgICAgICAgICAgICAgIHNoX2VudHNpemUgICA6IGV4dHJhY3QoZW5kaWFuLCBidWZmZXIsIG9mZnNldCsweDI0LCA0KVxuICAgICAgICAgICAgfTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgc2hFbnQgPSB7XG4gICAgICAgICAgICAgICAgbmFtZSAgICAgICAgIDogJycsIC8vIFRvIGJlIGZpbGxlZCBpbiBsYXRlclxuICAgICAgICAgICAgICAgIHNoX25hbWUgICAgICA6IGV4dHJhY3QoZW5kaWFuLCBidWZmZXIsIG9mZnNldCsweDAsIDQpLFxuICAgICAgICAgICAgICAgIHNoX3R5cGUgICAgICA6IGV4dHJhY3QoZW5kaWFuLCBidWZmZXIsIG9mZnNldCsweDQsIDQpLFxuICAgICAgICAgICAgICAgIHNoX2ZsYWdzICAgICA6IGV4dHJhY3QoZW5kaWFuLCBidWZmZXIsIG9mZnNldCsweDgsIDgpLFxuICAgICAgICAgICAgICAgIHNoX2FkZHIgICAgICA6IGV4dHJhY3QoZW5kaWFuLCBidWZmZXIsIG9mZnNldCsweDEwLCA4KSxcbiAgICAgICAgICAgICAgICBzaF9vZmZzZXQgICAgOiBleHRyYWN0KGVuZGlhbiwgYnVmZmVyLCBvZmZzZXQrMHgxOCwgOCksXG4gICAgICAgICAgICAgICAgc2hfc2l6ZSAgICAgIDogZXh0cmFjdChlbmRpYW4sIGJ1ZmZlciwgb2Zmc2V0KzB4MjAsIDgpLFxuICAgICAgICAgICAgICAgIHNoX2xpbmsgICAgICA6IGV4dHJhY3QoZW5kaWFuLCBidWZmZXIsIG9mZnNldCsweDI4LCA0KSxcbiAgICAgICAgICAgICAgICBzaF9pbmZvICAgICAgOiBleHRyYWN0KGVuZGlhbiwgYnVmZmVyLCBvZmZzZXQrMHgyQywgNCksXG4gICAgICAgICAgICAgICAgc2hfYWRkcmFsaWduIDogZXh0cmFjdChlbmRpYW4sIGJ1ZmZlciwgb2Zmc2V0KzB4MzAsIDgpLFxuICAgICAgICAgICAgICAgIHNoX2VudHNpemUgICA6IGV4dHJhY3QoZW5kaWFuLCBidWZmZXIsIG9mZnNldCsweDM4LCA4KVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAvLyByZWNvcmQgb25seSBzZWN0aW9ucyB0aGF0IGFyZSB1c2VkXG4gICAgICAgIHNoLnB1c2goc2hFbnQpO1xuICAgIH1cblxuICAgIGZvciAobGV0IGlkeCA9IDA7IGlkeCA8IGZoLmVfc2hudW07IGlkeCArPSAxKSB7XG4gICAgICAgIHNoW2lkeF0ubmFtZSA9IHNlY3Rpb25OYW1lKGZkLCBzaFtpZHhdLnNoX25hbWUsIHNoLCBmaCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHNoO1xufVxuXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gRG9lcyBhIGZpbGUgbmFtZSBjb250YWluIGFuIEVMRiBmaWxlP1xuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbmV4cG9ydCBmdW5jdGlvbiBpc0VsZkZpbGUoZWxmRmlsZSA6IHN0cmluZykgOiBib29sZWFuXG57XG4gICAgY29uc3QgYnVmZmVyIDogQnVmZmVyID0gQnVmZmVyLmFsbG9jKDQpO1xuICAgIGNvbnN0IGZkICAgICA6IG51bWJlciA9IG9wZW5TeW5jKGVsZkZpbGUsICdyJyk7XG4gICAgcmVhZFN5bmMoZmQsIGJ1ZmZlciwgMCwgNCwgMCk7XG4gICAgY2xvc2VTeW5jKGZkKTtcbiAgICByZXR1cm4gKGJ1ZmZlci50b1N0cmluZygpID09ICdcXHg3RkVMRicpO1xufSIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImNoaWxkX3Byb2Nlc3NcIik7OyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImV2ZW50c1wiKTs7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiZnNcIik7OyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcInBhdGhcIik7OyIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4vLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuX193ZWJwYWNrX3JlcXVpcmVfXy5jID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fO1xuXG4iLCIvLyBtb2R1bGUgY2FjaGUgYXJlIHVzZWQgc28gZW50cnkgaW5saW5pbmcgaXMgZGlzYWJsZWRcbi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xudmFyIF9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDgzMik7XG4iXSwic291cmNlUm9vdCI6IiJ9